'use strict';var da;var c={Nj:"68"};"object"===typeof module&&(module.Hq=c);c.Rp=0;c.Pp=1;c.Hh=2;c.Qp=3;c.Wp=0;c.Vp=1;c.Jp=0;c.Ij=1;c.Jj=2;c.vj=0;c.me=1;c.Dd=2;c.dq=0;c.Ih=1;c.Ld=2;c.Hd=0;c.df=1;c.Md=2;c.Ej=0;c.Uh=1;c.jj=2;c.Xj=3;c.xm=4;c.pj=5;c.ij=100;c.Sm=101;c.Km=102;c.bn=200;c.Am=201;c.Rm=202;c.Dm=203;c.Wj=204;c.Hj=205;c.hm=206;c.Bm=207;c.im=208;c.Cm=209;c.Qm=210;c.Th=0;c.cq=1;c.Ip=2;c.ak=function(){};c.Np=function(){};c.bm=function(){};c.Nm=function(){};c.Om=function(){};c.xe=1E3;c.af=1001;c.Aj=1002;c.ve=1003;
c.Dj=1004;c.Cj=1005;c.Fd=1006;c.rm=1007;c.Ph=1008;c.bi=1009;c.Yl=1010;c.Mm=1011;c.$m=1012;c.nm=1013;c.Wm=1014;c.Jh=1015;c.Xm=1016;c.Ym=1017;c.Zm=1018;c.Tl=1019;c.Wh=1020;c.Jd=1021;c.um=1022;c.tm=1023;c.Im=2001;c.Fm=2002;c.Gm=2003;c.Hm=2004;c.p=function(a){return 3===arguments.length?Ia(this,arguments[0],arguments[1],arguments[2]):this.set(a)};
c.p.prototype={constructor:c.p,C:1,B:1,i:1,set:function(a){a instanceof c.p?this.c(a):"number"===typeof a?Ma(this,a):"string"===typeof a&&(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a)?(a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.C=Math.min(255,parseInt(a[1],10))/255,this.B=Math.min(255,parseInt(a[2],10))/255,this.i=Math.min(255,parseInt(a[3],10))/255):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a)?(a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.C=Math.min(100,parseInt(a[1],10))/100,this.B=
Math.min(100,parseInt(a[2],10))/100,this.i=Math.min(100,parseInt(a[3],10))/100):/^\#([0-9a-f]{6})$/i.test(a)?(a=/^\#([0-9a-f]{6})$/i.exec(a),Ma(this,parseInt(a[1],16))):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)?(a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),Ma(this,parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16))):/^(\w+)$/i.test(a)&&Ma(this,c.$l[a]));return this},c:function(a){this.C=a.C;this.B=a.B;this.i=a.i;return this},add:function(a){this.C+=a.C;this.B+=a.B;this.i+=a.i;return this},ld:function(a){this.C+=
a;this.B+=a;this.i+=a;return this},multiply:function(a){this.C*=a.C;this.B*=a.B;this.i*=a.i;return this},F:function(a){this.C*=a;this.B*=a;this.i*=a;return this},Cc:function(a,b){this.C+=(a.C-this.C)*b;this.B+=(a.B-this.B)*b;this.i+=(a.i-this.i)*b;return this},ia:function(a){return a.C===this.C&&a.B===this.B&&a.i===this.i},Bb:function(a){this.C=a[0];this.B=a[1];this.i=a[2];return this},clone:function(){return Ia(new c.p,this.C,this.B,this.i)}};
function Qa(a){return"rgb("+(255*a.C|0)+","+(255*a.B|0)+","+(255*a.i|0)+")"}function Za(a){return 255*a.C<<16^255*a.B<<8^255*a.i<<0}function $a(a,b){a.C=b.C*b.C;a.B=b.B*b.B;a.i=b.i*b.i}function Ia(a,b,d,e){a.C=b;a.B=d;a.i=e;return a}function Ma(a,b){b=Math.floor(b);a.C=(b>>16&255)/255;a.B=(b>>8&255)/255;a.i=(b&255)/255}
c.$l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.Nb=function(a,b,d,e){this.m=a||0;this.n=b||0;this.o=d||0;this.J=void 0!==e?e:1};
c.Nb.prototype={constructor:c.Nb,m:0,n:0,o:0,J:0,get x(){return this.m},set x(a){this.m=a;this.na()},get y(){return this.n},set y(a){this.n=a;this.na()},get z(){return this.o},set z(a){this.o=a;this.na()},get f(){return this.J},set f(a){this.J=a;this.na()},set:function(a,b,d,e){this.m=a;this.n=b;this.o=d;this.J=e;this.na();return this},c:function(a){this.m=a.x;this.n=a.y;this.o=a.z;this.J=a.f;this.na();return this},mh:function(a){var b=a.elements,d=b[0];a=b[4];var e=b[8],f=b[1],g=b[5],h=b[9],l=b[2],
k=b[6],b=b[10],m=d+g+b;0<m?(d=.5/Math.sqrt(m+1),this.J=.25/d,this.m=(k-h)*d,this.n=(e-l)*d,this.o=(f-a)*d):d>g&&d>b?(d=2*Math.sqrt(1+d-g-b),this.J=(k-h)/d,this.m=.25*d,this.n=(a+f)/d,this.o=(e+l)/d):g>b?(d=2*Math.sqrt(1+g-d-b),this.J=(e-l)/d,this.m=(a+f)/d,this.n=.25*d,this.o=(h+k)/d):(d=2*Math.sqrt(1+b-d-g),this.J=(f-a)/d,this.m=(e+l)/d,this.n=(h+k)/d,this.o=.25*d);this.na();return this},inverse:function(){this.m*=-1;this.n*=-1;this.o*=-1;this.na();this.normalize();return this},va:function(a){return this.m*
a.m+this.n*a.n+this.o*a.o+this.J*a.J},Zg:function(){return this.m*this.m+this.n*this.n+this.o*this.o+this.J*this.J},length:function(){return Math.sqrt(this.m*this.m+this.n*this.n+this.o*this.o+this.J*this.J)},normalize:function(){var a=this.length();0===a?(this.o=this.n=this.m=0,this.J=1):(a=1/a,this.m*=a,this.n*=a,this.o*=a,this.J*=a);this.na();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
kb(this,a,b)):kb(this,this,a)},vh:function(a,b){var d=this.m,e=this.n,f=this.o,g=this.J,h=g*a.J+d*a.m+e*a.n+f*a.o;0>h?(this.J=-a.J,this.m=-a.m,this.n=-a.n,this.o=-a.o,h=-h):this.c(a);if(1<=h)return this.J=g,this.m=d,this.n=e,this.o=f,this;var l=Math.acos(h),k=Math.sqrt(1-h*h);if(.001>Math.abs(k))return this.J=.5*(g+this.J),this.m=.5*(d+this.m),this.n=.5*(e+this.n),this.o=.5*(f+this.o),this;h=Math.sin((1-b)*l)/k;l=Math.sin(b*l)/k;this.J=g*h+this.J*l;this.m=d*h+this.m*l;this.n=e*h+this.n*l;this.o=f*
h+this.o*l;this.na();return this},ia:function(a){return a.m===this.m&&a.n===this.n&&a.o===this.o&&a.J===this.J},Bb:function(a){this.m=a[0];this.n=a[1];this.o=a[2];this.J=a[3];this.na();return this},Ni:function(a){this.na=a;return this},na:function(){},clone:function(){return new c.Nb(this.m,this.n,this.o,this.J)}};function kb(a,b,d){var e=b.m,f=b.n,g=b.o;b=b.J;var h=d.m,l=d.n,k=d.o;d=d.J;a.m=e*d+b*h+f*k-g*l;a.n=f*d+b*l+g*h-e*k;a.o=g*d+b*k+e*l-f*h;a.J=b*d-e*h-f*l-g*k;a.na();return a}
c.Nb.vh=function(a,b,d,e){return d.c(a).vh(b,e)};c.g=function(a,b){this.x=a||0;this.y=b||0};
c.g.prototype={constructor:c.g,set:function(a,b){this.x=a;this.y=b;return this},ag:function(a){this.y=a;return this},c:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.sc(a,b);this.x+=a.x;this.y+=a.y;return this},sc:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},ld:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.ba(a,b);this.x-=a.x;this.y-=a.y;return this},ba:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},F:function(a){this.x*=a;this.y*=a;return this},pd:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},tc:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&
(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},be:function(){this.x=-this.x;this.y=-this.y;return this},va:function(a){return this.x*a.x+this.y*a.y},Zg:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y)},normalize:function(){return this.pd(this.length())},Qc:function(a){return Math.sqrt(this.Zd(a))},Zd:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},nh:function(a){var b=this.length();0!==b&&a!==b&&this.F(a/b);return this},Cc:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},ia:function(a){return a.x===this.x&&a.y===this.y},Bb:function(a){this.x=a[0];this.y=a[1];return this},clone:function(){return new c.g(this.x,this.y)}};
c.b=function(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0};
c.b.prototype={constructor:c.b,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},ag:function(a){this.y=a;return this},c:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.sc(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},ld:function(a){this.x+=a;this.y+=a;this.z+=a;return this},sc:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=
a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ba(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},ba:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;
this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},F:function(a){this.x*=a;this.y*=a;this.z*=a;return this},Q:function(a){var b=this.x,d=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*e+a[12];this.y=a[1]*b+a[5]*d+a[9]*e+a[13];this.z=a[2]*b+a[6]*d+a[10]*e+a[14];return this},pd:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<
a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},tc:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);this.z=Math.round(this.z);return this},be:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},va:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Zg:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Wk:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.pd(this.length())},nh:function(a){var b=this.length();0!==b&&
a!==b&&this.F(a/b);return this},Cc:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},Qc:function(a){return Math.sqrt(this.Zd(a))},Zd:function(a){var b=this.x-a.x,d=this.y-a.y;a=this.z-a.z;return b*b+d*d+a*a},ia:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},Bb:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},clone:function(){return new c.b(this.x,this.y,this.z)}};
function lb(a,b){a.x=b.elements[12];a.y=b.elements[13];a.z=b.elements[14];return a}function wb(a,b,d){var e=b.x,f=b.y;b=b.z;var g=d.x,h=d.y;d=d.z;a.x=f*d-b*h;a.y=b*g-e*d;a.z=e*h-f*g;return a}function Cb(a,b){var d=a.x,e=a.y,f=a.z;a.x=e*b.z-f*b.y;a.y=f*b.x-d*b.z;a.z=d*b.y-e*b.x;return a}function Hb(a,b){var d=a.x,e=a.y,f=a.z,g=b.elements,h=1/(g[3]*d+g[7]*e+g[11]*f+g[15]);a.x=(g[0]*d+g[4]*e+g[8]*f+g[12])*h;a.y=(g[1]*d+g[5]*e+g[9]*f+g[13])*h;a.z=(g[2]*d+g[6]*e+g[10]*f+g[14])*h;return a}
function Qb(a,b){var d=a.x,e=a.y,f=a.z,g=b.elements;a.x=g[0]*d+g[3]*e+g[6]*f;a.y=g[1]*d+g[4]*e+g[7]*f;a.z=g[2]*d+g[5]*e+g[8]*f;return a}c.Pb=function(a,b,d,e){this.x=a||0;this.y=b||0;this.z=d||0;this.f=void 0!==e?e:1};
c.Pb.prototype={constructor:c.Pb,set:function(a,b,d,e){this.x=a;this.y=b;this.z=d;this.f=e;return this},ag:function(a){this.y=a;return this},c:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.f=void 0!==a.f?a.f:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.sc(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.f+=a.f;return this},ld:function(a){this.x+=a;this.y+=a;this.z+=a;this.f+=a;return this},
sc:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.f=a.f+b.f;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ba(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.f-=a.f;return this},ba:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.f=a.f-b.f;return this},F:function(a){this.x*=a;this.y*=a;this.z*=a;this.f*=a;return this},Q:function(a){var b=this.x,d=this.y,e=this.z,
f=this.f;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*e+a[12]*f;this.y=a[1]*b+a[5]*d+a[9]*e+a[13]*f;this.z=a[2]*b+a[6]*d+a[10]*e+a[14]*f;this.f=a[3]*b+a[7]*d+a[11]*e+a[15]*f;return this},pd:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.f*=a):(this.z=this.y=this.x=0,this.f=1);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.f>a.f&&(this.f=a.f);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&
(this.z=a.z);this.f<a.f&&(this.f=a.f);return this},tc:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.f<a.f?this.f=a.f:this.f>b.f&&(this.f=b.f);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.f=Math.floor(this.f);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.f=
Math.ceil(this.f);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.f=Math.round(this.f);return this},be:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.f=-this.f;return this},va:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.f*a.f},Zg:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.f*this.f},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.f*this.f)},Wk:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.f)},normalize:function(){return this.pd(this.length())},nh:function(a){var b=this.length();0!==b&&a!==b&&this.F(a/b);return this},Cc:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.f+=(a.f-this.f)*b;return this},ia:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.f===this.f},Bb:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.f=a[3];return this},clone:function(){return new c.Pb(this.x,this.y,
this.z,this.f)}};c.Jc=function(a,b,d,e){this.m=a||0;this.n=b||0;this.o=d||0;this.hb=e||c.Jc.qj};c.Jc.kq="XYZ YZX ZXY XZY YXZ ZYX".split(" ");c.Jc.qj="XYZ";
c.Jc.prototype={constructor:c.Jc,m:0,n:0,o:0,hb:c.Jc.qj,get x(){return this.m},set x(a){this.m=a;this.na()},get y(){return this.n},set y(a){this.n=a;this.na()},get z(){return this.o},set z(a){this.o=a;this.na()},get ee(){return this.hb},set ee(a){this.hb=a;this.na()},set:function(a,b,d,e){this.m=a;this.n=b;this.o=d;this.hb=e||this.hb;this.na();return this},c:function(a){this.m=a.m;this.n=a.n;this.o=a.o;this.hb=a.hb;this.na();return this},mh:function(a,b){var d=c.Math.tc,e=a.elements,f=e[0],g=e[4],
h=e[8],l=e[1],k=e[5],m=e[9],q=e[2],p=e[6],e=e[10];b=b||this.hb;"XYZ"===b?(this.n=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this.m=Math.atan2(-m,e),this.o=Math.atan2(-g,f)):(this.m=Math.atan2(p,k),this.o=0)):"YXZ"===b?(this.m=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this.n=Math.atan2(h,e),this.o=Math.atan2(l,k)):(this.n=Math.atan2(-q,f),this.o=0)):"ZXY"===b?(this.m=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this.n=Math.atan2(-q,e),this.o=Math.atan2(-g,k)):(this.n=0,this.o=Math.atan2(l,f))):"ZYX"===b?
(this.n=Math.asin(-d(q,-1,1)),.99999>Math.abs(q)?(this.m=Math.atan2(p,e),this.o=Math.atan2(l,f)):(this.m=0,this.o=Math.atan2(-g,k))):"YZX"===b?(this.o=Math.asin(d(l,-1,1)),.99999>Math.abs(l)?(this.m=Math.atan2(-m,k),this.n=Math.atan2(-q,f)):(this.m=0,this.n=Math.atan2(h,e))):"XZY"===b?(this.o=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this.m=Math.atan2(p,k),this.n=Math.atan2(h,f)):(this.m=Math.atan2(-m,e),this.n=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);
this.hb=b;this.na();return this},ia:function(a){return a.m===this.m&&a.n===this.n&&a.o===this.o&&a.hb===this.hb},Bb:function(a){this.m=a[0];this.n=a[1];this.o=a[2];void 0!==a[3]&&(this.hb=a[3]);this.na();return this},Ni:function(a){this.na=a;return this},na:function(){},clone:function(){return new c.Jc(this.m,this.n,this.o,this.hb)}};c.Nh=function(a,b){this.start=void 0!==a?a:new c.b;this.end=void 0!==b?b:new c.b};
c.Nh.prototype={constructor:c.Nh,set:function(a,b){this.start.c(a);this.end.c(b);return this},c:function(a){this.start.c(a.start);this.end.c(a.end);return this},fa:function(a){return(a||new c.b).sc(this.start,this.end).F(.5)},Ba:function(){return this.start.Qc(this.end)},Ak:function(a,b){return(b||new c.b||new c.b).ba(this.end,this.start).F(a).add(this.start)},Q:function(a){this.start.Q(a);this.end.Q(a);return this},ia:function(a){return a.start.ia(this.start)&&a.end.ia(this.end)},clone:function(){return(new c.Nh).c(this)}};
c.ne=function(a,b){this.min=void 0!==a?a:new c.g(Infinity,Infinity);this.max=void 0!==b?b:new c.g(-Infinity,-Infinity)};
c.ne.prototype={constructor:c.ne,set:function(a,b){this.min.c(a);this.max.c(b);return this},Uc:function(a){this.ud();for(var b=0,d=a.length;b<d;b++)this.Bf(a[b]);return this},c:function(a){this.min.c(a.min);this.max.c(a.max);return this},ud:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},fa:function(a){return(a||new c.g).sc(this.min,this.max).F(.5)},size:function(a){return(a||new c.g).ba(this.max,
this.min)},Bf:function(a){this.min.min(a);this.max.max(a);return this},Me:function(a){this.min.ld(-a);this.max.ld(a);return this},Ie:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},getParameter:function(a,b){return(b||new c.g).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},Kf:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},Le:function(){var a=new c.g;return function(b){return a.c(b).tc(this.min,
this.max).sub(b).length()}}(),Qk:function(a){this.min.max(a.min);this.max.min(a.max);return this},Nl:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},ia:function(a){return a.min.ia(this.min)&&a.max.ia(this.max)},clone:function(){return(new c.ne).c(this)}};c.Ib=function(a,b){this.min=void 0!==a?a:new c.b(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new c.b(-Infinity,-Infinity,-Infinity)};
c.Ib.prototype={constructor:c.Ib,set:function(a,b){this.min.c(a);this.max.c(b);return this},Uc:function(a){this.ud();for(var b=0,d=a.length;b<d;b++)this.Bf(a[b]);return this},ep:function(){var a=new c.b;return function(b){var d=this;b.pa(!0);this.ud();Rb(b,function(b){if(void 0!==b.j&&void 0!==b.j.e)for(var f=b.j.e,g=0,h=f.length;g<h;g++)a.c(f[g]),a.Q(b.l),d.Bf(a)});return this}}(),c:function(a){this.min.c(a.min);this.max.c(a.max);return this},ud:function(){this.min.x=this.min.y=this.min.z=Infinity;
this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},fa:function(a){return(a||new c.b).sc(this.min,this.max).F(.5)},size:function(a){return(a||new c.b).ba(this.max,this.min)},Bf:function(a){this.min.min(a);this.max.max(a);return this},Me:function(a){this.min.ld(-a);this.max.ld(a);return this},Ie:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?
!1:!0},getParameter:function(a,b){return(b||new c.b).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},Kf:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},Le:function(){var a=new c.b;return function(b){return a.c(b).tc(this.min,this.max).sub(b).length()}}(),Qk:function(a){this.min.max(a.min);this.max.min(a.max);return this},
Nl:function(a){this.min.min(a.min);this.max.max(a.max);return this},Q:function(){var a=[new c.b,new c.b,new c.b,new c.b,new c.b,new c.b,new c.b,new c.b];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).Q(b);a[1].set(this.min.x,this.min.y,this.max.z).Q(b);a[2].set(this.min.x,this.max.y,this.min.z).Q(b);a[3].set(this.min.x,this.max.y,this.max.z).Q(b);a[4].set(this.max.x,this.min.y,this.min.z).Q(b);a[5].set(this.max.x,this.min.y,this.max.z).Q(b);a[6].set(this.max.x,this.max.y,this.min.z).Q(b);
a[7].set(this.max.x,this.max.y,this.max.z).Q(b);this.ud();this.Uc(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},ia:function(a){return a.min.ia(this.min)&&a.max.ia(this.max)},clone:function(){return(new c.Ib).c(this)}};c.ub=function(a,b,d,e,f,g,h,l,k){var m=this.elements=new Float32Array(9);m[0]=void 0!==a?a:1;m[3]=b||0;m[6]=d||0;m[1]=e||0;m[4]=void 0!==f?f:1;m[7]=g||0;m[2]=h||0;m[5]=l||0;m[8]=void 0!==k?k:1};
c.ub.prototype={constructor:c.ub,set:function(a,b,d,e,f,g,h,l,k){var m=this.elements;m[0]=a;m[3]=b;m[6]=d;m[1]=e;m[4]=f;m[7]=g;m[2]=h;m[5]=l;m[8]=k;return this},Gi:function(){this.set(1,0,0,0,1,0,0,0,1);return this},c:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},ii:function(){var a=new c.b;return function(b,d,e){void 0===d&&(d=0);void 0===e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.x=b[d],a.y=b[d+1],a.z=b[d+2],Qb(a,this),b[d]=a.x,b[d+1]=a.y,b[d+2]=a.z;
return b}}(),F:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},Fk:function(){var a=this.elements,b=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],l=a[6],k=a[7],a=a[8];return b*g*a-b*h*k-d*f*a+d*h*l+e*f*k-e*g*l},Cb:function(a,b){var d=a.elements,e=this.elements;e[0]=d[10]*d[5]-d[6]*d[9];e[1]=-d[10]*d[1]+d[2]*d[9];e[2]=d[6]*d[1]-d[2]*d[5];e[3]=-d[10]*d[4]+d[6]*d[8];e[4]=d[10]*d[0]-d[2]*d[8];e[5]=-d[6]*d[0]+d[2]*d[4];e[6]=d[9]*d[4]-d[5]*d[8];
e[7]=-d[9]*d[0]+d[1]*d[8];e[8]=d[5]*d[0]-d[1]*d[4];d=d[0]*e[0]+d[1]*e[3]+d[2]*e[6];if(0===d){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.Gi();return this}this.F(1/d);return this},Kl:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},Sg:function(a,b){var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+
4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];return a},Bb:function(a){this.elements.set(a);return this},clone:function(){var a=this.elements;return new c.ub(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};function Sb(a,b){a.Cb(b).Kl();return a}
c.R=function(a,b,d,e,f,g,h,l,k,m,q,p,r,s,u,t){var w=this.elements=new Float32Array(16);w[0]=void 0!==a?a:1;w[4]=b||0;w[8]=d||0;w[12]=e||0;w[1]=f||0;w[5]=void 0!==g?g:1;w[9]=h||0;w[13]=l||0;w[2]=k||0;w[6]=m||0;w[10]=void 0!==q?q:1;w[14]=p||0;w[3]=r||0;w[7]=s||0;w[11]=u||0;w[15]=void 0!==t?t:1};
c.R.prototype={constructor:c.R,set:function(a,b,d,e,f,g,h,l,k,m,q,p,r,s,u,t){var w=this.elements;w[0]=a;w[4]=b;w[8]=d;w[12]=e;w[1]=f;w[5]=g;w[9]=h;w[13]=l;w[2]=k;w[6]=m;w[10]=q;w[14]=p;w[3]=r;w[7]=s;w[11]=u;w[15]=t;return this},Gi:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},c:function(a){this.elements.set(a.elements);return this},kb:function(){var a=new c.b,b=new c.b,d=new c.b;return function(e,f,g){var h=this.elements;d.ba(e,f).normalize();0===d.length()&&(d.z=1);wb(a,g,d).normalize();
0===a.length()&&(d.x+=1E-4,wb(a,g,d).normalize());wb(b,d,a);h[0]=a.x;h[4]=b.x;h[8]=d.x;h[1]=a.y;h[5]=b.y;h[9]=d.y;h[2]=a.z;h[6]=b.z;h[10]=d.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Wb(this,a,b)):Wb(this,this,a)},F:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=
a;b[15]*=a;return this},ii:function(){var a=new c.b;return function(b,d,e){void 0===d&&(d=0);void 0===e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.x=b[d],a.y=b[d+1],a.z=b[d+2],a.Q(this),b[d]=a.x,b[d+1]=a.y,b[d+2]=a.z;return b}}(),Fk:function(){var a=this.elements,b=a[0],d=a[4],e=a[8],f=a[12],g=a[1],h=a[5],l=a[9],k=a[13],m=a[2],q=a[6],p=a[10],r=a[14];return a[3]*(+f*l*q-e*k*q-f*h*p+d*k*p+e*h*r-d*l*r)+a[7]*(+b*l*r-b*k*p+f*g*p-e*g*r+e*k*m-f*l*m)+a[11]*(+b*k*q-b*h*r-f*g*q+d*g*r+f*h*m-d*k*m)+a[15]*(-e*
h*m-b*l*q+b*h*p+e*g*q-d*g*p+d*l*m)},Kl:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},Sg:function(a,b){var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];a[b+9]=d[9];a[b+10]=d[10];a[b+11]=d[11];a[b+12]=d[12];a[b+13]=d[13];a[b+14]=d[14];a[b+15]=d[15];return a},Cb:function(a,b){var d=
this.elements,e=a.elements,f=e[0],g=e[4],h=e[8],l=e[12],k=e[1],m=e[5],q=e[9],p=e[13],r=e[2],s=e[6],u=e[10],t=e[14],w=e[3],x=e[7],v=e[11],e=e[15];d[0]=q*t*x-p*u*x+p*s*v-m*t*v-q*s*e+m*u*e;d[4]=l*u*x-h*t*x-l*s*v+g*t*v+h*s*e-g*u*e;d[8]=h*p*x-l*q*x+l*m*v-g*p*v-h*m*e+g*q*e;d[12]=l*q*s-h*p*s-l*m*u+g*p*u+h*m*t-g*q*t;d[1]=p*u*w-q*t*w-p*r*v+k*t*v+q*r*e-k*u*e;d[5]=h*t*w-l*u*w+l*r*v-f*t*v-h*r*e+f*u*e;d[9]=l*q*w-h*p*w-l*k*v+f*p*v+h*k*e-f*q*e;d[13]=h*p*r-l*q*r+l*k*u-f*p*u-h*k*t+f*q*t;d[2]=m*t*w-p*s*w+p*r*x-k*t*
x-m*r*e+k*s*e;d[6]=l*s*w-g*t*w-l*r*x+f*t*x+g*r*e-f*s*e;d[10]=g*p*w-l*m*w+l*k*x-f*p*x-g*k*e+f*m*e;d[14]=l*m*r-g*p*r-l*k*s+f*p*s+g*k*t-f*m*t;d[3]=q*s*w-m*u*w-q*r*x+k*u*x+m*r*v-k*s*v;d[7]=g*u*w-h*s*w+h*r*x-f*u*x-g*r*v+f*s*v;d[11]=h*m*w-g*q*w-h*k*x+f*q*x+g*k*v-f*m*v;d[15]=g*q*r-h*m*r+h*k*s-f*q*s-g*k*u+f*m*u;d=f*d[0]+k*d[4]+r*d[8]+w*d[12];if(0==d){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.Gi();return this}this.F(1/d);return this},translate:function(){console.warn("THREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this},Pg:function(){var a=new c.b,b=new c.R;return function(d,e,f){var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),l=a.set(g[4],g[5],g[6]).length(),k=a.set(g[8],g[9],g[10]).length();0>this.Fk()&&(h=-h);d.x=
g[12];d.y=g[13];d.z=g[14];b.elements.set(this.elements);d=1/h;var g=1/l,m=1/k;b.elements[0]*=d;b.elements[1]*=d;b.elements[2]*=d;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;e.mh(b);f.x=h;f.y=l;f.z=k;return this}}(),Bb:function(a){this.elements.set(a);return this},clone:function(){var a=this.elements;return new c.R(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};
function ic(a,b,d,e,f,g,h){a=a.elements;a[0]=2*g/(d-b);a[4]=0;a[8]=(d+b)/(d-b);a[12]=0;a[1]=0;a[5]=2*g/(f-e);a[9]=(f+e)/(f-e);a[13]=0;a[2]=0;a[6]=0;a[10]=-(h+g)/(h-g);a[14]=-2*h*g/(h-g);a[3]=0;a[7]=0;a[11]=-1;a[15]=0}
function jc(a,b,d,e){var f=a.elements,g=d.x,h=d.y,l=d.z,k=d.f,m=g+g,q=h+h,p=l+l;d=g*m;var r=g*q,g=g*p,s=h*q,h=h*p,l=l*p,m=k*m,q=k*q,k=k*p;f[0]=1-(s+l);f[4]=r-k;f[8]=g+q;f[1]=r+k;f[5]=1-(d+l);f[9]=h-m;f[2]=g-q;f[6]=h+m;f[10]=1-(d+s);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;a.scale(e);a=a.elements;a[12]=b.x;a[13]=b.y;a[14]=b.z}
function kc(a,b,d){var e=Math.cos(d);d=Math.sin(d);var f=1-e,g=b.x,h=b.y;b=b.z;var l=f*g,k=f*h;a.set(l*g+e,l*h-d*b,l*b+d*h,0,l*h+d*b,k*h+e,k*b-d*g,0,l*b-d*h,k*b+d*g,f*b*b+e,0,0,0,0,1);return a}function Ac(){var a=new c.R,b=-Math.PI/2,d=Math.cos(b),b=Math.sin(b);a.set(1,0,0,0,0,d,-b,0,0,b,d,0,0,0,0,1);return a}function Bc(a,b,d,e){a.set(1,0,0,b,0,1,0,d,0,0,1,e,0,0,0,1);return a}
function Wb(a,b,d){var e=b.elements,f=d.elements;d=a.elements;b=e[0];var g=e[4],h=e[8],l=e[12],k=e[1],m=e[5],q=e[9],p=e[13],r=e[2],s=e[6],u=e[10],t=e[14],w=e[3],x=e[7],v=e[11],e=e[15],D=f[0],z=f[4],B=f[8],G=f[12],K=f[1],y=f[5],C=f[9],L=f[13],R=f[2],ca=f[6],Q=f[10],E=f[14],A=f[3],F=f[7],J=f[11],f=f[15];d[0]=b*D+g*K+h*R+l*A;d[4]=b*z+g*y+h*ca+l*F;d[8]=b*B+g*C+h*Q+l*J;d[12]=b*G+g*L+h*E+l*f;d[1]=k*D+m*K+q*R+p*A;d[5]=k*z+m*y+q*ca+p*F;d[9]=k*B+m*C+q*Q+p*J;d[13]=k*G+m*L+q*E+p*f;d[2]=r*D+s*K+u*R+t*A;d[6]=
r*z+s*y+u*ca+t*F;d[10]=r*B+s*C+u*Q+t*J;d[14]=r*G+s*L+u*E+t*f;d[3]=w*D+x*K+v*R+e*A;d[7]=w*z+x*y+v*ca+e*F;d[11]=w*B+x*C+v*Q+e*J;d[15]=w*G+x*L+v*E+e*f;return a}c.xg=function(a,b){this.origin=void 0!==a?a:new c.b;this.direction=void 0!==b?b:new c.b};
c.xg.prototype={constructor:c.xg,set:function(a,b){this.origin.c(a);this.direction.c(b);return this},c:function(a){this.origin.c(a.origin);this.direction.c(a.direction);return this},Ak:function(a,b){return(b||new c.b).c(this.direction).F(a).add(this.origin)},Le:function(){var a=new c.b;return function(b){var d=a.ba(b,this.origin).va(this.direction);if(0>d)return this.origin.Qc(b);a.c(this.direction).F(d).add(this.origin);return a.Qc(b)}}(),Kf:function(){var a=new c.b;return function(b){var d;var e,
f,g;e=1/this.direction.x;g=1/this.direction.y;var h=1/this.direction.z,l=this.origin;0<=e?(d=(b.min.x-l.x)*e,e*=b.max.x-l.x):(d=(b.max.x-l.x)*e,e*=b.min.x-l.x);0<=g?(f=(b.min.y-l.y)*g,g*=b.max.y-l.y):(f=(b.max.y-l.y)*g,g*=b.min.y-l.y);if(d>g||f>e)d=null;else{if(f>d||d!==d)d=f;if(g<e||e!==e)e=g;0<=h?(f=(b.min.z-l.z)*h,b=(b.max.z-l.z)*h):(f=(b.max.z-l.z)*h,b=(b.min.z-l.z)*h);if(d>b||f>e)d=null;else{if(f>d||d!==d)d=f;if(b<e||e!==e)e=b;d=0>e?null:this.Ak(0<=d?d:e,a)}}return null!==d}}(),Q:function(a){this.direction.add(this.origin).Q(a);
this.origin.Q(a);this.direction.sub(this.origin);this.direction.normalize();return this},ia:function(a){return a.origin.ia(this.origin)&&a.direction.ia(this.direction)},clone:function(){return(new c.xg).c(this)}};c.Ob=function(a,b){this.fa=void 0!==a?a:new c.b;this.oa=void 0!==b?b:0};
c.Ob.prototype={constructor:c.Ob,set:function(a,b){this.fa.c(a);this.oa=b;return this},Uc:function(){var a=new c.Ib;return function(b,d){var e=this.fa;void 0!==d?e.c(d):a.Uc(b).fa(e);for(var f=0,g=0,h=b.length;g<h;g++)f=Math.max(f,e.Zd(b[g]));this.oa=Math.sqrt(f);return this}}(),c:function(a){this.fa.c(a.fa);this.oa=a.oa;return this},empty:function(){return 0>=this.oa},Ie:function(a){return a.Zd(this.fa)<=this.oa*this.oa},Le:function(a){return a.Qc(this.fa)-this.oa},Rk:function(a){var b=this.oa+a.oa;
return a.fa.Zd(this.fa)<=b*b},Nk:function(a){a=a||new c.Ib;a.set(this.fa,this.fa);a.Me(this.oa);return a},Q:function(a){this.fa.Q(a);var b=this.oa;a=a.elements;a=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])));this.oa=b*a;return this},translate:function(a){this.fa.add(a);return this},ia:function(a){return a.fa.ia(this.fa)&&a.oa===this.oa},clone:function(){return(new c.Ob).c(this)}};
c.Ed=function(a,b,d,e,f,g){this.Ue=[void 0!==a?a:new c.Kc,void 0!==b?b:new c.Kc,void 0!==d?d:new c.Kc,void 0!==e?e:new c.Kc,void 0!==f?f:new c.Kc,void 0!==g?g:new c.Kc]};
c.Ed.prototype={constructor:c.Ed,set:function(a,b,d,e,f,g){var h=this.Ue;h[0].c(a);h[1].c(b);h[2].c(d);h[3].c(e);h[4].c(f);h[5].c(g);return this},c:function(a){for(var b=this.Ue,d=0;6>d;d++)b[d].c(a.Ue[d]);return this},Yg:function(){var a=new c.Ob;return function(b){var d=b.j;null===d.Pa&&d.Yd();a.c(d.Pa);a.Q(b.l);return this.Rk(a)}}(),Rk:function(a){var b=this.Ue,d=a.fa;a=-a.oa;for(var e=0;6>e;e++)if(b[e].Le(d)<a)return!1;return!0},Ie:function(a){for(var b=this.Ue,d=0;6>d;d++)if(0>b[d].Le(a))return!1;
return!0},clone:function(){return(new c.Ed).c(this)}};function Cc(a,b){var d=a.Ue,e=b.elements,f=e[0],g=e[1],h=e[2],l=e[3],k=e[4],m=e[5],q=e[6],p=e[7],r=e[8],s=e[9],u=e[10],t=e[11],w=e[12],x=e[13],v=e[14],e=e[15];Oc(d[0],l-f,p-k,t-r,e-w).normalize();Oc(d[1],l+f,p+k,t+r,e+w).normalize();Oc(d[2],l+g,p+m,t+s,e+x).normalize();Oc(d[3],l-g,p-m,t-s,e-x).normalize();Oc(d[4],l-h,p-q,t-u,e-v).normalize();Oc(d[5],l+h,p+q,t+u,e+v).normalize()}
c.Kc=function(a,b){this.D=void 0!==a?a:new c.b(1,0,0);this.ib=void 0!==b?b:0};
c.Kc.prototype={constructor:c.Kc,set:function(a,b){this.D.c(a);this.ib=b;return this},c:function(a){this.D.c(a.D);this.ib=a.ib;return this},normalize:function(){var a=1/this.D.length();this.D.F(a);this.ib*=a;return this},be:function(){this.ib*=-1;this.D.be();return this},Le:function(a){return this.D.va(a)+this.ib},Q:function(){var a=new c.b,b=new c.b,d=new c.ub;return function(e,f){var g=f||Sb(d,e),g=Qb(a.c(this.D),g),h=(b||new c.b).c(this.D).F(-this.ib);h.Q(e);this.D.c(g);this.ib=-h.va(this.D);return this}}(),
translate:function(a){this.ib-=a.va(this.D);return this},ia:function(a){return a.D.ia(this.D)&&a.ib==this.ib},clone:function(){return(new c.Kc).c(this)}};function Oc(a,b,d,e,f){a.D.set(b,d,e);a.ib=f;return a}
c.Math={Df:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),d=0,e;return function(){for(var f=0;36>f;f++)8==f||13==f||18==f||23==f?b[f]="-":14==f?b[f]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),e=d&15,d>>=4,b[f]=a[19==f?e&3|8:e]);return b.join("")}}(),tc:function(a,b,d){return a<b?b:a>d?d:a},Cq:function(a,b){return a<b?b:a},ur:function(a,b,d,e,f){return e+(a-b)*(f-e)/(d-b)},ip:function(a,b,d){if(a<=b)return 0;if(a>=d)return 1;a=(a-b)/(d-
b);return a*a*(3-2*a)},ds:function(a,b,d){if(a<=b)return 0;if(a>=d)return 1;a=(a-b)/(d-b);return a*a*a*(a*(6*a-15)+10)},Yr:function(){return(65280*Math.random()+255*Math.random())/65535},Xr:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},Vr:function(a,b){return a+Math.random()*(b-a)},Wr:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},Ek:function(){var a=Math.PI/180;return function(b){return b*a}}(),Sr:function(){var a=180/Math.PI;return function(b){return b*
a}}(),td:function(a){return 0===(a&a-1)&&0!==a}};
c.mq=function(a){function b(a,b,d,e,f,g,h){a=.5*(d-a);e=.5*(e-b);return(2*(b-d)+a+e)*h+(-3*(b-d)-2*a-e)*g+a*f+b}this.ja=a;var d=[],e={x:0,y:0,z:0},f,g,h,l,k,m,q,p,r;this.wa=function(a){f=(this.ja.length-1)*a;g=Math.floor(f);h=f-g;d[0]=0===g?g:g-1;d[1]=g;d[2]=g>this.ja.length-2?this.ja.length-1:g+1;d[3]=g>this.ja.length-3?this.ja.length-1:g+2;m=this.ja[d[0]];q=this.ja[d[1]];p=this.ja[d[2]];r=this.ja[d[3]];l=h*h;k=h*l;e.x=b(m.x,q.x,p.x,r.x,h,l,k);e.y=b(m.y,q.y,p.y,r.y,h,l,k);e.z=b(m.z,q.z,p.z,r.z,h,
l,k);return e};this.Ef=function(a){var b,d,e,f=b=b=0,g=new c.b,h=new c.b,k=[],l=0;k[0]=0;a||(a=100);d=this.ja.length*a;g.c(this.ja[0]);for(a=1;a<d;a++)b=a/d,e=this.wa(b),h.c(e),l+=h.Qc(g),g.c(e),b*=this.ja.length-1,b=Math.floor(b),b!=f&&(k[b]=l,f=b);k[k.length]=l;return{Bq:k,total:l}}};c.pc=function(a,b,d){this.N=void 0!==a?a:new c.b;this.i=void 0!==b?b:new c.b;this.O=void 0!==d?d:new c.b};
c.pc.D=function(){var a=new c.b;return function(b,d,e,f){f=f||new c.b;f.ba(e,d);a.ba(b,d);Cb(f,a);b=f.Zg();return 0<b?f.F(1/Math.sqrt(b)):f.set(0,0,0)}}();c.pc.ki=function(){var a=new c.b,b=new c.b,d=new c.b;return function(e,f,g,h,l){a.ba(h,f);b.ba(g,f);d.ba(e,f);e=a.va(a);f=a.va(b);g=a.va(d);var k=b.va(b);h=b.va(d);var m=e*k-f*f;l=l||new c.b;if(0==m)return l.set(-2,-1,-1);m=1/m;k=(k*g-f*h)*m;e=(e*h-f*g)*m;return l.set(1-k-e,e,k)}}();
c.pc.Ie=function(){var a=new c.b;return function(b,d,e,f){b=c.pc.ki(b,d,e,f,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
c.pc.prototype={constructor:c.pc,set:function(a,b,d){this.N.c(a);this.i.c(b);this.O.c(d);return this},c:function(a){this.N.c(a.N);this.i.c(a.i);this.O.c(a.O);return this},zk:function(){var a=new c.b,b=new c.b;return function(){a.ba(this.O,this.i);b.ba(this.N,this.i);return.5*Cb(a,b).length()}}(),D:function(a){return c.pc.D(this.N,this.i,this.O,a)},ki:function(a,b){return c.pc.ki(a,this.N,this.i,this.O,b)},Ie:function(a){return c.pc.Ie(a,this.N,this.i,this.O)},ia:function(a){return a.N.ia(this.N)&&
a.i.ia(this.i)&&a.O.ia(this.O)},clone:function(){return(new c.pc).c(this)}};c.oj=function(a){this.zn=void 0!==a?a:!0;this.elapsedTime=this.Mi=this.startTime=0;this.lh=!1};
c.oj.prototype={constructor:c.oj,start:function(){this.Mi=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.lh=!0},stop:function(){var a=0;this.zn&&!this.lh&&this.start();if(this.lh){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),a=.001*(b-this.Mi);this.Mi=b;this.elapsedTime+=a}this.lh=!1}};c.Jb=function(){};
c.Jb.prototype={constructor:c.Jb,apply:function(a){a.addEventListener=c.Jb.prototype.addEventListener;a.Xg=c.Jb.prototype.Xg;a.removeEventListener=c.Jb.prototype.removeEventListener;a.dispatchEvent=c.Jb.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this.jd&&(this.jd={});var d=this.jd;void 0===d[a]&&(d[a]=[]);-1===d[a].indexOf(b)&&d[a].push(b)},Xg:function(a,b){if(void 0===this.jd)return!1;var d=this.jd;return void 0!==d[a]&&-1!==d[a].indexOf(b)?!0:!1},removeEventListener:function(a,
b){if(void 0!==this.jd){var d=this.jd[a];if(void 0!==d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this.jd){var b=this.jd[a.type];if(void 0!==b){a.target=this;for(var d=[],e=b.length,f=0;f<e;f++)d[f]=b[f];for(f=0;f<e;f++)d[f].call(this,a)}}}};(function(a){a.Oj=function(b,d,e,f){this.$o=new a.xg(b,d);this.Va=e||0;this.Ra=f||Infinity};a.Oj.prototype={constructor:a.Oj,precision:1E-4,set:function(a,d){this.$o.set(a,d)}}})(c);
c.u=function(){this.id=c.ym++;this.Wb=c.Math.Df();this.name="";this.parent=void 0;this.children=[];this.Ic=c.u.gm.clone();var a=new c.b,b=new c.Jc,d=new c.Nb,e=new c.b(1,1,1);b.Ni(function(){if(!1===b instanceof c.Jc)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var a=Math.cos(b.m/2),e=Math.cos(b.n/2),h=Math.cos(b.o/2),l=Math.sin(b.m/2),k=Math.sin(b.n/2),m=Math.sin(b.o/2);"XYZ"===b.ee?(d.m=l*e*h+a*k*m,d.n=a*k*h-l*e*m,d.o=a*e*m+l*k*h,
d.J=a*e*h-l*k*m):"YXZ"===b.ee?(d.m=l*e*h+a*k*m,d.n=a*k*h-l*e*m,d.o=a*e*m-l*k*h,d.J=a*e*h+l*k*m):"ZXY"===b.ee?(d.m=l*e*h-a*k*m,d.n=a*k*h+l*e*m,d.o=a*e*m+l*k*h,d.J=a*e*h-l*k*m):"ZYX"===b.ee?(d.m=l*e*h-a*k*m,d.n=a*k*h+l*e*m,d.o=a*e*m-l*k*h,d.J=a*e*h+l*k*m):"YZX"===b.ee?(d.m=l*e*h+a*k*m,d.n=a*k*h+l*e*m,d.o=a*e*m-l*k*h,d.J=a*e*h-l*k*m):"XZY"===b.ee&&(d.m=l*e*h-a*k*m,d.n=a*k*h-l*e*m,d.o=a*e*m+l*k*h,d.J=a*e*h+l*k*m)});d.Ni(function(){var a,e=c.Math.tc,h=d.x*d.x,l=d.y*d.y,k=d.z*d.z,m=d.f*d.f;a=b.hb;"XYZ"===
a?(b.m=Math.atan2(2*(d.x*d.f-d.y*d.z),m-h-l+k),b.n=Math.asin(e(2*(d.x*d.z+d.y*d.f),-1,1)),b.o=Math.atan2(2*(d.z*d.f-d.x*d.y),m+h-l-k)):"YXZ"===a?(b.m=Math.asin(e(2*(d.x*d.f-d.y*d.z),-1,1)),b.n=Math.atan2(2*(d.x*d.z+d.y*d.f),m-h-l+k),b.o=Math.atan2(2*(d.x*d.y+d.z*d.f),m-h+l-k)):"ZXY"===a?(b.m=Math.asin(e(2*(d.x*d.f+d.y*d.z),-1,1)),b.n=Math.atan2(2*(d.y*d.f-d.z*d.x),m-h-l+k),b.o=Math.atan2(2*(d.z*d.f-d.x*d.y),m-h+l-k)):"ZYX"===a?(b.m=Math.atan2(2*(d.x*d.f+d.z*d.y),m-h-l+k),b.n=Math.asin(e(2*(d.y*d.f-
d.x*d.z),-1,1)),b.o=Math.atan2(2*(d.x*d.y+d.z*d.f),m+h-l-k)):"YZX"===a?(b.m=Math.atan2(2*(d.x*d.f-d.z*d.y),m-h+l-k),b.n=Math.atan2(2*(d.y*d.f-d.x*d.z),m+h-l-k),b.o=Math.asin(e(2*(d.x*d.y+d.z*d.f),-1,1))):"XZY"===a?(b.m=Math.atan2(2*(d.x*d.f+d.y*d.z),m-h+l-k),b.n=Math.atan2(2*(d.x*d.z+d.y*d.f),m+h-l-k),b.o=Math.asin(e(2*(d.z*d.f-d.x*d.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+a);b.hb=a});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},ab:{enumerable:!0,value:d},scale:{enumerable:!0,value:e}});this.We=null;this.wl=!0;this.Ha=new c.R;this.l=new c.R;this.la=!0;this.fc=!1;this.visible=!0;this.kh=this.qb=!1;this.Oe=!0;this.kg={}};c.u.gm=new c.b(0,1,0);
c.u.prototype={constructor:c.u,Pc:function(a){Wb(this.Ha,a,this.Ha);this.Ha.Pg(this.position,this.ab,this.scale)},wp:function(){var a=new c.b;return function(b,d){var e=a.c(b),f=this.ab,g=e.x,h=e.y,l=e.z,k=f.x,m=f.y,q=f.z,f=f.f,p=f*g+m*l-q*h,r=f*h+q*g-k*l,s=f*l+k*h-m*g,g=-k*g-m*h-q*l;e.x=p*f+g*-k+r*-q-s*-m;e.y=r*f+g*-m+s*-k-p*-q;e.z=s*f+g*-q+p*-m-r*-k;this.position.add(a.F(d));return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");
return this.wp(b,a)},kb:function(){var a=new c.R;return function(b){a.kb(b,this.position,this.Ic);this.ab.mh(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add:",a,"can't be added as a child of itself."),this;if(a instanceof c.u){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==
b&&b instanceof c.ye&&Pc(b,a)}else console.error("THREE.Object3D.add:",a,"is not an instance of THREE.Object3D.");return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof c.ye&&Qc(b,a)}},xd:function(){jc(this.Ha,this.position,this.ab,this.scale);this.fc=!0},pa:function(a){!0===
this.la&&this.xd();if(!0===this.fc||!0===a)void 0===this.parent?this.l.c(this.Ha):Wb(this.l,this.parent.l,this.Ha),this.fc=!1,a=!0;for(var b=0,d=this.children.length;b<d;b++)this.children[b].pa(a)},clone:function(a,b){void 0===a&&(a=new c.u);void 0===b&&(b=!0);a.name=this.name;a.Ic.c(this.Ic);a.position.c(this.position);a.ab.c(this.ab);a.scale.c(this.scale);a.We=this.We;a.wl=this.wl;a.Ha.c(this.Ha);a.l.c(this.l);a.la=this.la;a.fc=this.fc;a.visible=this.visible;a.qb=this.qb;a.kh=this.kh;a.Oe=this.Oe;
a.kg=JSON.parse(JSON.stringify(this.kg));if(!0===b)for(var d=0;d<this.children.length;d++)a.add(this.children[d].clone());return a}};function Rc(a,b){if(!1!==a.visible){b(a);for(var d=0,e=a.children.length;d<e;d++)Rc(a.children[d],b)}}function Rb(a,b){b(a);for(var d=0,e=a.children.length;d<e;d++)Rb(a.children[d],b)}c.Jb.prototype.apply(c.u.prototype);c.ym=0;
c.Vh=function(){function a(){if(p===s){var a=new c.Kd;r.push(a);s++;p++;return a}return r[p++]}function b(){if(t===x){var a=new c.Pj;w.push(a);x++;t++;return a}return w[t++]}function d(){if(D===B){var a=new c.Qj;z.push(a);B++;D++;return a}return z[D++]}function e(){if(K===C){var a=new c.Rj;y.push(a);C++;K++;return a}return y[K++]}function f(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function g(a,b){var d=0,e=1,f=a.z+a.f,g=b.z+b.f,h=-a.z+a.f,k=-b.z+b.f;if(0<=f&&0<=g&&0<=h&&0<=k)return!0;
if(0>f&&0>g||0>h&&0>k)return!1;0>f?d=Math.max(d,f/(f-g)):0>g&&(e=Math.min(e,f/(f-g)));0>h?d=Math.max(d,h/(h-k)):0>k&&(e=Math.min(e,h/(h-k)));if(e<d)return!1;a.Cc(b,d);b.Cc(a,1-e);return!0}var h,l,k=[],m=0,q,p,r=[],s=0,u,t,w=[],x=0,v,D,z=[],B=0,G,K,y=[],C=0,L={Ja:[],Tc:[],elements:[]},R=new c.b,ca=new c.b,Q=new c.b,E=new c.b,A=new c.Pb,F=new c.Ib(new c.b(-1,-1,-1),new c.b(1,1,1)),J=new c.Ib,I=Array(3),$=new c.R,O=new c.R,T,S=new c.R,aa=new c.ub,P=new c.Ed,W=new c.Pb,ba=new c.Pb;this.Ol=function(){var a=
new c.R;return function(b,d){a.Cb(d.xa);Wb(O,d.l,a);return Hb(b,O)}}();var Z=new function(){function e(a,b,d){return 0>(d.k.x-a.k.x)*(b.k.y-a.k.y)-(d.k.y-a.k.y)*(b.k.x-a.k.x)}function f(a,b,d){if(!0===a.visible||!0===b.visible||!0===d.visible)return!0;I[0]=a.k;I[1]=b.k;I[2]=d.k;return F.Kf(J.Uc(I))}function g(a){var b=a.Ve,d=a.k;b.c(a.position).Q(T);d.c(b).Q(O);b=1/d.f;d.x*=b;d.y*=b;d.z*=b;a.visible=-1<=d.x&&1>=d.x&&-1<=d.y&&1>=d.y&&-1<=d.z&&1>=d.z}var h=[],k=[],l=null,m=null,p=new c.ub;return{fp:function(a){l=
a;m=l.r;Sb(p,l.l);h.length=0;k.length=0},Qi:g,Mn:f,Ln:e,Si:function(b,d,e){q=a();q.position.set(b,d,e);g(q)},Xo:function(a,b,d){h.push(a,b,d)},Yo:function(a,b){k.push(a,b)},ql:function(a,b){var e=r[a],f=r[b];v=d();v.id=l.id;v.X.c(e);v.aa.c(f);v.z=(e.k.z+f.k.z)/2;v.r=l.r;L.elements.push(v)},Ri:function(a,d,g){var q=r[a],s=r[d],t=r[g];if(!1!==f(q,s,t)&&(m.Fb===c.Dd||!0===e(q,s,t))){u=b();u.id=l.id;u.X.c(q);u.aa.c(s);u.Xb.c(t);u.z=(q.k.z+s.k.z+t.k.z)/3;for(q=0;3>q;q++)s=3*arguments[q],t=u.zd[q],t.set(h[s],
h[s+1],h[s+2]),Qb(t,p).normalize(),s=2*arguments[q],u.yd[q].set(k[s],k[s+1]);u.Rl=3;u.r=l.r;L.elements.push(u)}}}};this.Wo=function(q,s,x,w){K=D=t=0;L.elements.length=0;!0===q.Ge&&q.pa();void 0===s.parent&&s.pa();$.c(s.Ca.Cb(s.l));Wb(O,s.xa,$);Cc(P,O);l=0;L.Ja.length=0;L.Tc.length=0;Rc(q,function(a){if(a instanceof c.qa)L.Tc.push(a);else if(a instanceof c.V||a instanceof c.T||a instanceof c.Mc)if(!1===a.Oe||!0===P.Yg(a)){if(l===m){var b=new c.Jm;k.push(b);m++;l++;h=b}else h=k[l++];h.id=a.id;h.object=
a;null!==a.We?h.z=a.We:(lb(E,a.l),Hb(E,O),h.z=E.z);L.Ja.push(h)}});!0===x&&L.Ja.sort(f);q=0;for(x=L.Ja.length;q<x;q++){var y=L.Ja[q].object,z=y.j;Z.fp(y);T=y.l;p=0;if(y instanceof c.V)if(z instanceof c.ta){var B=z.attributes,y=z.Tb;if(void 0!==B.position){for(var C=B.position.d,z=0,I=C.length;z<I;z+=3)Z.Si(C[z],C[z+1],C[z+2]);if(void 0!==B.D)for(var J=B.D.d,z=0,I=J.length;z<I;z+=3)Z.Xo(J[z],J[z+1],J[z+2]);if(void 0!==B.mb)for(J=B.mb.d,z=0,I=J.length;z<I;z+=2)Z.Yo(J[z],J[z+1]);if(void 0!==B.index)if(B=
B.index.d,0<y.length)for(q=0;q<y.length;q++)for(I=y[q],C=I.index,z=I.start,I=I.start+I.count;z<I;z+=3)Z.Ri(B[z]+C,B[z+1]+C,B[z+2]+C);else for(z=0,I=B.length;z<I;z+=3)Z.Ri(B[z],B[z+1],B[z+2]);else for(z=0,I=C.length/3;z<I;z+=3)Z.Ri(z,z+1,z+2)}}else{if(z instanceof c.s){var F=z.e,I=z.h,B=z.A[0];Sb(aa,T);for(var C=y.r instanceof c.dd,J=!0===C?y.r:null,ya=0,ma=F.length;ya<ma;ya++){var M=F[ya];Z.Si(M.x,M.y,M.z)}F=0;for(ya=I.length;F<ya;F++){var ma=I[F],Ja=!0===C?J.Ta[ma.Eb]:y.r;if(void 0!==Ja){var Ca=
Ja.Fb,M=r[ma.N],na=r[ma.i],Ha=r[ma.O];if(!0===Ja.w){var oa=z.w,ja=y.Ua,ra=M.position,Pa=na.position,Na=Ha.position;R.set(0,0,0);ca.set(0,0,0);Q.set(0,0,0);for(var Fa=0,Xa=oa.length;Fa<Xa;Fa++){var Oa=ja[Fa];if(0!==Oa){var ea=oa[Fa].e;R.x+=(ea[ma.N].x-ra.x)*Oa;R.y+=(ea[ma.N].y-ra.y)*Oa;R.z+=(ea[ma.N].z-ra.z)*Oa;ca.x+=(ea[ma.i].x-Pa.x)*Oa;ca.y+=(ea[ma.i].y-Pa.y)*Oa;ca.z+=(ea[ma.i].z-Pa.z)*Oa;Q.x+=(ea[ma.O].x-Na.x)*Oa;Q.y+=(ea[ma.O].y-Na.y)*Oa;Q.z+=(ea[ma.O].z-Na.z)*Oa}}M.position.add(R);na.position.add(ca);
Ha.position.add(Q);Z.Qi(M);Z.Qi(na);Z.Qi(Ha)}if(!1!==Z.Mn(M,na,Ha)){oa=Z.Ln(M,na,Ha);if(Ca!==c.Dd){if(Ca===c.vj&&!1===oa)continue;if(Ca===c.me&&!0===oa)continue}u=b();u.id=y.id;u.X.c(M);u.aa.c(na);u.Xb.c(Ha);u.Qf.c(ma.D);!1!==oa||Ca!==c.me&&Ca!==c.Dd||u.Qf.be();Qb(u.Qf,aa).normalize();ja=ma.ka;ra=0;for(Pa=Math.min(ja.length,3);ra<Pa;ra++)Na=u.zd[ra],Na.c(ja[ra]),!1!==oa||Ca!==c.me&&Ca!==c.Dd||Na.be(),Qb(Na,aa).normalize();u.Rl=ja.length;Ca=B[F];if(void 0!==Ca)for(oa=0;3>oa;oa++)u.yd[oa].c(Ca[oa]);
u.color=ma.color;u.r=Ja;u.z=(M.k.z+na.k.z+Ha.k.z)/3;L.elements.push(u)}}}}}else if(y instanceof c.T)if(z instanceof c.ta){if(B=z.attributes,void 0!==B.position){C=B.position.d;z=0;for(I=C.length;z<I;z+=3)Z.Si(C[z],C[z+1],C[z+2]);if(void 0!==B.index)for(B=B.index.d,z=0,I=B.length;z<I;z+=2)Z.ql(B[z],B[z+1]);else for(B=y.type===c.Kb?2:1,z=0,I=C.length/3-1;z<I;z+=B)Z.ql(z,z+1)}}else{if(z instanceof c.s&&(Wb(S,O,T),F=y.j.e,0!==F.length))for(M=a(),M.k.c(F[0]).Q(S),B=y.type===c.Kb?2:1,ya=1,ma=F.length;ya<
ma;ya++)M=a(),M.k.c(F[ya]).Q(S),0<(ya+1)%B||(na=r[p-2],W.c(M.k),ba.c(na.k),!0===g(W,ba)&&(W.F(1/W.f),ba.F(1/ba.f),v=d(),v.id=y.id,v.X.k.c(W),v.aa.k.c(ba),v.z=Math.max(W.z,ba.z),v.r=y.r,y.r.q===c.Md&&(v.q[0].c(y.j.ha[ya]),v.q[1].c(y.j.ha[ya-1])),L.elements.push(v)))}else y instanceof c.Mc&&(A.set(T.elements[12],T.elements[13],T.elements[14],1),A.Q(O),z=1/A.f,A.z*=z,-1<=A.z&&1>=A.z&&(G=e(),G.id=y.id,G.x=A.x*z,G.y=A.y*z,G.z=A.z,G.object=y,G.rotation=y.rotation,G.scale.x=y.scale.x*Math.abs(G.x-(A.x+s.xa.elements[0])/
(A.f+s.xa.elements[12])),G.scale.y=y.scale.y*Math.abs(G.y-(A.y+s.xa.elements[5])/(A.f+s.xa.elements[13])),G.r=y.r,L.elements.push(G)))}!0===w&&L.elements.sort(f);return L}};c.L=function(a,b,d,e,f,g){this.N=a;this.i=b;this.O=d;this.D=e instanceof c.b?e:new c.b;this.ka=e instanceof Array?e:[];this.color=f instanceof c.p?f:new c.p;this.q=f instanceof Array?f:[];this.Ad=[];this.Eb=void 0!==g?g:0};
c.L.prototype={constructor:c.L,clone:function(){var a=new c.L(this.N,this.i,this.O);a.D.c(this.D);a.color.c(this.color);a.Eb=this.Eb;for(var b=0,d=this.ka.length;b<d;b++)a.ka[b]=this.ka[b].clone();b=0;for(d=this.q.length;b<d;b++)a.q[b]=this.q[b].clone();b=0;for(d=this.Ad.length;b<d;b++)a.Ad[b]=this.Ad[b].clone();return a}};c.Tp=function(a,b,d,e,f,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new c.L(a,b,d,f,g,h)};
c.Ma=function(a,b){this.d=a;this.Sc=b};c.Ma.prototype={constructor:c.Ma,get length(){return this.d.length},set:function(a){this.d.set(a);return this},ag:function(a,b){this.d[a*this.Sc+1]=b;return this}};c.aq=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.qq=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};
c.rq=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.Zp=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.oq=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};
c.$p=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.pq=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.km=function(a){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,3)};
c.Up=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new c.Ma(a,b)};c.ta=function(){this.id=c.wj++;this.Wb=c.Math.Df();this.name="";this.attributes={};this.Tb=this.Yn=[];this.Pa=this.Oa=null};
c.ta.prototype={constructor:c.ta,getAttribute:function(a){return this.attributes[a]},Pc:function(a){var b=this.attributes.position;void 0!==b&&(a.ii(b.d),b.G=!0);b=this.attributes.D;void 0!==b&&(Sb(new c.ub,a).ii(b.d),b.G=!0)},uf:function(){null===this.Oa&&(this.Oa=new c.Ib);var a=this.attributes.position.d;if(a){var b=this.Oa;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var d=3,e=a.length;d<e;d+=3){var f=a[d],g=a[d+1],h=a[d+2];f<b.min.x?b.min.x=f:f>b.max.x&&(b.max.x=
f);g<b.min.y?b.min.y=g:g>b.max.y&&(b.max.y=g);h<b.min.z?b.min.z=h:h>b.max.z&&(b.max.z=h)}}if(void 0===a||0===a.length)this.Oa.min.set(0,0,0),this.Oa.max.set(0,0,0);(isNaN(this.Oa.min.x)||isNaN(this.Oa.min.y)||isNaN(this.Oa.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},Yd:function(){var a=new c.Ib,b=new c.b;return function(){null===this.Pa&&(this.Pa=new c.Ob);var d=this.attributes.position.d;
if(d){a.ud();for(var e=this.Pa.fa,f=0,g=d.length;f<g;f+=3)b.set(d[f],d[f+1],d[f+2]),a.Bf(b);a.fa(e);for(var h=0,f=0,g=d.length;f<g;f+=3)b.set(d[f],d[f+1],d[f+2]),h=Math.max(h,e.Zd(b));this.Pa.oa=Math.sqrt(h);isNaN(this.Pa.oa)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),eb:function(){},vf:function(){if(this.attributes.position){var a,b,d,e;a=this.attributes.position.d.length;if(void 0===this.attributes.normal)this.attributes.normal=
{Sc:3,d:new Float32Array(a)};else for(a=0,b=this.attributes.normal.d.length;a<b;a++)this.attributes.normal.d[a]=0;var f=this.attributes.position.d,g=this.attributes.normal.d,h,l,k,m,q,p,r=new c.b,s=new c.b,u=new c.b,t=new c.b,w=new c.b;if(this.attributes.index){var x=this.attributes.index.d,v=0<this.Tb.length?this.Tb:[{start:0,count:x.length,index:0}];d=0;for(e=v.length;d<e;++d){b=v[d].start;h=v[d].count;var D=v[d].index;a=b;for(b+=h;a<b;a+=3)h=D+x[a],l=D+x[a+1],k=D+x[a+2],m=f[3*h],q=f[3*h+1],p=f[3*
h+2],r.set(m,q,p),m=f[3*l],q=f[3*l+1],p=f[3*l+2],s.set(m,q,p),m=f[3*k],q=f[3*k+1],p=f[3*k+2],u.set(m,q,p),t.ba(u,s),w.ba(r,s),Cb(t,w),g[3*h]+=t.x,g[3*h+1]+=t.y,g[3*h+2]+=t.z,g[3*l]+=t.x,g[3*l+1]+=t.y,g[3*l+2]+=t.z,g[3*k]+=t.x,g[3*k+1]+=t.y,g[3*k+2]+=t.z}}else for(a=0,b=f.length;a<b;a+=9)m=f[a],q=f[a+1],p=f[a+2],r.set(m,q,p),m=f[a+3],q=f[a+4],p=f[a+5],s.set(m,q,p),m=f[a+6],q=f[a+7],p=f[a+8],u.set(m,q,p),t.ba(u,s),w.ba(r,s),Cb(t,w),g[a]=t.x,g[a+1]=t.y,g[a+2]=t.z,g[a+3]=t.x,g[a+4]=t.y,g[a+5]=t.z,g[a+
6]=t.x,g[a+7]=t.y,g[a+8]=t.z;a=this.attributes.normal.d;d=0;for(e=a.length;d<e;d+=3)f=a[d],g=a[d+1],r=a[d+2],f=1/Math.sqrt(f*f+g*g+r*r),a[d]*=f,a[d+1]*=f,a[d+2]*=f;this.Sf=!0}},Bk:function(){function a(a,b,d){p=e[3*a];r=e[3*a+1];s=e[3*a+2];u=e[3*b];t=e[3*b+1];w=e[3*b+2];x=e[3*d];v=e[3*d+1];D=e[3*d+2];z=g[2*a];B=g[2*a+1];G=g[2*b];K=g[2*b+1];y=g[2*d];C=g[2*d+1];L=u-p;R=x-p;ca=t-r;Q=v-r;E=w-s;A=D-s;F=G-z;J=y-z;I=K-B;$=C-B;O=1/(F*$-J*I);T.set(($*L-I*R)*O,($*ca-I*Q)*O,($*E-I*A)*O);S.set((F*R-J*L)*O,(F*
Q-J*ca)*O,(F*A-J*E)*O);k[a].add(T);k[b].add(T);k[d].add(T);m[a].add(S);m[b].add(S);m[d].add(S)}function b(a){Ea.x=f[3*a];Ea.y=f[3*a+1];Ea.z=f[3*a+2];sa.c(Ea);Ta=k[a];la.c(Ta);la.sub(Ea.F(Ea.va(Ta))).normalize();wb(Sa,sa,Ta);db=Sa.va(m[a]);qa=0>db?-1:1;l[4*a]=la.x;l[4*a+1]=la.y;l[4*a+2]=la.z;l[4*a+3]=qa}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
else{var d=this.attributes.index.d,e=this.attributes.position.d,f=this.attributes.normal.d,g=this.attributes.uv.d,h=e.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent={Sc:4,d:new Float32Array(4*h)});for(var l=this.attributes.tangent.d,k=[],m=[],q=0;q<h;q++)k[q]=new c.b,m[q]=new c.b;var p,r,s,u,t,w,x,v,D,z,B,G,K,y,C,L,R,ca,Q,E,A,F,J,I,$,O,T=new c.b,S=new c.b,aa,P,W,ba,Z,ua=this.Tb,q=0;for(P=ua.length;q<P;++q){aa=ua[q].start;W=ua[q].count;var Aa=ua[q].index,h=aa;for(aa+=W;h<aa;h+=
3)W=Aa+d[h],ba=Aa+d[h+1],Z=Aa+d[h+2],a(W,ba,Z)}var la=new c.b,Sa=new c.b,Ea=new c.b,sa=new c.b,qa,Ta,db,q=0;for(P=ua.length;q<P;++q)for(aa=ua[q].start,W=ua[q].count,Aa=ua[q].index,h=aa,aa+=W;h<aa;h+=3)W=Aa+d[h],ba=Aa+d[h+1],Z=Aa+d[h+2],b(W),b(ba),b(Z)}},Dc:function(){console.log("BufferGeometry.merge(): TODO")},clone:function(){var a=new c.ta,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],d;for(d in this.attributes){for(var e=this.attributes[d],
f=e.d,g={Sc:e.Sc,d:null},e=0,h=b.length;e<h;e++){var l=b[e];if(f instanceof l){g.d=new l(f);break}}a.attributes[d]=g}e=0;for(h=this.Tb.length;e<h;e++)b=this.Tb[e],a.Tb.push({start:b.start,index:b.index,count:b.count});return a}};function Sc(a,b,d){!1===d instanceof c.Ma?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),a.attributes[b]={d:d,Sc:void 0}):a.attributes[b]=d}c.Jb.prototype.apply(c.ta.prototype);
c.s=function(){this.id=c.wj++;this.Wb=c.Math.Df();this.name="";this.e=[];this.ha=[];this.h=[];this.A=[[]];this.w=[];this.vd=[];this.Ia=[];this.Vb=[];this.Gb=[];this.zo=[];this.Pa=this.Oa=null;this.Fi=!1;this.Zn=!0;this.Vg=this.qi=this.bh=this.Ab=this.xh=this.Sf=this.Bh=this.Qg=this.Ya=!1};
c.s.prototype={constructor:c.s,Pc:function(a){for(var b=Sb(new c.ub,a),d=0,e=this.e.length;d<e;d++)this.e[d].Q(a);d=0;for(e=this.h.length;d<e;d++){a=this.h[d];Qb(a.D,b).normalize();for(var f=0,g=a.ka.length;f<g;f++)Qb(a.ka[f],b).normalize()}this.Oa instanceof c.Ib&&this.uf();this.Pa instanceof c.Ob&&this.Yd()},fa:function(){this.uf();var a=new c.b;a.sc(this.Oa.min,this.Oa.max);a.F(-.5);this.Pc(Bc(new c.R,a.x,a.y,a.z));this.uf();return a},eb:function(){for(var a=new c.b,b=new c.b,d=0,e=this.h.length;d<
e;d++){var f=this.h[d],g=this.e[f.N],h=this.e[f.i];a.ba(this.e[f.O],h);b.ba(g,h);Cb(a,b);a.normalize();f.D.c(a)}},vf:function(a){var b,d,e;e=Array(this.e.length);b=0;for(d=this.e.length;b<d;b++)e[b]=new c.b;if(a){var f,g,h,l=new c.b,k=new c.b;a=0;for(b=this.h.length;a<b;a++)d=this.h[a],f=this.e[d.N],g=this.e[d.i],h=this.e[d.O],l.ba(h,g),k.ba(f,g),Cb(l,k),e[d.N].add(l),e[d.i].add(l),e[d.O].add(l)}else for(a=0,b=this.h.length;a<b;a++)d=this.h[a],e[d.N].add(d.D),e[d.i].add(d.D),e[d.O].add(d.D);b=0;for(d=
this.e.length;b<d;b++)e[b].normalize();a=0;for(b=this.h.length;a<b;a++)d=this.h[a],d.ka[0]=e[d.N].clone(),d.ka[1]=e[d.i].clone(),d.ka[2]=e[d.O].clone()},Bk:function(){var a,b,d,e,f,g,h,l,k,m,q,p,r,s,u,t,w,x=[],v=[];d=new c.b;var D=new c.b,z=new c.b,B=new c.b,G=new c.b;a=0;for(b=this.e.length;a<b;a++)x[a]=new c.b,v[a]=new c.b;a=0;for(b=this.h.length;a<b;a++)f=this.h[a],g=this.A[0][a],e=f.N,w=f.i,f=f.O,h=this.e[e],l=this.e[w],k=this.e[f],m=g[0],q=g[1],p=g[2],g=l.x-h.x,r=k.x-h.x,s=l.y-h.y,u=k.y-h.y,
l=l.z-h.z,h=k.z-h.z,k=q.x-m.x,t=p.x-m.x,q=q.y-m.y,m=p.y-m.y,p=1/(k*m-t*q),d.set((m*g-q*r)*p,(m*s-q*u)*p,(m*l-q*h)*p),D.set((k*r-t*g)*p,(k*u-t*s)*p,(k*h-t*l)*p),x[e].add(d),x[w].add(d),x[f].add(d),v[e].add(D),v[w].add(D),v[f].add(D);D=["a","b","c","d"];a=0;for(b=this.h.length;a<b;a++)for(f=this.h[a],d=0;d<Math.min(f.ka.length,3);d++)G.c(f.ka[d]),e=f[D[d]],w=x[e],z.c(w),z.sub(G.F(G.va(w))).normalize(),wb(B,f.ka[d],w),e=B.va(v[e]),e=0>e?-1:1,f.Ad[d]=new c.Pb(z.x,z.y,z.z,e);this.Fi=!0},uf:function(){null===
this.Oa&&(this.Oa=new c.Ib);this.Oa.Uc(this.e)},Yd:function(){null===this.Pa&&(this.Pa=new c.Ob);this.Pa.Uc(this.e)},Dc:function(a,b,d){if(!1===a instanceof c.s)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var e,f=this.e.length,g=this.e,h=a.e,l=this.h,k=a.h,m=this.A[0];a=a.A[0];void 0===d&&(d=0);void 0!==b&&(e=Sb(new c.ub,b));for(var q=0,p=h.length;q<p;q++){var r=h[q].clone();void 0!==b&&r.Q(b);g.push(r)}q=0;for(p=k.length;q<p;q++){var h=k[q],s,u=h.ka,
t=h.q,r=new c.L(h.N+f,h.i+f,h.O+f);r.D.c(h.D);void 0!==e&&Qb(r.D,e).normalize();b=0;for(g=u.length;b<g;b++)s=u[b].clone(),void 0!==e&&Qb(s,e).normalize(),r.ka.push(s);r.color.c(h.color);b=0;for(g=t.length;b<g;b++)s=t[b],r.q.push(s.clone());r.Eb=h.Eb+d;l.push(r)}q=0;for(p=a.length;q<p;q++)if(d=a[q],e=[],void 0!==d){b=0;for(g=d.length;b<g;b++)e.push(new c.g(d[b].x,d[b].y));m.push(e)}}},Ao:function(){var a=0;return function(b,d){var e,f,g,h,l={},k,m=this.w.length,q=this.Ia.length;this.Ac={};this.Bc=
[];e=0;for(f=this.h.length;e<f;e++)g=this.h[e],g=b?g.Eb:0,g in l||(l[g]={hash:g,counter:0}),h=l[g].hash+"_"+l[g].ti,h in this.Ac||(k={id:a++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:m,numMorphNormals:q},this.Ac[h]=k,this.Bc.push(k)),this.Ac[h].e+3>d&&(l[g].ti+=1,h=l[g].hash+"_"+l[g].ti,h in this.Ac||(k={id:a++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:m,numMorphNormals:q},this.Ac[h]=k,this.Bc.push(k))),this.Ac[h].Ik.push(e),this.Ac[h].e+=3}}(),clone:function(){for(var a=new c.s,
b=this.e,d=0,e=b.length;d<e;d++)a.e.push(b[d].clone());b=this.h;d=0;for(e=b.length;d<e;d++)a.h.push(b[d].clone());b=this.A[0];d=0;for(e=b.length;d<e;d++){for(var f=b[d],g=[],h=0,l=f.length;h<l;h++)g.push(new c.g(f[h].x,f[h].y));a.A[0].push(g)}return a}};
function Tc(a){var b={},d=[],e=[],f,g=Math.pow(10,4),h,l;h=0;for(l=a.e.length;h<l;h++)f=a.e[h],f=Math.round(f.x*g)+"_"+Math.round(f.y*g)+"_"+Math.round(f.z*g),void 0===b[f]?(b[f]=h,d.push(a.e[h]),e[h]=d.length-1):e[h]=e[b[f]];b=[];h=0;for(l=a.h.length;h<l;h++)for(g=a.h[h],g.N=e[g.N],g.i=e[g.i],g.O=e[g.O],g=[g.N,g.i,g.O],f=0;3>f;f++)if(g[f]==g[(f+1)%3]){b.push(h);break}for(h=b.length-1;0<=h;h--)for(g=b[h],a.h.splice(g,1),e=0,l=a.A.length;e<l;e++)a.A[e].splice(g,1);a.e=d}c.Jb.prototype.apply(c.s.prototype);
c.wj=0;c.fb=function(){c.u.call(this);this.Ca=new c.R;this.xa=new c.R};c.fb.prototype=Object.create(c.u.prototype);c.fb.prototype.kb=function(){var a=new c.R;return function(b){a.kb(this.position,b,this.Ic);this.ab.mh(a)}}();c.fb.prototype.clone=function(a){void 0===a&&(a=new c.fb);c.u.prototype.clone.call(this,a);a.Ca.c(this.Ca);a.xa.c(this.xa);return a};
c.am=function(a,b,d){c.u.call(this);var e=new c.Mb(90,1,a,b);e.Ic.set(0,-1,0);e.kb(new c.b(1,0,0));this.add(e);e=new c.Mb(90,1,a,b);e.Ic.set(0,-1,0);e.kb(new c.b(-1,0,0));this.add(e);e=new c.Mb(90,1,a,b);e.Ic.set(0,0,1);e.kb(new c.b(0,1,0));this.add(e);e=new c.Mb(90,1,a,b);e.Ic.set(0,0,-1);e.kb(new c.b(0,-1,0));this.add(e);e=new c.Mb(90,1,a,b);e.Ic.set(0,-1,0);e.kb(new c.b(0,0,1));this.add(e);a=new c.Mb(90,1,a,b);a.Ic.set(0,-1,0);a.kb(new c.b(0,0,-1));this.add(a);this.vl=new c.Od(d,d,{format:c.Wh,
Sb:c.Fd,rb:c.Fd})};c.am.prototype=Object.create(c.u.prototype);c.we=function(a,b,d,e,f,g){c.fb.call(this);this.left=a;this.right=b;this.top=d;this.bottom=e;this.Va=void 0!==f?f:.1;this.Ra=void 0!==g?g:2E3;this.zh()};c.we.prototype=Object.create(c.fb.prototype);
c.we.prototype.zh=function(){var a=this.left,b=this.right,d=this.top,e=this.bottom,f=this.Va,g=this.Ra,h=this.xa.elements,l=b-a,k=d-e,m=g-f;h[0]=2/l;h[4]=0;h[8]=0;h[12]=-((b+a)/l);h[1]=0;h[5]=2/k;h[9]=0;h[13]=-((d+e)/k);h[2]=0;h[6]=0;h[10]=-2/m;h[14]=-((g+f)/m);h[3]=0;h[7]=0;h[11]=0;h[15]=1};c.we.prototype.clone=function(){var a=new c.we;c.fb.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.Va=this.Va;a.Ra=this.Ra;return a};
c.Mb=function(a,b,d,e){c.fb.call(this);this.Cf=void 0!==a?a:50;this.Kg=void 0!==b?b:1;this.Va=void 0!==d?d:.1;this.Ra=void 0!==e?e:2E3;this.zh()};c.Mb.prototype=Object.create(c.fb.prototype);
c.Mb.prototype.zh=function(){if(this.Ci){var a=this.Ci/this.Jk,b=Math.tan(c.Math.Ek(.5*this.Cf))*this.Va,d=-b,e=a*d,a=Math.abs(a*b-e),d=Math.abs(b-d);ic(this.xa,e+this.x*a/this.Ci,e+(this.x+this.width)*a/this.Ci,b-(this.y+this.height)*d/this.Jk,b-this.y*d/this.Jk,this.Va,this.Ra)}else{var b=this.xa,e=this.Kg,d=this.Va,a=this.Ra,f=d*Math.tan(c.Math.Ek(.5*this.Cf)),g=-f;ic(b,g*e,f*e,g,f,d,a)}};
c.Mb.prototype.clone=function(){var a=new c.Mb;c.fb.prototype.clone.call(this,a);a.Cf=this.Cf;a.Kg=this.Kg;a.Va=this.Va;a.Ra=this.Ra;return a};c.qa=function(a){c.u.call(this);this.color=new c.p(a)};c.qa.prototype=Object.create(c.u.prototype);c.qa.prototype.clone=function(a){void 0===a&&(a=new c.qa);c.u.prototype.clone.call(this,a);a.color.c(this.color);return a};c.le=function(a){c.qa.call(this,a)};c.le.prototype=Object.create(c.qa.prototype);
c.le.prototype.clone=function(){var a=new c.le;c.qa.prototype.clone.call(this,a);return a};c.Wl=function(a,b){c.qa.call(this,a);this.D=new c.b(0,-1,0);this.right=new c.b(1,0,0);this.ga=void 0!==b?b:1;this.height=this.width=1};c.Wl.prototype=Object.create(c.qa.prototype);
c.sb=function(a,b){c.qa.call(this,a);this.position.set(0,1,0);this.target=new c.u;this.ga=void 0!==b?b:1;this.wd=this.qb=!1;this.Yc=50;this.Xc=5E3;this.cg=-500;this.eg=this.dg=500;this.bg=-500;this.Ub=!1;this.Vc=0;this.hc=.5;this.Zc=this.$c=512;this.fg=!1;this.cj=new c.b(0,0,-1E3);this.aj=2;this.ph=[0,0,0];this.dj=[512,512,512];this.bj=[512,512,512];this.rh=[-1,.99,.998];this.qh=[.99,.998,1];this.ie=[];this.$e=this.Wc=this.uh=this.Ze=null};c.sb.prototype=Object.create(c.qa.prototype);
c.sb.prototype.clone=function(){var a=new c.sb;c.qa.prototype.clone.call(this,a);a.target=this.target.clone();a.ga=this.ga;a.qb=this.qb;a.wd=this.wd;a.Yc=this.Yc;a.Xc=this.Xc;a.cg=this.cg;a.dg=this.dg;a.eg=this.eg;a.bg=this.bg;a.Ub=this.Ub;a.Vc=this.Vc;a.hc=this.hc;a.$c=this.$c;a.Zc=this.Zc;a.fg=this.fg;a.cj.c(this.cj);a.aj=this.aj;a.ph=this.ph.slice(0);a.dj=this.dj.slice(0);a.bj=this.bj.slice(0);a.rh=this.rh.slice(0);a.qh=this.qh.slice(0);return a};
c.pe=function(a,b,d){c.qa.call(this,a);this.position.set(0,100,0);this.If=new c.p(b);this.ga=void 0!==d?d:1};c.pe.prototype=Object.create(c.qa.prototype);c.pe.prototype.clone=function(){var a=new c.pe;c.qa.prototype.clone.call(this,a);a.If.c(this.If);a.ga=this.ga;return a};c.fd=function(a,b,d){c.qa.call(this,a);this.ga=void 0!==b?b:1;this.Ba=void 0!==d?d:0};c.fd.prototype=Object.create(c.qa.prototype);
c.fd.prototype.clone=function(){var a=new c.fd;c.qa.prototype.clone.call(this,a);a.ga=this.ga;a.Ba=this.Ba;return a};c.Lc=function(a,b,d,e,f){c.qa.call(this,a);this.position.set(0,1,0);this.target=new c.u;this.ga=void 0!==b?b:1;this.Ba=void 0!==d?d:0;this.mf=void 0!==e?e:Math.PI/3;this.Rg=void 0!==f?f:10;this.wd=this.qb=!1;this.Yc=50;this.Xc=5E3;this.$i=50;this.Ub=!1;this.Vc=0;this.hc=.5;this.Zc=this.$c=512;this.$e=this.Wc=this.uh=this.Ze=null};c.Lc.prototype=Object.create(c.qa.prototype);
c.Lc.prototype.clone=function(){var a=new c.Lc;c.qa.prototype.clone.call(this,a);a.target=this.target.clone();a.ga=this.ga;a.Ba=this.Ba;a.mf=this.mf;a.Rg=this.Rg;a.qb=this.qb;a.wd=this.wd;a.Yc=this.Yc;a.Xc=this.Xc;a.$i=this.$i;a.Ub=this.Ub;a.Vc=this.Vc;a.hc=this.hc;a.$c=this.$c;a.Zc=this.Zc;return a};c.ng=function(){this.files={}};
c.ng.prototype={constructor:c.ng,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
c.te=function(a){a&&(a=document.createElement("div"),a.style.position="absolute",a.style.right="0px",a.style.top="0px",a.style.fontSize="0.8em",a.style.textAlign="left",a.style.background="rgba(0,0,0,0.25)",a.style.color="#fff",a.style.width="120px",a.style.padding="0.5em 0.5em 0.5em 0.5em",a.style.zIndex=1E3,a.innerHTML="Loading ...");this.to=new c.qe};c.te.prototype={constructor:c.te,crossOrigin:void 0};
function Uc(a,b,d){function e(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function f(a,b,f,g,k,l,t){var w=d+f,x,v=c.te.mm.get(w);null!==v?x=v.load(w):(x=new c.ua,v=h.to,v.crossOrigin=h.crossOrigin,v.load(w,function(a){if(!1===c.Math.td(a.width)||!1===c.Math.td(a.height)){var b=e(a.width),d=e(a.height),f=document.createElement("canvas");f.width=b;f.height=d;f.getContext("2d").drawImage(a,0,0,b,d);x.Z=f}else x.Z=a;x.G=!0}));x.kp=f;g&&(x.repeat.set(g[0],g[1]),1!==g[0]&&(x.mc=c.xe),1!==
g[1]&&(x.nc=c.xe));k&&x.offset.set(k[0],k[1]);l&&(f={repeat:c.xe,mirror:c.Aj},void 0!==f[l[0]]&&(x.mc=f[l[0]]),void 0!==f[l[1]]&&(x.nc=f[l[1]]));t&&(x.cc=t);a[b]=x}function g(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var h=a,l="MeshLambertMaterial";a={color:15658734,opacity:1,map:null,Sa:null,lb:null,pb:null,U:!1};if(b.Ka){var k=b.Ka.toLowerCase();"phong"===k?l="MeshPhongMaterial":"basic"===k&&(l="MeshBasicMaterial")}void 0!==b.Na&&void 0!==c[b.Na]&&(a.Na=c[b.Na]);if(void 0!==b.bb||1>b.opacity)a.bb=
b.bb;void 0!==b.xc&&(a.xc=b.xc);void 0!==b.yc&&(a.yc=b.yc);void 0!==b.visible&&(a.visible=b.visible);void 0!==b.Bi&&(a.Fb=c.me);void 0!==b.zi&&(a.Fb=c.Dd);void 0!==b.U&&(a.U=b.U);void 0!==b.q&&("face"===b.q?a.q=c.df:b.q&&(a.q=c.Md));b.Qn?a.color=g(b.Qn):b.em&&(a.color=b.em);b.Sn&&(a.ic=g(b.Sn));b.Pn&&(a.ra=g(b.Pn));b.Rn&&(a.Qa=g(b.Rn));b.yp&&(a.opacity=b.yp);b.lp&&(a.ad=b.lp);b.Eo&&d&&f(a,"map",b.Eo,b.or,b.nr,b.pr,b.mr);b.Fo&&d&&f(a,"lightMap",b.Fo,b.sr,b.rr,b.tr,b.qr);b.Co&&d&&f(a,"bumpMap",b.Co,
b.kr,b.jr,b.lr,b.ir);b.Zk&&d&&f(a,"normalMap",b.Zk,b.xr,b.wr,b.yr,b.vr);b.Go&&d&&f(a,"specularMap",b.Go,b.Br,b.Ar,b.Cr,b.zr);b.Bo&&d&&f(a,"alphaMap",b.Bo,b.gr,b.fr,b.hr,b.er);b.Do&&(a.rf=b.Do);b.Zk?(l=c.yg.normalmap,k=c.ac.clone(l.M),k.tNormal.value=a.lb,b.$k&&k.uNormalScale.value.set(b.$k,b.$k),a.map&&(k.tDiffuse.value=a.map,k.enableDiffuse.value=!0),a.La&&(k.tSpecular.value=a.La,k.enableSpecular.value=!0),a.Sa&&(k.tAO.value=a.Sa,k.enableAO.value=!0),Ma(k.diffuse.value,a.color),Ma(k.specular.value,
a.ic),Ma(k.ambient.value,a.ra),k.shininess.value=a.ad,void 0!==a.opacity&&(k.opacity.value=a.opacity),l=new c.Da({H:l.H,I:l.I,M:k,Tc:!0,K:!0}),a.bb&&(l.bb=!0)):l=new c[l](a);void 0!==b.fm&&(l.name=b.fm);return l}function Vc(a){for(var b=0,d=a.length;b<d;b++)if(a[b]instanceof c.Da)return!0;return!1}function bd(a,b,d){for(var e=[],f=0;f<b.length;++f)e[f]=Uc(a,b[f],d);return e}
c.te.mm={Wg:[],add:function(a,b){this.Wg.push(a,b)},get:function(a){for(var b=0,d=this.Wg.length;b<d;b+=2){var e=this.Wg[b+1];if(this.Wg[b].test(a))return e}return null}};c.ze=function(a){this.sf=new c.ng;this.Db=void 0!==a?a:c.Cd};
c.ze.prototype={constructor:c.ze,load:function(a,b,d,e){var f=this,g=f.sf.get(a);void 0!==g?b&&b(g):(g=new XMLHttpRequest,g.open("GET",a,!0),g.addEventListener("load",function(){f.sf.add(a,this.response);b&&b(this.response);f.Db.Sk(a)},!1),void 0!==d&&g.addEventListener("progress",function(a){d(a)},!1),void 0!==e&&g.addEventListener("error",function(a){e(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(g.responseType=this.responseType),g.send(null),
f.Db.Tk())},Gc:function(a){this.crossOrigin=a}};c.qe=function(a){this.sf=new c.ng;this.Db=void 0!==a?a:c.Cd};
c.qe.prototype={constructor:c.qe,load:function(a,b,d,e){var f=this,g=f.sf.get(a);if(void 0!==g)b(g);else return g=document.createElement("img"),void 0!==b&&g.addEventListener("load",function(){f.sf.add(a,this);b(this);f.Db.Sk(a)},!1),void 0!==d&&g.addEventListener("progress",function(a){d(a)},!1),void 0!==e&&g.addEventListener("error",function(a){e(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),g.src=a,f.Db.Tk(),g},Gc:function(a){this.crossOrigin=a}};
c.sg=function(a){c.te.call(this,a);this.withCredentials=!1};c.sg.prototype=Object.create(c.te.prototype);c.sg.prototype.load=function(a,b,d){d&&"string"===typeof d||(d=a.split("/"),1===d.length?d="./":(d.pop(),d=d.join("/")+"/"));cd(this,this,a,b,d)};
function cd(a,b,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(g.readyState===g.DONE)if(200===g.status||0===g.status)if(g.responseText){var a=JSON.parse(g.responseText);void 0!==a.Jo&&"scene"===a.Jo.type?console.error('THREE.JSONLoader: "'+d+'" seems to be a Scene. Use THREE.SceneLoader instead.'):(a=b.parse(a,f),e(a.j,a.Ta))}else console.error('THREE.JSONLoader: "'+d+'" seems to be unreachable or the file is empty.');else console.error("THREE.JSONLoader: Couldn't load \""+d+'" ('+
g.status+")")};g.open("GET",d,!0);g.withCredentials=a.withCredentials;g.send(null)}
c.sg.prototype.parse=function(a,b){var d=new c.s,e=void 0!==a.scale?1/a.scale:1;(function(b){var e,h,l,k,m,q,p,r,s,u,t,w,x,v=a.h;q=a.e;var D=a.Rf,z=a.ha,B=0;if(void 0!==a.yd){for(e=0;e<a.yd.length;e++)a.yd[e].length&&B++;for(e=0;e<B;e++)d.A[e]=[]}k=0;for(m=q.length;k<m;)e=new c.b,e.x=q[k++]*b,e.y=q[k++]*b,e.z=q[k++]*b,d.e.push(e);k=0;for(m=v.length;k<m;)if(b=v[k++],s=b&1,l=b&2,e=b&8,p=b&16,u=b&32,q=b&64,b&=128,s){s=new c.L;s.N=v[k];s.i=v[k+1];s.O=v[k+3];t=new c.L;t.N=v[k+1];t.i=v[k+2];t.O=v[k+3];
k+=4;l&&(l=v[k++],s.Eb=l,t.Eb=l);l=d.h.length;if(e)for(e=0;e<B;e++)for(w=a.yd[e],d.A[e][l]=[],d.A[e][l+1]=[],h=0;4>h;h++)r=v[k++],x=w[2*r],r=w[2*r+1],x=new c.g(x,r),2!==h&&d.A[e][l].push(x),0!==h&&d.A[e][l+1].push(x);p&&(p=3*v[k++],s.D.set(D[p++],D[p++],D[p]),t.D.c(s.D));if(u)for(e=0;4>e;e++)p=3*v[k++],u=new c.b(D[p++],D[p++],D[p]),2!==e&&s.ka.push(u),0!==e&&t.ka.push(u);q&&(q=v[k++],q=z[q],Ma(s.color,q),Ma(t.color,q));if(b)for(e=0;4>e;e++)q=v[k++],q=z[q],2!==e&&s.q.push(new c.p(q)),0!==e&&t.q.push(new c.p(q));
d.h.push(s);d.h.push(t)}else{s=new c.L;s.N=v[k++];s.i=v[k++];s.O=v[k++];l&&(l=v[k++],s.Eb=l);l=d.h.length;if(e)for(e=0;e<B;e++)for(w=a.yd[e],d.A[e][l]=[],h=0;3>h;h++)r=v[k++],x=w[2*r],r=w[2*r+1],x=new c.g(x,r),d.A[e][l].push(x);p&&(p=3*v[k++],s.D.set(D[p++],D[p++],D[p]));if(u)for(e=0;3>e;e++)p=3*v[k++],u=new c.b(D[p++],D[p++],D[p]),s.ka.push(u);q&&(q=v[k++],Ma(s.color,z[q]));if(b)for(e=0;3>e;e++)q=v[k++],s.q.push(new c.p(z[q]));d.h.push(s)}})(e);(function(){var b=void 0!==a.vo?a.vo:2;if(a.Vb)for(var e=
0,h=a.Vb.length;e<h;e+=b)d.Vb.push(new c.Pb(a.Vb[e],1<b?a.Vb[e+1]:0,2<b?a.Vb[e+2]:0,3<b?a.Vb[e+3]:0));if(a.Gb)for(e=0,h=a.Gb.length;e<h;e+=b)d.Gb.push(new c.Pb(a.Gb[e],1<b?a.Gb[e+1]:0,2<b?a.Gb[e+2]:0,3<b?a.Gb[e+3]:0));d.Y=a.Y;d.Y&&0<d.Y.length&&(d.Vb.length!==d.Gb.length||d.Gb.length!==d.e.length)&&console.warn("When skinning, number of vertices ("+d.e.length+"), skinIndices ("+d.Gb.length+"), and skinWeights ("+d.Vb.length+") should match.");d.un=a.un;d.md=a.md})();(function(b){if(void 0!==a.w){var e,
h,l,k,m,q;e=0;for(h=a.w.length;e<h;e++)for(d.w[e]={},d.w[e].name=a.w[e].name,d.w[e].e=[],m=d.w[e].e,q=a.w[e].e,l=0,k=q.length;l<k;l+=3){var p=new c.b;p.x=q[l]*b;p.y=q[l+1]*b;p.z=q[l+2]*b;m.push(p)}}if(void 0!==a.vd)for(e=0,h=a.vd.length;e<h;e++)for(d.vd[e]={},d.vd[e].name=a.vd[e].name,d.vd[e].ha=[],k=d.vd[e].ha,m=a.vd[e].ha,b=0,l=m.length;b<l;b+=3)q=new c.p(16755200),Ia(q,m[b],m[b+1],m[b+2]),k.push(q)})(e);d.eb();d.Yd();if(void 0===a.Ta||0===a.Ta.length)return{j:d};e=bd(this,a.Ta,b);Vc(e)&&d.Bk();
return{j:d,Ta:e}};c.sm=function(){var a=this,b=0,d=0;this.jl=this.il=void 0;this.Tk=function(){d++};this.Sk=function(e){b++;void 0!==a.jl&&a.jl(e,b,d);b===d&&void 0!==a.il&&a.il()}};c.Cd=new c.sm;c.Eh=function(a){this.Db=void 0!==a?a:c.Cd};
c.Eh.prototype={constructor:c.Eh,load:function(a,b,d,e){var f=this,g=new c.ze;g.Gc(this.crossOrigin);g.load(a,function(a){b(f.parse(JSON.parse(a)))},d,e)},Gc:function(a){this.crossOrigin=a},parse:function(a){var b=new c.ta,d=a.attributes,e;for(e in d){var f=d[e];b.attributes[e]={Sc:f.Sc,d:new self[f.type](f.d)}}d=a.Tb;void 0!==d&&(b.Tb=JSON.parse(JSON.stringify(d)));a=a.Pa;void 0!==a&&(b.Pa=new c.Ob((new c.b).Bb(void 0!==a.fa?a.fa:[0,0,0]),a.oa));return b}};c.Rh=function(a){this.Db=void 0!==a?a:c.Cd};
c.Rh.prototype={constructor:c.Rh,load:function(a,b,d,e){var f=this,g=new c.ze;g.Gc(this.crossOrigin);g.load(a,function(a){b(f.parse(JSON.parse(a)))},d,e)},Gc:function(a){this.crossOrigin=a},parse:function(a){var b=new c[a.type];void 0!==a.color&&Ma(b.color,a.color);void 0!==a.ra&&Ma(b.ra,a.ra);void 0!==a.Qa&&Ma(b.Qa,a.Qa);void 0!==a.ic&&Ma(b.ic,a.ic);void 0!==a.ad&&(b.ad=a.ad);void 0!==a.M&&(b.M=a.M);void 0!==a.I&&(b.I=a.I);void 0!==a.H&&(b.H=a.H);void 0!==a.q&&(b.q=a.q);void 0!==a.Na&&(b.Na=a.Na);
void 0!==a.Fb&&(b.Fb=a.Fb);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.bb&&(b.bb=a.bb);void 0!==a.U&&(b.U=a.U);if(void 0!==a.Ta)for(var d=0,e=a.Ta.length;d<e;d++)b.Ta.push(this.parse(a.Ta[d]));return b}};c.Gj=function(a){this.Db=void 0!==a?a:c.Cd};
c.Gj.prototype={constructor:c.Gj,load:function(a,b,d,e){var f=this,g=new c.ze(f.Db);g.Gc(this.crossOrigin);g.load(a,function(a){b(f.parse(JSON.parse(a)))},d,e)},Gc:function(a){this.crossOrigin=a},parse:function(a){var b=a.Pe,d={};if(void 0!==b)for(var e=new c.sg,f=new c.Eh,g=0,h=b.length;g<h;g++){var l,k=b[g];switch(k.type){case "PlaneGeometry":l=new c.Kj(k.width,k.height,k.Ch,k.Jf);break;case "BoxGeometry":case "CubeGeometry":l=new c.lg(k.width,k.height,k.depth,k.Ch,k.Jf,k.wi);break;case "CircleGeometry":l=
new c.nj(k.oa,k.as);break;case "CylinderGeometry":l=new c.qg(k.Ur,k.Tr,k.height,k.sl,k.Jf,k.Lr);break;case "SphereGeometry":l=new c.zg(k.oa,k.Ch,k.Jf,k.Or,k.Nr,k.gs,k.fs);break;case "IcosahedronGeometry":l=new c.yj(k.oa,k.detail);break;case "TorusGeometry":l=new c.Zj(k.oa,k.zp,k.sl,k.Ap,k.arc);break;case "TorusKnotGeometry":l=new c.$j(k.oa,k.zp,k.sl,k.Ap,k.jh,k.Rr,k.Wq);break;case "BufferGeometry":l=f.parse(k.data);break;case "Geometry":l=e.parse(k.data).j}l.Wb=k.Wb;void 0!==k.name&&(l.name=k.name);
d[k.Wb]=l}b=a.Ta;e={};if(void 0!==b)for(f=new c.Rh,g=0,h=b.length;g<h;g++)l=b[g],k=f.parse(l),k.Wb=l.Wb,void 0!==l.name&&(k.name=l.name),e[l.Wb]=k;return this.ml(a.object,d,e)},ml:function(){var a=new c.R;return function(b,d,e){var f;switch(b.type){case "Scene":f=new c.ye;break;case "PerspectiveCamera":f=new c.Mb(b.Cf,b.Kg,b.Va,b.Ra);break;case "OrthographicCamera":f=new c.we(b.left,b.right,b.top,b.bottom,b.Va,b.Ra);break;case "AmbientLight":f=new c.le(b.color);break;case "DirectionalLight":f=new c.sb(b.color,
b.ga);break;case "PointLight":f=new c.fd(b.color,b.ga,b.Ba);break;case "SpotLight":f=new c.Lc(b.color,b.ga,b.Ba,b.mf,b.Rg);break;case "HemisphereLight":f=new c.pe(b.color,b.If,b.ga);break;case "Mesh":f=d[b.j];var g=e[b.r];void 0===f&&console.error("THREE.ObjectLoader: Undefined geometry "+b.j);void 0===g&&console.error("THREE.ObjectLoader: Undefined material "+b.r);f=new c.V(f,g);break;case "Sprite":g=e[b.r];void 0===g&&console.error("THREE.ObjectLoader: Undefined material "+b.r);f=new c.Mc(g);break;
default:f=new c.u}f.Wb=b.Wb;void 0!==b.name&&(f.name=b.name);void 0!==b.Ha?(a.Bb(b.Ha),a.Pg(f.position,f.ab,f.scale)):(void 0!==b.position&&f.position.Bb(b.position),void 0!==b.rotation&&f.rotation.Bb(b.rotation),void 0!==b.scale&&f.scale.Bb(b.scale));void 0!==b.visible&&(f.visible=b.visible);void 0!==b.kg&&(f.kg=b.kg);if(void 0!==b.children)for(var h in b.children)f.add(this.ml(b.children[h],d,e));return f}}()};c.Yj=function(a){this.Db=void 0!==a?a:c.Cd};
c.Yj.prototype={constructor:c.Yj,load:function(a,b,d,e){var f=new c.qe(this.Db);f.Gc(this.crossOrigin);f.load(a,function(a){a=new c.ua(a);a.G=!0;void 0!==b&&b(a)},d,e)},Gc:function(a){this.crossOrigin=a}};c.P=function(){this.id=c.vm++;this.Wb=c.Math.Df();this.name="";this.Fb=c.vj;this.opacity=1;this.bb=!1;this.Na=c.Uh;this.Xd=c.Wj;this.Wd=c.Hj;this.blendEquation=c.ij;this.yc=this.xc=!0;this.polygonOffset=!1;this.Te=this.Sd=this.Yf=this.Xf=0;this.G=this.visible=!0};
c.P.prototype={constructor:c.P,clone:function(a){void 0===a&&(a=new c.P);a.name=this.name;a.Fb=this.Fb;a.opacity=this.opacity;a.bb=this.bb;a.Na=this.Na;a.Xd=this.Xd;a.Wd=this.Wd;a.blendEquation=this.blendEquation;a.xc=this.xc;a.yc=this.yc;a.polygonOffset=this.polygonOffset;a.Xf=this.Xf;a.Yf=this.Yf;a.Sd=this.Sd;a.Te=this.Te;a.visible=this.visible;return a}};
function dd(a,b){if(void 0!==b)for(var d in b){var e=b[d];if(void 0===e)console.warn("THREE.Material: '"+d+"' parameter is undefined.");else if(d in a){var f=a[d];f instanceof c.p?f.set(e):f instanceof c.b&&e instanceof c.b?f.c(e):a[d]="overdraw"==d?Number(e):e}}}c.Jb.prototype.apply(c.P.prototype);c.vm=0;c.za=function(a){c.P.call(this);this.color=new c.p(16777215);this.jb=1;this.eh=this.dh="round";this.q=c.Hd;this.K=!0;dd(this,a)};c.za.prototype=Object.create(c.P.prototype);
c.za.prototype.clone=function(){var a=new c.za;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.jb=this.jb;a.dh=this.dh;a.eh=this.eh;a.q=this.q;a.K=this.K;return a};c.se=function(a){c.P.call(this);this.color=new c.p(16777215);this.scale=this.jb=1;this.Je=3;this.Tg=1;this.q=!1;this.K=!0;dd(this,a)};c.se.prototype=Object.create(c.P.prototype);
c.se.prototype.clone=function(){var a=new c.se;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.jb=this.jb;a.scale=this.scale;a.Je=this.Je;a.Tg=this.Tg;a.q=this.q;a.K=this.K;return a};c.vb=function(a){c.P.call(this);this.color=new c.p(16777215);this.ma=this.$a=this.La=this.Sa=this.map=null;this.uc=c.Th;this.Ec=1;this.Fc=.98;this.K=!0;this.Ka=c.Ld;this.U=!1;this.ya=1;this.kc=this.jc="round";this.q=c.Hd;this.w=this.sa=!1;dd(this,a)};c.vb.prototype=Object.create(c.P.prototype);
c.vb.prototype.clone=function(){var a=new c.vb;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.map=this.map;a.Sa=this.Sa;a.La=this.La;a.$a=this.$a;a.ma=this.ma;a.uc=this.uc;a.Ec=this.Ec;a.Fc=this.Fc;a.K=this.K;a.Ka=this.Ka;a.U=this.U;a.ya=this.ya;a.jc=this.jc;a.kc=this.kc;a.q=this.q;a.sa=this.sa;a.w=this.w;return a};
c.Lb=function(a){c.P.call(this);this.color=new c.p(16777215);this.ra=new c.p(16777215);this.Qa=new c.p(0);this.lc=!1;this.cd=new c.b(1,1,1);this.ma=this.$a=this.La=this.Sa=this.map=null;this.uc=c.Th;this.Ec=1;this.Fc=.98;this.K=!0;this.Ka=c.Ld;this.U=!1;this.ya=1;this.kc=this.jc="round";this.q=c.Hd;this.Ia=this.w=this.sa=!1;dd(this,a)};c.Lb.prototype=Object.create(c.P.prototype);
c.Lb.prototype.clone=function(){var a=new c.Lb;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.ra.c(this.ra);a.Qa.c(this.Qa);a.lc=this.lc;a.cd.c(this.cd);a.map=this.map;a.Sa=this.Sa;a.La=this.La;a.$a=this.$a;a.ma=this.ma;a.uc=this.uc;a.Ec=this.Ec;a.Fc=this.Fc;a.K=this.K;a.Ka=this.Ka;a.U=this.U;a.ya=this.ya;a.jc=this.jc;a.kc=this.kc;a.q=this.q;a.sa=this.sa;a.w=this.w;a.Ia=this.Ia;return a};
c.Zb=function(a){c.P.call(this);this.color=new c.p(16777215);this.ra=new c.p(16777215);this.Qa=new c.p(0);this.ic=new c.p(1118481);this.ad=30;this.lc=this.Of=!1;this.cd=new c.b(1,1,1);this.pb=this.Sa=this.map=null;this.rf=1;this.lb=null;this.hh=new c.g(1,1);this.ma=this.$a=this.La=null;this.uc=c.Th;this.Ec=1;this.Fc=.98;this.K=!0;this.Ka=c.Ld;this.U=!1;this.ya=1;this.kc=this.jc="round";this.q=c.Hd;this.Ia=this.w=this.sa=!1;dd(this,a)};c.Zb.prototype=Object.create(c.P.prototype);
c.Zb.prototype.clone=function(){var a=new c.Zb;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.ra.c(this.ra);a.Qa.c(this.Qa);a.ic.c(this.ic);a.ad=this.ad;a.Of=this.Of;a.lc=this.lc;a.cd.c(this.cd);a.map=this.map;a.Sa=this.Sa;a.pb=this.pb;a.rf=this.rf;a.lb=this.lb;a.hh.c(this.hh);a.La=this.La;a.$a=this.$a;a.ma=this.ma;a.uc=this.uc;a.Ec=this.Ec;a.Fc=this.Fc;a.K=this.K;a.Ka=this.Ka;a.U=this.U;a.ya=this.ya;a.jc=this.jc;a.kc=this.kc;a.q=this.q;a.sa=this.sa;a.w=this.w;a.Ia=this.Ia;return a};
c.Gd=function(a){c.P.call(this);this.U=this.w=!1;this.ya=1;dd(this,a)};c.Gd.prototype=Object.create(c.P.prototype);c.Gd.prototype.clone=function(){var a=new c.Gd;c.P.prototype.clone.call(this,a);a.U=this.U;a.ya=this.ya;return a};c.ue=function(a){c.P.call(this);this.Ka=c.Ih;this.U=!1;this.ya=1;this.w=!1;dd(this,a)};c.ue.prototype=Object.create(c.P.prototype);c.ue.prototype.clone=function(){var a=new c.ue;c.P.prototype.clone.call(this,a);a.Ka=this.Ka;a.U=this.U;a.ya=this.ya;return a};
c.dd=function(a){this.Ta=a instanceof Array?a:[]};c.dd.prototype.clone=function(){for(var a=new c.dd,b=0;b<this.Ta.length;b++)a.Ta.push(this.Ta[b].clone());return a};c.ed=function(a){c.P.call(this);this.color=new c.p(16777215);this.map=null;this.size=1;this.ig=!0;this.q=c.Hd;this.K=!0;dd(this,a)};c.ed.prototype=Object.create(c.P.prototype);
c.ed.prototype.clone=function(){var a=new c.ed;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.map=this.map;a.size=this.size;a.ig=this.ig;a.q=this.q;a.K=this.K;return a};c.fq=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new c.ed(a)};c.iq=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new c.ed(a)};
c.Da=function(a){c.P.call(this);this.yf={};this.M={};this.attributes=null;this.I="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.H="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.Ka=c.Ld;this.jb=1;this.U=!1;this.ya=1;this.Tc=this.K=!1;this.q=c.Hd;this.Ia=this.w=this.sa=!1;this.ec={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.uo=void 0;dd(this,a)};c.Da.prototype=Object.create(c.P.prototype);
c.Da.prototype.clone=function(){var a=new c.Da;c.P.prototype.clone.call(this,a);a.H=this.H;a.I=this.I;a.M=c.ac.clone(this.M);a.attributes=this.attributes;a.yf=this.yf;a.Ka=this.Ka;a.U=this.U;a.ya=this.ya;a.K=this.K;a.Tc=this.Tc;a.q=this.q;a.sa=this.sa;a.w=this.w;a.Ia=this.Ia;return a};c.wg=function(a){c.Da.call(this,a)};c.wg.prototype=Object.create(c.Da.prototype);c.wg.prototype.clone=function(){var a=new c.wg;c.Da.prototype.clone.call(this,a);return a};
c.gf=function(a){c.P.call(this);this.color=new c.p(16777215);this.map=null;this.rotation=0;this.K=!1;dd(this,a)};c.gf.prototype=Object.create(c.P.prototype);c.gf.prototype.clone=function(){var a=new c.gf;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.map=this.map;a.rotation=this.rotation;a.K=this.K;return a};c.ff=function(a){c.P.call(this);this.color=new c.p(16777215);this.Wa=function(){};dd(this,a)};c.ff.prototype=Object.create(c.P.prototype);
c.ff.prototype.clone=function(){var a=new c.ff;c.P.prototype.clone.call(this,a);a.color.c(this.color);a.Wa=this.Wa;return a};c.gq=c.ff;
c.ua=function(a,b,d,e,f,g,h,l,k){this.id=c.Vm++;this.Wb=c.Math.Df();this.name="";this.Z=void 0!==a?a:c.ua.cm;this.Pf=[];this.Re=void 0!==b?b:c.ua.dm;this.mc=void 0!==d?d:c.af;this.nc=void 0!==e?e:c.af;this.Sb=void 0!==f?f:c.Fd;this.rb=void 0!==g?g:c.Ph;this.cc=void 0!==k?k:1;this.format=void 0!==h?h:c.Jd;this.type=void 0!==l?l:c.bi;this.offset=new c.g(0,0);this.repeat=new c.g(1,1);this.Qb=!0;this.Pi=!1;this.Ne=!0;this.gj=4;this.rk=!1;this.ih=null};c.ua.cm=void 0;c.ua.dm=new c.ak;
c.ua.prototype={constructor:c.ua,get G(){return this.rk},set G(a){!0===a&&this.update();this.rk=a},clone:function(a){void 0===a&&(a=new c.ua);a.Z=this.Z;a.Pf=this.Pf.slice(0);a.Re=this.Re;a.mc=this.mc;a.nc=this.nc;a.Sb=this.Sb;a.rb=this.rb;a.cc=this.cc;a.format=this.format;a.type=this.type;a.offset.c(this.offset);a.repeat.c(this.repeat);a.Qb=this.Qb;a.Pi=this.Pi;a.Ne=this.Ne;a.gj=this.gj;return a},update:function(){this.dispatchEvent({type:"update"})}};c.Jb.prototype.apply(c.ua.prototype);c.Vm=0;
c.bf=function(a,b,d,e,f,g,h,l,k){c.ua.call(this,a,b,d,e,f,g,h,l,k);this.images=a};c.bf.prototype=Object.create(c.ua.prototype);c.bf.clone=function(a){void 0===a&&(a=new c.bf);c.ua.prototype.clone.call(this,a);a.images=this.images;return a};c.oe=function(a,b,d,e,f,g,h,l,k,m,q){c.ua.call(this,null,g,h,l,k,m,e,f,q);this.Z={width:b,height:d};this.Pf=a;this.Qb=!1};c.oe.prototype=Object.create(c.ua.prototype);c.oe.prototype.clone=function(){var a=new c.oe;c.ua.prototype.clone.call(this,a);return a};
c.Bd=function(a,b,d,e,f,g,h,l,k,m,q){c.ua.call(this,null,g,h,l,k,m,e,f,q);this.Z={data:a,width:b,height:d}};c.Bd.prototype=Object.create(c.ua.prototype);c.Bd.prototype.clone=function(){var a=new c.Bd;c.ua.prototype.clone.call(this,a);return a};c.$b=function(a,b){c.u.call(this);this.j=void 0!==a?a:new c.s;this.r=void 0!==b?b:new c.ed({color:16777215*Math.random()});this.ke=!1};c.$b.prototype=Object.create(c.u.prototype);
c.$b.prototype.clone=function(a){void 0===a&&(a=new c.$b(this.j,this.r));a.ke=this.ke;c.u.prototype.clone.call(this,a);return a};c.hq=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new c.$b(a,b)};c.T=function(a,b,d){c.u.call(this);this.j=void 0!==a?a:new c.s;this.r=void 0!==b?b:new c.za({color:16777215*Math.random()});this.type=void 0!==d?d:c.Oh};c.Oh=0;c.Kb=1;c.T.prototype=Object.create(c.u.prototype);
c.T.prototype.clone=function(a){void 0===a&&(a=new c.T(this.j,this.r,this.type));c.u.prototype.clone.call(this,a);return a};c.V=function(a,b){c.u.call(this);this.j=void 0!==a?a:new c.s;this.r=void 0!==b?b:new c.vb({color:16777215*Math.random()});if(void 0!==this.j.w&&0<this.j.w.length){this.Ki=-1;this.fl=[];this.Ua=[];this.Lo={};for(var d=0,e=this.j.w.length;d<e;d++)this.Ua.push(0),this.Lo[this.j.w[d].name]=d}};c.V.prototype=Object.create(c.u.prototype);
c.V.prototype.clone=function(a,b){void 0===a&&(a=new c.V(this.j,this.r));c.u.prototype.clone.call(this,a,b);return a};c.Yb=function(){c.u.call(this);this.Jg=this.Rd=this.Fe=0};c.Yb.prototype=Object.create(c.u.prototype);c.Yb.prototype.pa=function(a){c.u.prototype.pa.call(this,a);this.Jg=this.Rd=this.Fe=0};
c.Tj=function(a,b,d){this.bd=void 0!==d?d:!0;this.so=new c.R;a=a||[];this.Y=a.slice(0);this.bd?(this.pf=this.qf=a=256<this.Y.length?64:64<this.Y.length?32:16<this.Y.length?16:8,this.of=new Float32Array(this.qf*this.pf*4),this.nd=new c.Bd(this.of,this.qf,this.pf,c.Jd,c.Jh),this.nd.rb=c.ve,this.nd.Sb=c.ve,this.nd.Qb=!1,this.nd.Ne=!1):this.of=new Float32Array(16*this.Y.length);if(void 0===b)for(this.nf=[],b=0,a=this.Y.length;b<a;b++)d=new c.R,this.Y[b]&&d.Cb(this.Y[b].l),this.nf.push(d);else if(this.Y.length===
b.length)this.nf=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.nf=[],b=0,a=this.Y.length;b<a;b++)this.nf.push(new c.R)};c.Tj.prototype.update=function(){for(var a=new c.R,b=0,d=this.Y.length;b<d;b++)Wb(a,this.Y[b]?this.Y[b].l:this.so,this.nf[b]),a.Sg(this.of,16*b);this.bd&&(this.nd.G=!0)};
c.oc=function(a,b,d){c.V.call(this,a,b);this.oi="attached";this.He=new c.R;this.Vd=new c.R;a=[];if(this.j&&void 0!==this.j.Y){for(var e,f,g,h,l=0,k=this.j.Y.length;l<k;++l)e=this.j.Y[l],f=e.ol,g=e.$r,h=e.yl,b=new c.Yb,a.push(b),b.name=e.name,b.position.set(f[0],f[1],f[2]),b.ab.set(g[0],g[1],g[2],g[3]),void 0!==h?b.scale.set(h[0],h[1],h[2]):b.scale.set(1,1,1);l=0;for(k=this.j.Y.length;l<k;++l)e=this.j.Y[l],-1!==e.parent?a[e.parent].add(a[l]):this.add(a[l])}if(this.j instanceof c.s)for(b=0;b<this.j.Gb.length;b++)e=
this.j.Vb[b],f=1/e.Wk(),Infinity!==f?e.F(f):e.set(1);this.pa(!0);this.bind(new c.Tj(a,void 0,d))};c.oc.prototype=Object.create(c.V.prototype);c.oc.prototype.bind=function(a,b){this.Xa=a;void 0===b&&(this.pa(!0),b=this.l);this.He.c(b);this.Vd.Cb(b)};c.oc.prototype.pa=function(){c.V.prototype.pa.call(this,!0);"attached"===this.oi?this.Vd.Cb(this.l):"detached"===this.oi?this.Vd.Cb(this.He):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.oi)};
c.oc.prototype.clone=function(a){void 0===a&&(a=new c.oc(this.j,this.r,this.bd));c.V.prototype.clone.call(this,a);return a};c.Sh=function(a,b){c.V.call(this,a,b);this.duration=1E3;this.gh=!1;this.Ck=this.Vk=this.time=0;this.direction=1;this.Ke=!1;var d=this.j.w.length-1;this.tp=0;this.$n=d;this.length=this.$n-this.tp+1};c.Sh.prototype=Object.create(c.V.prototype);
c.Sh.prototype.clone=function(a){void 0===a&&(a=new c.Sh(this.j,this.r));a.duration=this.duration;a.gh=this.gh;a.time=this.time;a.Vk=this.Vk;a.Ck=this.Ck;a.direction=this.direction;a.Ke=this.Ke;c.V.prototype.clone.call(this,a);return a};c.tg=function(){c.u.call(this);this.Ja=[]};c.tg.prototype=Object.create(c.u.prototype);
c.tg.prototype.update=function(){var a=new c.b,b=new c.b;return function(d){if(1<this.Ja.length){lb(a,d.l);lb(b,this.l);d=a.Qc(b);this.Ja[0].object.visible=!0;for(var e=1,f=this.Ja.length;e<f;e++)if(d>=this.Ja[e].Ba)this.Ja[e-1].object.visible=!1,this.Ja[e].object.visible=!0;else break;for(;e<f;e++)this.Ja[e].object.visible=!1}}}();
c.tg.prototype.clone=function(a){void 0===a&&(a=new c.tg);c.u.prototype.clone.call(this,a);for(var b=0,d=this.Ja.length;b<d;b++){var e=this.Ja[b].object.clone();e.visible=0===b;var f=a,g=this.Ja[b].Ba;void 0===g&&(g=0);for(var g=Math.abs(g),h=0;h<f.Ja.length&&!(g<f.Ja[h].Ba);h++);f.Ja.splice(h,0,{Ba:g,object:e});f.add(e)}return a};
c.Mc=function(){var a=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),b=new c.ta;Sc(b,"position",new c.Ma(a,3));return function(a){c.u.call(this);this.j=b;this.r=void 0!==a?a:new c.gf}}();c.Mc.prototype=Object.create(c.u.prototype);c.Mc.prototype.xd=function(){jc(this.Ha,this.position,this.ab,this.scale);this.fc=!0};c.Mc.prototype.clone=function(a){void 0===a&&(a=new c.Mc(this.r));c.u.prototype.clone.call(this,a);return a};c.eq=c.Mc;
c.ye=function(){c.u.call(this);this.Wf=this.K=null;this.Ge=!0;this.la=!1;this.xb=[];this.Be=[];this.Ce=[]};c.ye.prototype=Object.create(c.u.prototype);
function Pc(a,b){if(b instanceof c.qa)-1===a.xb.indexOf(b)&&a.xb.push(b),b.target&&void 0===b.target.parent&&a.add(b.target);else if(!(b instanceof c.fb||b instanceof c.Yb)){a.Be.push(b);var d=a.Ce.indexOf(b);-1!==d&&a.Ce.splice(d,1)}a.dispatchEvent({type:"objectAdded",object:b});b.dispatchEvent({type:"addedToScene",cp:a});for(d=0;d<b.children.length;d++)Pc(a,b.children[d])}
function Qc(a,b){if(b instanceof c.qa){var d=a.xb.indexOf(b);-1!==d&&a.xb.splice(d,1);if(b.ie)for(d=0;d<b.ie.length;d++)Qc(a,b.ie[d])}else b instanceof c.fb||(a.Ce.push(b),d=a.Be.indexOf(b),-1!==d&&a.Be.splice(d,1));a.dispatchEvent({type:"objectRemoved",object:b});b.dispatchEvent({type:"removedFromScene",cp:a});for(d=0;d<b.children.length;d++)Qc(a,b.children[d])}
c.ye.prototype.clone=function(a){void 0===a&&(a=new c.ye);c.u.prototype.clone.call(this,a);null!==this.K&&(a.K=this.K.clone());null!==this.Wf&&(a.Wf=this.Wf.clone());a.Ge=this.Ge;a.la=this.la;return a};c.rg=function(a,b,d){this.name="";this.color=new c.p(a);this.Va=void 0!==b?b:1;this.Ra=void 0!==d?d:1E3};c.rg.prototype.clone=function(){return new c.rg(Za(this.color),this.Va,this.Ra)};c.ef=function(a,b){this.name="";this.color=new c.p(a);this.vi=void 0!==b?b:2.5E-4};
c.ef.prototype.clone=function(){return new c.ef(Za(this.color),this.vi)};
c.Kp=function(a){function b(a,b,d,e){m(b);q(d);p(e);r(Qa(a));E.stroke();ra.Me(2*b)}function d(a){s(Qa(a));E.fill()}function e(a){f(a.target)}function f(a){if(!(a instanceof c.oe)){var b=a.mc===c.xe,d=a.nc===c.xe,e=a.Z,f=document.createElement("canvas");f.width=e.width;f.height=e.height;var g=f.getContext("2d");g.setTransform(1,0,0,-1,0,e.height);g.drawImage(e,0,0);ab[a.id]=E.createPattern(f,!0===b&&!0===d?"repeat":!0===b&&!1===d?"repeat-x":!1===b&&!0===d?"repeat-y":"no-repeat")}}function g(a,b,d,
g,h,k,l,m,q,p,r,t,u){if(!(u instanceof c.Bd)){!1===u.Xg("update",e)&&(void 0!==u.Z&&0<u.Z.width&&f(u),u.addEventListener("update",e));var v=ab[u.id];if(void 0!==v){s(v);var v=u.offset.x/u.repeat.x,x=u.offset.y/u.repeat.y,w=u.Z.width*u.repeat.x;u=u.Z.height*u.repeat.y;l=(l+v)*w;m=(m+x)*u;d-=a;g-=b;h-=a;k-=b;q=(q+v)*w-l;p=(p+x)*u-m;r=(r+v)*w-l;t=(t+x)*u-m;u=q*t-r*p;0!==u&&(v=1/u,u=(t*d-p*h)*v,p=(t*g-p*k)*v,d=(q*h-r*d)*v,g=(q*k-r*g)*v,a=a-u*l-d*m,b=b-p*l-g*m,E.save(),E.transform(u,p,d,g,a,b),E.fill(),
E.restore())}else s("rgba(0,0,0,1)"),E.fill()}}function h(a,b,d){var e=b.x-a.x,f=b.y-a.y,g=e*e+f*f;0!==g&&(d/=Math.sqrt(g),e*=d,f*=d,b.x+=e,b.y+=f,a.x-=e,a.y-=f)}function l(a){F!==a&&(F=E.globalAlpha=a)}function k(a){J!==a&&(a===c.Uh?E.globalCompositeOperation="source-over":a===c.jj?E.globalCompositeOperation="lighter":a===c.Xj&&(E.globalCompositeOperation="darker"),J=a)}function m(a){O!==a&&(O=E.lineWidth=a)}function q(a){T!==a&&(T=E.lineCap=a)}function p(a){S!==a&&(S=E.lineJoin=a)}function r(a){I!==
a&&(I=E.strokeStyle=a)}function s(a){$!==a&&($=E.fillStyle=a)}function u(a){aa.length!==a.length&&(E.setLineDash(a),aa=a)}console.log("THREE.CanvasRenderer",c.Nj);var t=c.Math.ip;a=a||{};var w=this,x,v,D,z=new c.Vh,B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),G=B.width,K=B.height,y=Math.floor(G/2),C=Math.floor(K/2),L=0,R=0,ca=G,Q=K,E=B.getContext("2d",{alpha:!0===a.alpha}),A=new c.p(0),F=1,J=0,I=null,$=null,O=null,T=null,S=null,aa=[],P,W,ba,Z,ua,Aa,la,Sa,Ea,sa,qa=new c.p;new c.p;
new c.p;new c.p;new c.p;var Ta=new c.p,db=new c.p,Ra=new c.p,ab={},ya,ma,M,Ja,Ca,na,Ha,oa=new c.ne,ja=new c.ne,ra=new c.ne,Pa=new c.p,Na=new c.p,Fa=new c.p,Xa=new c.b,Oa=new c.b,ea=new c.b,Ba=new c.ub;void 0===E.setLineDash&&(E.setLineDash=function(){});this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.jp=this.wh=this.ji=!0;this.info={t:{e:0,h:0}};this.ej=function(){};this.Al=function(a,b,d){G=a*this.devicePixelRatio;K=
b*this.devicePixelRatio;B.width=G;B.height=K;y=Math.floor(G/2);C=Math.floor(K/2);!1!==d&&(B.style.width=a+"px",B.style.height=b+"px");oa.min.set(-y,-C);oa.max.set(y,C);ja.min.set(-y,-C);ja.max.set(y,C);F=1;J=0;S=T=O=$=I=null;this.Zi(0,0,a,b)};this.Zi=function(a,b,d,e){L=a*this.devicePixelRatio;R=b*this.devicePixelRatio;ca=d*this.devicePixelRatio;Q=e*this.devicePixelRatio};this.Di=function(){return A};this.clear=function(){!1===ja.empty()&&(ja.Qk(oa),ja.Me(2),ja.min.x+=y,ja.min.y=-ja.min.y+C,ja.max.x+=
y,ja.max.y=-ja.max.y+C,E.clearRect(ja.min.x|0,ja.min.y|0,ja.max.x-ja.min.x|0,ja.max.y-ja.min.y|0),ja.ud())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.t=function(a,B){if(!1===B instanceof c.fb)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.ji&&this.clear();w.info.t.e=0;w.info.t.h=0;E.setTransform(ca/G,0,0,-Q/K,L,K-R);E.translate(y,C);x=z.Wo(a,B,this.wh,this.jp);v=x.elements;D=x.Tc;P=B;Sb(Ba,
B.Ca);Ia(Pa,0,0,0);Ia(Na,0,0,0);Ia(Fa,0,0,0);for(var I=0,J=D.length;I<J;I++){var F=D[I],A=F.color;F instanceof c.le?Pa.add(A):F instanceof c.sb?Na.add(A):F instanceof c.fd&&Fa.add(A)}I=0;for(J=v.length;I<J;I++){var O=v[I],$=O.r;if(void 0!==$&&0!==$.opacity){ra.ud();if(O instanceof c.Rj){W=O;W.x*=y;W.y*=C;var F=W,U=O,A=$;l(A.opacity);k(A.Na);var S=U.scale.x*y,U=U.scale.y*C,O=.5*Math.sqrt(S*S+U*U);ra.min.set(F.x-O,F.y-O);ra.max.set(F.x+O,F.y+O);if(A instanceof c.gf){var T=A.map;if(null!==T&&void 0!==
T.Z){!1===T.Xg("update",e)&&(0<T.Z.width&&f(T),T.addEventListener("update",e));O=ab[T.id];void 0!==O?s(O):s("rgba( 0, 0, 0, 1 )");var aa=T.Z,O=aa.width*T.offset.x,$=aa.height*T.offset.y,Ga=aa.width*T.repeat.x,T=aa.height*T.repeat.y,aa=S/Ga,Jb=U/T;E.save();E.translate(F.x,F.y);0!==A.rotation&&E.rotate(A.rotation);E.translate(-S/2,-U/2);E.scale(aa,Jb);E.translate(-O,-$);E.fillRect(O,$,Ga,T)}else s(Qa(A.color)),E.save(),E.translate(F.x,F.y),0!==A.rotation&&E.rotate(A.rotation),E.scale(S,-U),E.fillRect(-.5,
-.5,1,1);E.restore()}else A instanceof c.ff&&(r(Qa(A.color)),s(Qa(A.color)),E.save(),E.translate(F.x,F.y),0!==A.rotation&&E.rotate(A.rotation),E.scale(S,U),A.Wa(E),E.restore())}else if(O instanceof c.Qj){if(W=O.X,ba=O.aa,W.k.x*=y,W.k.y*=C,ba.k.x*=y,ba.k.y*=C,ra.Uc([W.k,ba.k]),!0===oa.Kf(ra))if(F=W,A=ba,S=O,U=$,l(U.opacity),k(U.Na),E.beginPath(),E.moveTo(F.k.x,F.k.y),E.lineTo(A.k.x,A.k.y),U instanceof c.za){m(U.jb);q(U.dh);p(U.eh);if(U.q!==c.Md)r(Qa(U.color));else if(O=Qa(S.q[0]),S=Qa(S.q[1]),O===
S)r(O);else{try{var yb=E.createLinearGradient(F.k.x,F.k.y,A.k.x,A.k.y);yb.addColorStop(0,O);yb.addColorStop(1,S)}catch(mc){yb=O}r(yb)}E.stroke();ra.Me(2*U.jb)}else U instanceof c.se&&(m(U.jb),q(U.dh),p(U.eh),r(Qa(U.color)),u([U.Je,U.Tg]),E.stroke(),ra.Me(2*U.jb),u([]))}else if(O instanceof c.Pj){W=O.X;ba=O.aa;Z=O.Xb;if(-1>W.k.z||1<W.k.z)continue;if(-1>ba.k.z||1<ba.k.z)continue;if(-1>Z.k.z||1<Z.k.z)continue;W.k.x*=y;W.k.y*=C;ba.k.x*=y;ba.k.y*=C;Z.k.x*=y;Z.k.y*=C;0<$.Te&&(h(W.k,ba.k,$.Te),h(ba.k,Z.k,
$.Te),h(Z.k,W.k,$.Te));ra.Uc([W.k,ba.k,Z.k]);if(!0===oa.Kf(ra)){A=W;S=ba;U=Z;F=$;w.info.t.e+=3;w.info.t.h++;l(F.opacity);k(F.Na);ua=A.k.x;Aa=A.k.y;la=S.k.x;Sa=S.k.y;Ea=U.k.x;sa=U.k.y;var $=ua,Ga=Aa,T=la,aa=Sa,Jb=Ea,Da=sa;E.beginPath();E.moveTo($,Ga);E.lineTo(T,aa);E.lineTo(Jb,Da);E.closePath();if((F instanceof c.Lb||F instanceof c.Zb)&&null===F.map){Ta.c(F.color);db.c(F.Qa);F.q===c.df&&Ta.multiply(O.color);qa.c(Pa);Oa.c(A.Ve).add(S.Ve).add(U.Ve).pd(3);A=Oa;S=O.Qf;U=qa;O=0;for($=D.length;O<$;O++)Ga=
D[O],Ra.c(Ga.color),Ga instanceof c.sb?(T=lb(Xa,Ga.l).normalize(),aa=S.va(T),0>=aa||(aa*=Ga.ga,U.add(Ra.F(aa)))):Ga instanceof c.fd&&(T=lb(Xa,Ga.l),aa=S.va(Xa.ba(T,A).normalize()),0>=aa||(aa*=0==Ga.Ba?1:1-Math.min(A.Qc(T)/Ga.Ba,1),0!=aa&&(aa*=Ga.ga,U.add(Ra.F(aa)))));qa.multiply(Ta).add(db);!0===F.U?b(qa,F.ya,F.jc,F.kc):d(qa)}else F instanceof c.vb||F instanceof c.Lb||F instanceof c.Zb?null!==F.map?F.map.Re instanceof c.ak&&(ya=O.yd,g(ua,Aa,la,Sa,Ea,sa,ya[0].x,ya[0].y,ya[1].x,ya[1].y,ya[2].x,ya[2].y,
F.map)):null!==F.ma?F.ma.Re instanceof c.Nm?(Qb(ea.c(O.zd[0]),Ba),ma=.5*ea.x+.5,M=.5*ea.y+.5,Qb(ea.c(O.zd[1]),Ba),Ja=.5*ea.x+.5,Ca=.5*ea.y+.5,Qb(ea.c(O.zd[2]),Ba),na=.5*ea.x+.5,Ha=.5*ea.y+.5,g(ua,Aa,la,Sa,Ea,sa,ma,M,Ja,Ca,na,Ha,F.ma)):F.ma.Re instanceof c.Om&&(Qb(ea.c(O.zd[0]),Ba),ma=-.5*ea.x+.5,M=-.5*ea.y+.5,Qb(ea.c(O.zd[1]),Ba),Ja=-.5*ea.x+.5,Ca=-.5*ea.y+.5,Qb(ea.c(O.zd[2]),Ba),na=-.5*ea.x+.5,Ha=-.5*ea.y+.5,g(ua,Aa,la,Sa,Ea,sa,ma,M,Ja,Ca,na,Ha,F.ma)):(qa.c(F.color),F.q===c.df&&qa.multiply(O.color),
!0===F.U?b(qa,F.ya,F.jc,F.kc):d(qa)):(F instanceof c.Gd?qa.C=qa.B=qa.i=1-t(A.k.z*A.k.f,P.Va,P.Ra):F instanceof c.ue?(Qb(ea.c(O.Qf),Ba),Ia(qa,ea.x,ea.y,ea.z).F(.5).ld(.5)):Ia(qa,1,1,1),!0===F.U?b(qa,F.ya,F.jc,F.kc):d(qa))}}ja.Nl(ra)}}E.setTransform(1,0,0,1,0,0)}}};c.a={};c.a.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";c.a.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";
c.a.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";c.a.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";
c.a.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";c.a.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n";
c.a.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";c.a.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif";c.a.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";
c.a.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";c.a.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif";
c.a.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif";c.a.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
c.a.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
c.a.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";c.a.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif";c.a.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";c.a.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";
c.a.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif";c.a.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif";c.a.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";c.a.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";
c.a.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif";c.a.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";
c.a.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n";c.a.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";c.a.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";c.a.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n";
c.a.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";c.a.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif";
c.a.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";c.a.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";c.a.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";
c.a.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";c.a.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";
c.a.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif";
c.a.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";c.a.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";
c.a.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";c.a.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";c.a.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";
c.a.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";c.a.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";c.a.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif";
c.a.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif";
c.a.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";
c.a.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif";
c.a.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
c.a.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
c.a.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";c.a.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";c.a.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
c.ac={Dc:function(a){var b,d,e,f={};for(b=0;b<a.length;b++)for(d in e=this.clone(a[b]),e)f[d]=e[d];return f},clone:function(a){var b,d,e,f={};for(b in a)for(d in f[b]={},a[b])e=a[b][d],f[b][d]=e instanceof c.p||e instanceof c.g||e instanceof c.b||e instanceof c.Pb||e instanceof c.R||e instanceof c.ua?e.clone():e instanceof Array?e.slice():e;return f}};
c.Aa={Eq:{diffuse:{type:"c",value:new c.p(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new c.Pb(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},Aq:{bumpMap:{type:"t",
value:null},bumpScale:{type:"f",value:1}},Jr:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new c.g(1,1)}},K:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new c.p(16777215)}},Tc:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",
value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},Mr:{psColor:{type:"c",value:new c.p(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",
value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new c.p(16777215)}},bs:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
c.yg={basic:{M:c.ac.Dc([c.Aa.common,c.Aa.fog,c.Aa.shadowmap]),I:[c.a.map_pars_vertex,c.a.lightmap_pars_vertex,c.a.envmap_pars_vertex,c.a.color_pars_vertex,c.a.morphtarget_pars_vertex,c.a.skinning_pars_vertex,c.a.shadowmap_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.map_vertex,c.a.lightmap_vertex,c.a.color_vertex,c.a.skinbase_vertex,"\t#ifdef USE_ENVMAP",c.a.morphnormal_vertex,c.a.skinnormal_vertex,c.a.defaultnormal_vertex,"\t#endif",c.a.morphtarget_vertex,c.a.skinning_vertex,c.a.default_vertex,
c.a.logdepthbuf_vertex,c.a.worldpos_vertex,c.a.envmap_vertex,c.a.shadowmap_vertex,"}"].join("\n"),H:["uniform vec3 diffuse;\nuniform float opacity;",c.a.color_pars_fragment,c.a.map_pars_fragment,c.a.alphamap_pars_fragment,c.a.lightmap_pars_fragment,c.a.envmap_pars_fragment,c.a.fog_pars_fragment,c.a.shadowmap_pars_fragment,c.a.specularmap_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",c.a.logdepthbuf_fragment,c.a.map_fragment,c.a.alphamap_fragment,
c.a.alphatest_fragment,c.a.specularmap_fragment,c.a.lightmap_fragment,c.a.color_fragment,c.a.envmap_fragment,c.a.shadowmap_fragment,c.a.linear_to_gamma_fragment,c.a.fog_fragment,"}"].join("\n")},lambert:{M:c.ac.Dc([c.Aa.common,c.Aa.fog,c.Aa.lights,c.Aa.shadowmap,{ambient:{type:"c",value:new c.p(16777215)},emissive:{type:"c",value:new c.p(0)},wrapRGB:{type:"v3",value:new c.b(1,1,1)}}]),I:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",c.a.map_pars_vertex,
c.a.lightmap_pars_vertex,c.a.envmap_pars_vertex,c.a.lights_lambert_pars_vertex,c.a.color_pars_vertex,c.a.morphtarget_pars_vertex,c.a.skinning_pars_vertex,c.a.shadowmap_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.map_vertex,c.a.lightmap_vertex,c.a.color_vertex,c.a.morphnormal_vertex,c.a.skinbase_vertex,c.a.skinnormal_vertex,c.a.defaultnormal_vertex,c.a.morphtarget_vertex,c.a.skinning_vertex,c.a.default_vertex,c.a.logdepthbuf_vertex,c.a.worldpos_vertex,c.a.envmap_vertex,c.a.lights_lambert_vertex,
c.a.shadowmap_vertex,"}"].join("\n"),H:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",c.a.color_pars_fragment,c.a.map_pars_fragment,c.a.alphamap_pars_fragment,c.a.lightmap_pars_fragment,c.a.envmap_pars_fragment,c.a.fog_pars_fragment,c.a.shadowmap_pars_fragment,c.a.specularmap_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",c.a.logdepthbuf_fragment,c.a.map_fragment,c.a.alphamap_fragment,
c.a.alphatest_fragment,c.a.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",c.a.lightmap_fragment,c.a.color_fragment,c.a.envmap_fragment,c.a.shadowmap_fragment,c.a.linear_to_gamma_fragment,c.a.fog_fragment,"}"].join("\n")},phong:{M:c.ac.Dc([c.Aa.common,c.Aa.bump,c.Aa.normalmap,c.Aa.fog,c.Aa.lights,c.Aa.shadowmap,{ambient:{type:"c",
value:new c.p(16777215)},emissive:{type:"c",value:new c.p(0)},specular:{type:"c",value:new c.p(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new c.b(1,1,1)}}]),I:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",c.a.map_pars_vertex,c.a.lightmap_pars_vertex,c.a.envmap_pars_vertex,c.a.lights_phong_pars_vertex,c.a.color_pars_vertex,c.a.morphtarget_pars_vertex,c.a.skinning_pars_vertex,c.a.shadowmap_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.map_vertex,
c.a.lightmap_vertex,c.a.color_vertex,c.a.morphnormal_vertex,c.a.skinbase_vertex,c.a.skinnormal_vertex,c.a.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",c.a.morphtarget_vertex,c.a.skinning_vertex,c.a.default_vertex,c.a.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",c.a.worldpos_vertex,c.a.envmap_vertex,c.a.lights_phong_vertex,c.a.shadowmap_vertex,"}"].join("\n"),H:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",
c.a.color_pars_fragment,c.a.map_pars_fragment,c.a.alphamap_pars_fragment,c.a.lightmap_pars_fragment,c.a.envmap_pars_fragment,c.a.fog_pars_fragment,c.a.lights_phong_pars_fragment,c.a.shadowmap_pars_fragment,c.a.bumpmap_pars_fragment,c.a.normalmap_pars_fragment,c.a.specularmap_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",c.a.logdepthbuf_fragment,c.a.map_fragment,c.a.alphamap_fragment,c.a.alphatest_fragment,c.a.specularmap_fragment,c.a.lights_phong_fragment,
c.a.lightmap_fragment,c.a.color_fragment,c.a.envmap_fragment,c.a.shadowmap_fragment,c.a.linear_to_gamma_fragment,c.a.fog_fragment,"}"].join("\n")},particle_basic:{M:c.ac.Dc([c.Aa.particle,c.Aa.shadowmap]),I:["uniform float size;\nuniform float scale;",c.a.color_pars_vertex,c.a.shadowmap_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",
c.a.logdepthbuf_vertex,c.a.worldpos_vertex,c.a.shadowmap_vertex,"}"].join("\n"),H:["uniform vec3 psColor;\nuniform float opacity;",c.a.color_pars_fragment,c.a.map_particle_pars_fragment,c.a.fog_pars_fragment,c.a.shadowmap_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",c.a.logdepthbuf_fragment,c.a.map_particle_fragment,c.a.alphatest_fragment,c.a.color_fragment,c.a.shadowmap_fragment,c.a.fog_fragment,"}"].join("\n")},dashed:{M:c.ac.Dc([c.Aa.common,
c.Aa.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),I:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",c.a.color_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",c.a.logdepthbuf_vertex,"}"].join("\n"),H:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",
c.a.color_pars_fragment,c.a.fog_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",c.a.logdepthbuf_fragment,c.a.color_fragment,c.a.fog_fragment,"}"].join("\n")},depth:{M:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},I:[c.a.morphtarget_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.morphtarget_vertex,c.a.default_vertex,c.a.logdepthbuf_vertex,
"}"].join("\n"),H:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",c.a.logdepthbuf_pars_fragment,"void main() {",c.a.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{M:{opacity:{type:"f",value:1}},I:["varying vec3 vNormal;",
c.a.morphtarget_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",c.a.morphtarget_vertex,c.a.default_vertex,c.a.logdepthbuf_vertex,"}"].join("\n"),H:["uniform float opacity;\nvarying vec3 vNormal;",c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",c.a.logdepthbuf_fragment,"}"].join("\n")},normalmap:{M:c.ac.Dc([c.Aa.fog,c.Aa.lights,c.Aa.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",
value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new c.g(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new c.p(16777215)},specular:{type:"c",value:new c.p(1118481)},
ambient:{type:"c",value:new c.p(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new c.g(0,0)},uRepeat:{type:"v2",value:new c.g(1,1)},wrapRGB:{type:"v3",value:new c.b(1,1,1)}}]),H:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
c.a.shadowmap_pars_fragment,c.a.fog_pars_fragment,c.a.logdepthbuf_pars_fragment,"void main() {",c.a.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",
c.a.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",
c.a.shadowmap_fragment,c.a.linear_to_gamma_fragment,c.a.fog_fragment,"}"].join("\n"),I:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",c.a.skinning_pars_vertex,
c.a.shadowmap_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.skinbase_vertex,c.a.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
c.a.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{M:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},I:["varying vec3 vWorldPosition;",c.a.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
c.a.logdepthbuf_vertex,"}"].join("\n"),H:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",c.a.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",c.a.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{M:{},I:[c.a.morphtarget_pars_vertex,c.a.skinning_pars_vertex,c.a.logdepthbuf_pars_vertex,"void main() {",c.a.skinbase_vertex,c.a.morphtarget_vertex,c.a.skinning_vertex,c.a.default_vertex,
c.a.logdepthbuf_vertex,"}"].join("\n"),H:[c.a.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",c.a.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
c.sq=function(a){function b(a){a.qc||(a.qc={},a.hd=[]);for(;a.Be.length;){var b=a.Be[0],d=a,e=void 0,f=void 0;void 0===b.gd&&(b.gd=!0,b.rc=new c.R,b.sk=new c.ub);e=b.j;if(void 0!==e&&void 0===e.gd)if(e.gd=!0,e.addEventListener("dispose",l),e instanceof c.ta)s(e);else if(b instanceof c.V)void 0!==b.hf&&E(b,d),L(d,b,e);else if(b instanceof c.T){if(!e.gb){f=e;f.gb=n.createBuffer();f.bc=n.createBuffer();f.Dg=n.createBuffer();M.info.memory.Pe++;var f=e,g=b,h=f.e.length;f.De=new Float32Array(3*h);f.Ae=
new Float32Array(3*h);f.dn=new Float32Array(1*h);f.ei=h;k(f,g);e.Ya=!0;e.Ab=!0;e.bh=!0}}else b instanceof c.$b&&!e.gb&&(f=e,f.gb=n.createBuffer(),f.bc=n.createBuffer(),M.info.memory.Pe++,f=e,g=b,h=f.e.length,f.De=new Float32Array(3*h),f.Ae=new Float32Array(3*h),f.hn=[],f.pk=h,k(f,g),e.Ya=!0,e.Ab=!0);if(void 0===b.hf){if(b instanceof c.V)if(e=b.j,e instanceof c.ta)R(d.qc,e,b);else{if(e instanceof c.s)for(g=0,h=e.Bc.length;g<h;g++)f=e.Bc[g],R(d.qc,f,b)}else b instanceof c.T||b instanceof c.$b?(e=b.j,
R(d.qc,e,b)):(b instanceof c.Lh||b.Hi)&&d.hd.push({id:null,object:b,kl:null,bb:null,z:0});b.hf=!0}a.Be.splice(0,1)}for(;a.Ce.length;)E(a.Ce[0],a),a.Ce.splice(0,1)}function d(a){var b=a.Wa.Wa;if(void 0!==b){a.Wa=void 0;var d,e,f=!1;a=0;for(d=Ja.length;a<d;a++)if(e=Ja[a],e.Wa===b){e.hj--;0===e.hj&&(f=!0);break}if(!0===f){f=[];a=0;for(d=Ja.length;a<d;a++)e=Ja[a],e.Wa!==b&&f.push(e);Ja=f;n.deleteProgram(b);M.info.memory.pl--}}}function e(a){void 0!==a.gb&&n.deleteBuffer(a.gb);void 0!==a.Pd&&n.deleteBuffer(a.Pd);
void 0!==a.Gg&&n.deleteBuffer(a.Gg);void 0!==a.bc&&n.deleteBuffer(a.bc);void 0!==a.Ig&&n.deleteBuffer(a.Ig);void 0!==a.Hg&&n.deleteBuffer(a.Hg);void 0!==a.Eg&&n.deleteBuffer(a.Eg);void 0!==a.Fg&&n.deleteBuffer(a.Fg);void 0!==a.Bg&&n.deleteBuffer(a.Bg);void 0!==a.Cg&&n.deleteBuffer(a.Cg);void 0!==a.Dg&&n.deleteBuffer(a.Dg);if(void 0!==a.ob)for(var b in a.ob)n.deleteBuffer(a.ob[b].buffer);M.info.memory.Pe--}function f(a){a=a.target;a.removeEventListener("dispose",f);d(a)}function g(a){a=a.target;a.removeEventListener("dispose",
g);if(a&&a.yb)if(n.deleteTexture(a.yb),a instanceof c.Od)for(var b=0;6>b;b++)n.deleteFramebuffer(a.Nc[b]),n.deleteRenderbuffer(a.Oc[b]);else n.deleteFramebuffer(a.Nc),n.deleteRenderbuffer(a.Oc);M.info.memory.jg--}function h(a){a=a.target;a.removeEventListener("dispose",h);a.Z&&a.Z.lf?n.deleteTexture(a.Z.lf):a.gd&&(a.gd=!1,n.deleteTexture(a.yb));M.info.memory.jg--}function l(a){a=a.target;a.removeEventListener("dispose",l);a.gd=void 0;if(a instanceof c.ta){a=a.attributes;for(var b in a)void 0!==a[b].buffer&&
n.deleteBuffer(a[b].buffer);M.info.memory.Pe--}else if(void 0!==a.Ac){b=0;for(var d=a.Bc.length;b<d;b++){var f=a.Bc[b];if(void 0!==f.Uf)for(var g=0,h=f.Uf;g<h;g++)n.deleteBuffer(f.Ee[g]);if(void 0!==f.Tf)for(g=0,h=f.Tf;g<h;g++)n.deleteBuffer(f.jf[g]);e(f)}}else e(a)}function k(a,b){var d=a.e.length,e=b.r;if(e.attributes){void 0===a.ob&&(a.ob=[]);for(var f in e.attributes){var g=e.attributes[f];if(!g.di||g.Tn){g.di=!0;var h=1;"v2"===g.type?h=2:"v3"===g.type?h=3:"v4"===g.type?h=4:"c"===g.type&&(h=3);
g.size=h;g.d=new Float32Array(d*h);g.buffer=n.createBuffer();g.buffer.Lg=f;g.G=!0}a.ob.push(g)}}}function m(a,b){var d=b.j,e=a.Ik,f=3*e.length,g=1*e.length,h=3*e.length,e=q(b,a),k=r(e),l=p(e),m=e.q?e.q:!1;a.De=new Float32Array(3*f);l&&(a.jk=new Float32Array(3*f));d.Fi&&(a.mk=new Float32Array(4*f));m&&(a.Ae=new Float32Array(3*f));k&&(0<d.A.length&&(a.ok=new Float32Array(2*f)),1<d.A.length&&(a.nk=new Float32Array(2*f)));b.j.Vb.length&&b.j.Gb.length&&(a.kk=new Float32Array(4*f),a.lk=new Float32Array(4*
f));d=null!==Kb&&21845<g?Uint32Array:Uint16Array;a.jn=d;a.ek=new d(3*g);a.gk=new d(2*h);if(a.Uf)for(a.ik=[],d=0,k=a.Uf;d<k;d++)a.ik.push(new Float32Array(3*f));if(a.Tf)for(a.hk=[],d=0,k=a.Tf;d<k;d++)a.hk.push(new Float32Array(3*f));a.ci=3*g;a.ei=2*h;if(e.attributes){void 0===a.ob&&(a.ob=[]);for(var s in e.attributes){var g=e.attributes[s],h={},u;for(u in g)h[u]=g[u];if(!h.di||h.Tn)h.di=!0,d=1,"v2"===h.type?d=2:"v3"===h.type?d=3:"v4"===h.type?d=4:"c"===h.type&&(d=3),h.size=d,h.d=new Float32Array(f*
d),h.buffer=n.createBuffer(),h.buffer.Lg=s,g.G=!0,h.fn=g;a.ob.push(h)}}a.fk=!0}function q(a,b){return a.r instanceof c.dd?a.r.Ta[b.Eb]:a.r}function p(a){return a instanceof c.vb&&!a.ma||a instanceof c.Gd?!1:a&&void 0!==a.Ka&&a.Ka===c.Ld?c.Ld:c.Ih}function r(a){return a.map||a.Sa||a.pb||a.lb||a.La||a.$a||a instanceof c.Da?!0:!1}function s(a){for(var b in a.attributes){var d="index"===b?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,e=a.attributes[b];e.buffer=n.createBuffer();n.bindBuffer(d,e.buffer);n.bufferData(d,
e.d,n.STATIC_DRAW)}}function u(a,b,d,e){for(var f in b){var g=b[f],h=d[f];if(0<=g)if(h){var k=h.Sc;n.bindBuffer(n.ARRAY_BUFFER,h.buffer);w(g);n.vertexAttribPointer(g,k,n.FLOAT,!1,0,e*k*4)}else a.ec&&(2===a.ec[f].length?n.vertexAttrib2fv(g,a.ec[f]):3===a.ec[f].length&&n.vertexAttrib3fv(g,a.ec[f]))}x()}function t(){for(var a=0,b=Tb.length;a<b;a++)Tb[a]=0}function w(a){Tb[a]=1;0===Ga[a]&&(n.enableVertexAttribArray(a),Ga[a]=1)}function x(){for(var a=0,b=Ga.length;a<b;a++)Ga[a]!==Tb[a]&&(n.disableVertexAttribArray(a),
Ga[a]=0)}function v(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function D(a,b){return a.z!==b.z?a.z-b.z:a.id-b.id}function z(a,b){return b[0]-a[0]}function B(a,b,d){if(!1!==b.visible){var e=a.qc[b.id];if(e&&(!1===b.Oe||!0===Jb.Yg(b))){var f=b.j,g,h,k;if(f instanceof c.ta){var l=n.DYNAMIC_DRAW,u=f.attributes,t,v;for(t in u)v=u[t],v.G&&("index"===t?(n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,v.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,v.d,l)):(n.bindBuffer(n.ARRAY_BUFFER,v.buffer),n.bufferData(n.ARRAY_BUFFER,
v.d,l)),v.G=!1)}else if(b instanceof c.V){if(f.qi||f.Vg)f instanceof c.ta?s(f):b instanceof c.V&&L(a,b,f);for(var x=0,w=f.Bc.length;x<w;x++)if(g=f.Bc[x],k=q(b,g),(f.qi||f.Vg)&&m(g,b),h=k.attributes&&ca(k),f.Ya||f.Li||f.Qg||f.Bh||f.Sf||f.Ab||f.xh||h){var y=g,D=n.DYNAMIC_DRAW,C=!f.Zn,G=k;if(y.fk){var F=p(G),I=G.q?G.q:!1,K=r(G),O=F===c.Ld,A=void 0,J=void 0,R=void 0,E=void 0,P=void 0,ua=void 0,$=void 0,T=void 0,S=void 0,Z=void 0,aa=void 0,ga=void 0,ha=void 0,ia=void 0,la=void 0,W=void 0,qa=void 0,ba=
void 0,Ea=void 0,V=void 0,Aa=void 0,U=void 0,ea=void 0,ja=void 0,Ta=void 0,db=void 0,oa=void 0,Sa=void 0,ra=void 0,sa=void 0,Ja=void 0,Ca=void 0,Ga=void 0,Ha=void 0,na=void 0,Oa=void 0,xa=void 0,Ra=void 0,Na=void 0,Pa=void 0,Ba=0,Fa=0,ab=0,Xa=0,cb=0,mb=0,bb=0,Eb=0,hb=0,za=0,Ka=0,N=0,Ya=void 0,nb=y.De,vb=y.ok,Bb=y.nk,Lb=y.jk,eb=y.mk,ob=y.Ae,fb=y.kk,gb=y.lk,Gb=y.ik,Ib=y.hk,Db=y.ob,H=void 0,xb=y.ek,Mb=y.gk,Ua=b.j,Tb=Ua.Qg,Kb=Ua.Bh,ec=Ua.Sf,gc=Ua.xh,hc=Ua.Ab,lc=Ua.Li,Dc=Ua.e,ka=y.Ik,pb=Ua.h,Xb=Ua.A[0],
Yb=Ua.A[1],Ec=Ua.Gb,nc=Ua.Vb,oc=Ua.w,Zb=Ua.Ia;if(Ua.Ya){A=0;for(J=ka.length;A<J;A++)E=pb[ka[A]],ga=Dc[E.N],ha=Dc[E.i],ia=Dc[E.O],nb[Fa]=ga.x,nb[Fa+1]=ga.y,nb[Fa+2]=ga.z,nb[Fa+3]=ha.x,nb[Fa+4]=ha.y,nb[Fa+5]=ha.z,nb[Fa+6]=ia.x,nb[Fa+7]=ia.y,nb[Fa+8]=ia.z,Fa+=9;n.bindBuffer(n.ARRAY_BUFFER,y.gb);n.bufferData(n.ARRAY_BUFFER,nb,D)}if(lc)for(na=0,Oa=oc.length;na<Oa;na++){A=Ka=0;for(J=ka.length;A<J;A++)Na=ka[A],E=pb[Na],ga=oc[na].e[E.N],ha=oc[na].e[E.i],ia=oc[na].e[E.O],xa=Gb[na],xa[Ka]=ga.x,xa[Ka+1]=ga.y,
xa[Ka+2]=ga.z,xa[Ka+3]=ha.x,xa[Ka+4]=ha.y,xa[Ka+5]=ha.z,xa[Ka+6]=ia.x,xa[Ka+7]=ia.y,xa[Ka+8]=ia.z,G.Ia&&(O?(Pa=Zb[na].ka[Na],ba=Pa.N,Ea=Pa.i,V=Pa.O):V=Ea=ba=Zb[na].Kq[Na],Ra=Ib[na],Ra[Ka]=ba.x,Ra[Ka+1]=ba.y,Ra[Ka+2]=ba.z,Ra[Ka+3]=Ea.x,Ra[Ka+4]=Ea.y,Ra[Ka+5]=Ea.z,Ra[Ka+6]=V.x,Ra[Ka+7]=V.y,Ra[Ka+8]=V.z),Ka+=9;n.bindBuffer(n.ARRAY_BUFFER,y.Ee[na]);n.bufferData(n.ARRAY_BUFFER,Gb[na],D);G.Ia&&(n.bindBuffer(n.ARRAY_BUFFER,y.jf[na]),n.bufferData(n.ARRAY_BUFFER,Ib[na],D))}if(nc.length){A=0;for(J=ka.length;A<
J;A++)E=pb[ka[A]],ja=nc[E.N],Ta=nc[E.i],db=nc[E.O],gb[za]=ja.x,gb[za+1]=ja.y,gb[za+2]=ja.z,gb[za+3]=ja.f,gb[za+4]=Ta.x,gb[za+5]=Ta.y,gb[za+6]=Ta.z,gb[za+7]=Ta.f,gb[za+8]=db.x,gb[za+9]=db.y,gb[za+10]=db.z,gb[za+11]=db.f,oa=Ec[E.N],Sa=Ec[E.i],ra=Ec[E.O],fb[za]=oa.x,fb[za+1]=oa.y,fb[za+2]=oa.z,fb[za+3]=oa.f,fb[za+4]=Sa.x,fb[za+5]=Sa.y,fb[za+6]=Sa.z,fb[za+7]=Sa.f,fb[za+8]=ra.x,fb[za+9]=ra.y,fb[za+10]=ra.z,fb[za+11]=ra.f,za+=12;0<za&&(n.bindBuffer(n.ARRAY_BUFFER,y.Eg),n.bufferData(n.ARRAY_BUFFER,fb,D),
n.bindBuffer(n.ARRAY_BUFFER,y.Fg),n.bufferData(n.ARRAY_BUFFER,gb,D))}if(hc&&I){A=0;for(J=ka.length;A<J;A++)E=pb[ka[A]],$=E.q,T=E.color,3===$.length&&I===c.Md?(Aa=$[0],U=$[1],ea=$[2]):ea=U=Aa=T,ob[hb]=Aa.C,ob[hb+1]=Aa.B,ob[hb+2]=Aa.i,ob[hb+3]=U.C,ob[hb+4]=U.B,ob[hb+5]=U.i,ob[hb+6]=ea.C,ob[hb+7]=ea.B,ob[hb+8]=ea.i,hb+=9;0<hb&&(n.bindBuffer(n.ARRAY_BUFFER,y.bc),n.bufferData(n.ARRAY_BUFFER,ob,D))}if(gc&&Ua.Fi){A=0;for(J=ka.length;A<J;A++)E=pb[ka[A]],S=E.Ad,la=S[0],W=S[1],qa=S[2],eb[bb]=la.x,eb[bb+1]=
la.y,eb[bb+2]=la.z,eb[bb+3]=la.f,eb[bb+4]=W.x,eb[bb+5]=W.y,eb[bb+6]=W.z,eb[bb+7]=W.f,eb[bb+8]=qa.x,eb[bb+9]=qa.y,eb[bb+10]=qa.z,eb[bb+11]=qa.f,bb+=12;n.bindBuffer(n.ARRAY_BUFFER,y.Gg);n.bufferData(n.ARRAY_BUFFER,eb,D)}if(ec&&F){A=0;for(J=ka.length;A<J;A++)if(E=pb[ka[A]],P=E.ka,ua=E.D,3===P.length&&O)for(sa=0;3>sa;sa++)Ca=P[sa],Lb[mb]=Ca.x,Lb[mb+1]=Ca.y,Lb[mb+2]=Ca.z,mb+=3;else for(sa=0;3>sa;sa++)Lb[mb]=ua.x,Lb[mb+1]=ua.y,Lb[mb+2]=ua.z,mb+=3;n.bindBuffer(n.ARRAY_BUFFER,y.Pd);n.bufferData(n.ARRAY_BUFFER,
Lb,D)}if(Kb&&Xb&&K){A=0;for(J=ka.length;A<J;A++)if(R=ka[A],Z=Xb[R],void 0!==Z)for(sa=0;3>sa;sa++)Ga=Z[sa],vb[ab]=Ga.x,vb[ab+1]=Ga.y,ab+=2;0<ab&&(n.bindBuffer(n.ARRAY_BUFFER,y.Ig),n.bufferData(n.ARRAY_BUFFER,vb,D))}if(Kb&&Yb&&K){A=0;for(J=ka.length;A<J;A++)if(R=ka[A],aa=Yb[R],void 0!==aa)for(sa=0;3>sa;sa++)Ha=aa[sa],Bb[Xa]=Ha.x,Bb[Xa+1]=Ha.y,Xa+=2;0<Xa&&(n.bindBuffer(n.ARRAY_BUFFER,y.Hg),n.bufferData(n.ARRAY_BUFFER,Bb,D))}if(Tb){A=0;for(J=ka.length;A<J;A++)xb[cb]=Ba,xb[cb+1]=Ba+1,xb[cb+2]=Ba+2,cb+=
3,Mb[Eb]=Ba,Mb[Eb+1]=Ba+1,Mb[Eb+2]=Ba,Mb[Eb+3]=Ba+2,Mb[Eb+4]=Ba+1,Mb[Eb+5]=Ba+2,Eb+=6,Ba+=3;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y.Bg);n.bufferData(n.ELEMENT_ARRAY_BUFFER,xb,D);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y.Cg);n.bufferData(n.ELEMENT_ARRAY_BUFFER,Mb,D)}if(Db)for(sa=0,Ja=Db.length;sa<Ja;sa++)if(H=Db[sa],H.fn.G){N=0;if(1===H.size)if(void 0===H.Fa||"vertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)E=pb[ka[A]],H.d[N]=H.value[E.N],H.d[N+1]=H.value[E.i],H.d[N+2]=H.value[E.O],N+=3;else{if("faces"===H.Fa)for(A=
0,J=ka.length;A<J;A++)Ya=H.value[ka[A]],H.d[N]=Ya,H.d[N+1]=Ya,H.d[N+2]=Ya,N+=3}else if(2===H.size)if(void 0===H.Fa||"vertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)E=pb[ka[A]],ga=H.value[E.N],ha=H.value[E.i],ia=H.value[E.O],H.d[N]=ga.x,H.d[N+1]=ga.y,H.d[N+2]=ha.x,H.d[N+3]=ha.y,H.d[N+4]=ia.x,H.d[N+5]=ia.y,N+=6;else{if("faces"===H.Fa)for(A=0,J=ka.length;A<J;A++)ia=ha=ga=Ya=H.value[ka[A]],H.d[N]=ga.x,H.d[N+1]=ga.y,H.d[N+2]=ha.x,H.d[N+3]=ha.y,H.d[N+4]=ia.x,H.d[N+5]=ia.y,N+=6}else if(3===H.size){var wa;
wa="c"===H.type?["r","g","b"]:["x","y","z"];if(void 0===H.Fa||"vertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)E=pb[ka[A]],ga=H.value[E.N],ha=H.value[E.i],ia=H.value[E.O],H.d[N]=ga[wa[0]],H.d[N+1]=ga[wa[1]],H.d[N+2]=ga[wa[2]],H.d[N+3]=ha[wa[0]],H.d[N+4]=ha[wa[1]],H.d[N+5]=ha[wa[2]],H.d[N+6]=ia[wa[0]],H.d[N+7]=ia[wa[1]],H.d[N+8]=ia[wa[2]],N+=9;else if("faces"===H.Fa)for(A=0,J=ka.length;A<J;A++)ia=ha=ga=Ya=H.value[ka[A]],H.d[N]=ga[wa[0]],H.d[N+1]=ga[wa[1]],H.d[N+2]=ga[wa[2]],H.d[N+3]=ha[wa[0]],H.d[N+4]=
ha[wa[1]],H.d[N+5]=ha[wa[2]],H.d[N+6]=ia[wa[0]],H.d[N+7]=ia[wa[1]],H.d[N+8]=ia[wa[2]],N+=9;else if("faceVertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)Ya=H.value[ka[A]],ga=Ya[0],ha=Ya[1],ia=Ya[2],H.d[N]=ga[wa[0]],H.d[N+1]=ga[wa[1]],H.d[N+2]=ga[wa[2]],H.d[N+3]=ha[wa[0]],H.d[N+4]=ha[wa[1]],H.d[N+5]=ha[wa[2]],H.d[N+6]=ia[wa[0]],H.d[N+7]=ia[wa[1]],H.d[N+8]=ia[wa[2]],N+=9}else if(4===H.size)if(void 0===H.Fa||"vertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)E=pb[ka[A]],ga=H.value[E.N],ha=H.value[E.i],ia=H.value[E.O],
H.d[N]=ga.x,H.d[N+1]=ga.y,H.d[N+2]=ga.z,H.d[N+3]=ga.f,H.d[N+4]=ha.x,H.d[N+5]=ha.y,H.d[N+6]=ha.z,H.d[N+7]=ha.f,H.d[N+8]=ia.x,H.d[N+9]=ia.y,H.d[N+10]=ia.z,H.d[N+11]=ia.f,N+=12;else if("faces"===H.Fa)for(A=0,J=ka.length;A<J;A++)ia=ha=ga=Ya=H.value[ka[A]],H.d[N]=ga.x,H.d[N+1]=ga.y,H.d[N+2]=ga.z,H.d[N+3]=ga.f,H.d[N+4]=ha.x,H.d[N+5]=ha.y,H.d[N+6]=ha.z,H.d[N+7]=ha.f,H.d[N+8]=ia.x,H.d[N+9]=ia.y,H.d[N+10]=ia.z,H.d[N+11]=ia.f,N+=12;else if("faceVertices"===H.Fa)for(A=0,J=ka.length;A<J;A++)Ya=H.value[ka[A]],
ga=Ya[0],ha=Ya[1],ia=Ya[2],H.d[N]=ga.x,H.d[N+1]=ga.y,H.d[N+2]=ga.z,H.d[N+3]=ga.f,H.d[N+4]=ha.x,H.d[N+5]=ha.y,H.d[N+6]=ha.z,H.d[N+7]=ha.f,H.d[N+8]=ia.x,H.d[N+9]=ia.y,H.d[N+10]=ia.z,H.d[N+11]=ia.f,N+=12;n.bindBuffer(n.ARRAY_BUFFER,H.buffer);n.bufferData(n.ARRAY_BUFFER,H.d,D)}C&&(delete y.fk,delete y.Ae,delete y.jk,delete y.mk,delete y.ok,delete y.nk,delete y.ek,delete y.De,delete y.gk,delete y.kk,delete y.lk)}}f.Ya=!1;f.Li=!1;f.Qg=!1;f.Bh=!1;f.Sf=!1;f.Ab=!1;f.xh=!1;f.qi=!1;k.attributes&&Q(k)}else if(b instanceof
c.T){k=q(b,f);h=k.attributes&&ca(k);if(f.Ya||f.Ab||f.bh||h){var pc=n.DYNAMIC_DRAW,bc,cc,dc,qc,va,rc,$b=f.e,ac=f.ha,fc=f.zo,xc=$b.length,yc=ac.length,zc=fc.length,sc=f.De,tc=f.Ae,Wc=f.dn,Kc=f.Ab,Lc=f.bh,Fc=f.ob,uc,Xc,La,Ub,Va,ta;if(f.Ya){for(bc=0;bc<xc;bc++)qc=$b[bc],va=3*bc,sc[va]=qc.x,sc[va+1]=qc.y,sc[va+2]=qc.z;n.bindBuffer(n.ARRAY_BUFFER,f.gb);n.bufferData(n.ARRAY_BUFFER,sc,pc)}if(Kc){for(cc=0;cc<yc;cc++)rc=ac[cc],va=3*cc,tc[va]=rc.C,tc[va+1]=rc.B,tc[va+2]=rc.i;n.bindBuffer(n.ARRAY_BUFFER,f.bc);
n.bufferData(n.ARRAY_BUFFER,tc,pc)}if(Lc){for(dc=0;dc<zc;dc++)Wc[dc]=fc[dc];n.bindBuffer(n.ARRAY_BUFFER,f.Dg);n.bufferData(n.ARRAY_BUFFER,Wc,pc)}if(Fc)for(uc=0,Xc=Fc.length;uc<Xc;uc++)if(ta=Fc[uc],ta.G&&(void 0===ta.Fa||"vertices"===ta.Fa)){va=0;Ub=ta.value.length;if(1===ta.size)for(La=0;La<Ub;La++)ta.d[La]=ta.value[La];else if(2===ta.size)for(La=0;La<Ub;La++)Va=ta.value[La],ta.d[va]=Va.x,ta.d[va+1]=Va.y,va+=2;else if(3===ta.size)if("c"===ta.type)for(La=0;La<Ub;La++)Va=ta.value[La],ta.d[va]=Va.C,
ta.d[va+1]=Va.B,ta.d[va+2]=Va.i,va+=3;else for(La=0;La<Ub;La++)Va=ta.value[La],ta.d[va]=Va.x,ta.d[va+1]=Va.y,ta.d[va+2]=Va.z,va+=3;else if(4===ta.size)for(La=0;La<Ub;La++)Va=ta.value[La],ta.d[va]=Va.x,ta.d[va+1]=Va.y,ta.d[va+2]=Va.z,ta.d[va+3]=Va.f,va+=4;n.bindBuffer(n.ARRAY_BUFFER,ta.buffer);n.bufferData(n.ARRAY_BUFFER,ta.d,pc)}}f.Ya=!1;f.Ab=!1;f.bh=!1;k.attributes&&Q(k)}else if(b instanceof c.$b){k=q(b,f);h=k.attributes&&ca(k);if(f.Ya||f.Ab||b.ke||h){var Gc=n.DYNAMIC_DRAW,Wa,qb,rb,Y,sb,Fb,vc=f.e,
Hc=vc.length,Ic=f.ha,Yc=Ic.length,Nb=f.De,Ob=f.Ae,zb=f.hn,Zc=f.Ya,$c=f.Ab,Ab=f.ob,ib,Vb,fa,jb,pa,X;if(b.ke){mc.c(yb);mc.multiply(b.l);for(Wa=0;Wa<Hc;Wa++)rb=vc[Wa],Da.c(rb),Hb(Da,mc),zb[Wa]=[Da.z,Wa];zb.sort(z);for(Wa=0;Wa<Hc;Wa++)rb=vc[zb[Wa][1]],Y=3*Wa,Nb[Y]=rb.x,Nb[Y+1]=rb.y,Nb[Y+2]=rb.z;for(qb=0;qb<Yc;qb++)Y=3*qb,Fb=Ic[zb[qb][1]],Ob[Y]=Fb.C,Ob[Y+1]=Fb.B,Ob[Y+2]=Fb.i;if(Ab)for(ib=0,Vb=Ab.length;ib<Vb;ib++)if(X=Ab[ib],void 0===X.Fa||"vertices"===X.Fa)if(Y=0,jb=X.value.length,1===X.size)for(fa=0;fa<
jb;fa++)sb=zb[fa][1],X.d[fa]=X.value[sb];else if(2===X.size)for(fa=0;fa<jb;fa++)sb=zb[fa][1],pa=X.value[sb],X.d[Y]=pa.x,X.d[Y+1]=pa.y,Y+=2;else if(3===X.size)if("c"===X.type)for(fa=0;fa<jb;fa++)sb=zb[fa][1],pa=X.value[sb],X.d[Y]=pa.C,X.d[Y+1]=pa.B,X.d[Y+2]=pa.i,Y+=3;else for(fa=0;fa<jb;fa++)sb=zb[fa][1],pa=X.value[sb],X.d[Y]=pa.x,X.d[Y+1]=pa.y,X.d[Y+2]=pa.z,Y+=3;else if(4===X.size)for(fa=0;fa<jb;fa++)sb=zb[fa][1],pa=X.value[sb],X.d[Y]=pa.x,X.d[Y+1]=pa.y,X.d[Y+2]=pa.z,X.d[Y+3]=pa.f,Y+=4}else{if(Zc)for(Wa=
0;Wa<Hc;Wa++)rb=vc[Wa],Y=3*Wa,Nb[Y]=rb.x,Nb[Y+1]=rb.y,Nb[Y+2]=rb.z;if($c)for(qb=0;qb<Yc;qb++)Fb=Ic[qb],Y=3*qb,Ob[Y]=Fb.C,Ob[Y+1]=Fb.B,Ob[Y+2]=Fb.i;if(Ab)for(ib=0,Vb=Ab.length;ib<Vb;ib++)if(X=Ab[ib],X.G&&(void 0===X.Fa||"vertices"===X.Fa))if(jb=X.value.length,Y=0,1===X.size)for(fa=0;fa<jb;fa++)X.d[fa]=X.value[fa];else if(2===X.size)for(fa=0;fa<jb;fa++)pa=X.value[fa],X.d[Y]=pa.x,X.d[Y+1]=pa.y,Y+=2;else if(3===X.size)if("c"===X.type)for(fa=0;fa<jb;fa++)pa=X.value[fa],X.d[Y]=pa.C,X.d[Y+1]=pa.B,X.d[Y+
2]=pa.i,Y+=3;else for(fa=0;fa<jb;fa++)pa=X.value[fa],X.d[Y]=pa.x,X.d[Y+1]=pa.y,X.d[Y+2]=pa.z,Y+=3;else if(4===X.size)for(fa=0;fa<jb;fa++)pa=X.value[fa],X.d[Y]=pa.x,X.d[Y+1]=pa.y,X.d[Y+2]=pa.z,X.d[Y+3]=pa.f,Y+=4}if(Zc||b.ke)n.bindBuffer(n.ARRAY_BUFFER,f.gb),n.bufferData(n.ARRAY_BUFFER,Nb,Gc);if($c||b.ke)n.bindBuffer(n.ARRAY_BUFFER,f.bc),n.bufferData(n.ARRAY_BUFFER,Ob,Gc);if(Ab)for(ib=0,Vb=Ab.length;ib<Vb;ib++)if(X=Ab[ib],X.G||b.ke)n.bindBuffer(n.ARRAY_BUFFER,X.buffer),n.bufferData(n.ARRAY_BUFFER,X.d,
Gc)}f.Ya=!1;f.Ab=!1;k.attributes&&Q(k)}for(var Pb=0,Jc=e.length;Pb<Jc;Pb++){var wc=e[Pb],tb=wc,ad=tb.object,Mc=tb.buffer,Nc=ad.j,ub=ad.r;ub instanceof c.dd?(ub=ub.Ta[Nc instanceof c.ta?0:Mc.Eb],ub.bb?(tb.r=ub,ma.push(tb)):(tb.r=ub,ya.push(tb))):ub&&(ub.bb?(tb.r=ub,ma.push(tb)):(tb.r=ub,ya.push(tb)));wc.t=!0;!0===M.wh&&(null!==b.We?wc.z=b.We:(lb(Da,b.l),Hb(Da,yb),wc.z=Da.z))}}Pb=0;for(Jc=b.children.length;Pb<Jc;Pb++)B(a,b.children[Pb],d)}}function G(a,b,d){if(0!==a.length)for(var e=0,f=a.length;e<
f;e++)ja=Ca=null,Ha=oa=Na=Pa=Gb=Ba=Fa=-1,Bb=!0,a[e].t(b,d,$b,ac),ja=Ca=null,Ha=oa=Na=Pa=Gb=Ba=Fa=-1,Bb=!0}function K(a,b,d,e,f,g){for(var h,k,n,l=a.length-1;-1!==l;l--){h=a[l];k=h.object;n=h.buffer;I(k,b);if(g)h=g;else{h=h.r;if(!h)continue;f&&M.Xe(h.Na,h.blendEquation,h.Xd,h.Wd);M.he(h.xc);M.$f(h.yc);S(h.polygonOffset,h.Xf,h.Yf)}M.oh(h);n instanceof c.ta?M.Ui(b,d,e,h,n,k):M.Ti(b,d,e,h,n,k)}}function y(a,b,d,e,f,g,h){for(var k,n,l=0,m=a.length;l<m;l++)if(k=a[l],n=k.object,n.visible){if(h)k=h;else{k=
k[b];if(!k)continue;g&&M.Xe(k.Na,k.blendEquation,k.Xd,k.Wd);M.he(k.xc);M.$f(k.yc);S(k.polygonOffset,k.Xf,k.Yf)}M.Vi(d,e,f,k,n)}}function C(a){var b=a.object.r;b.bb?(a.bb=b,a.kl=null):(a.kl=b,a.bb=null)}function L(a,b,d){var e,f=!1;e=b.r;if(void 0===d.Ac||d.Vg)delete a.qc[b.id],d.Ao(e instanceof c.dd,Kb?4294967296:65535),d.Vg=!1;for(var g=0,h=d.Bc.length;g<h;g++){e=d.Bc[g];if(e.gb)f=!1;else{f=e;f.gb=n.createBuffer();f.Pd=n.createBuffer();f.Gg=n.createBuffer();f.bc=n.createBuffer();f.Ig=n.createBuffer();
f.Hg=n.createBuffer();f.Eg=n.createBuffer();f.Fg=n.createBuffer();f.Bg=n.createBuffer();f.Cg=n.createBuffer();var k=void 0,l=void 0;if(f.Uf)for(f.Ee=[],k=0,l=f.Uf;k<l;k++)f.Ee.push(n.createBuffer());if(f.Tf)for(f.jf=[],k=0,l=f.Tf;k<l;k++)f.jf.push(n.createBuffer());M.info.memory.Pe++;m(e,b);d.Ya=!0;d.Li=!0;d.Qg=!0;d.Bh=!0;d.Sf=!0;d.xh=!0;f=d.Ab=!0}(f||void 0===b.hf)&&R(a.qc,e,b)}b.hf=!0}function R(a,b,d){var e=d.id;a[e]=a[e]||[];a[e].push({id:e,buffer:b,object:d,r:null,z:0})}function ca(a){for(var b in a.attributes)if(a.attributes[b].G)return!0;
return!1}function Q(a){for(var b in a.attributes)a.attributes[b].G=!1}function E(a,b){if(a instanceof c.V||a instanceof c.$b||a instanceof c.T)delete b.qc[a.id];else if(a instanceof c.Lh||a.Hi)for(var d=b.hd,e=d.length-1;0<=e;e--)d[e].object===a&&d.splice(e,1);delete a.hf}function A(a,b,e,f,g){ra=0;f.G&&(f.Wa&&d(f),M.wo(f,b,e,g),f.G=!1);f.w&&!g.kf&&(g.kf=new Float32Array(M.Nf));var k=!1,l=!1,m=!1,q=f.Wa,p=q.M,r=f.Qd.M;q.id!==Ca&&(n.useProgram(q.Wa),Ca=q.id,m=l=k=!0);f.id!==Ha&&(-1===Ha&&(m=!0),Ha=
f.id,l=!0);if(k||a!==ja)n.uniformMatrix4fv(p.xa,!1,a.xa.elements),Ra&&n.uniform1f(p.br,2/(Math.log(a.Ra+1)/Math.LN2)),a!==ja&&(ja=a),(f instanceof c.Da||f instanceof c.Zb||f.ma)&&null!==p.Kn&&(lb(Da,a.l),n.uniform3f(p.Kn,Da.x,Da.y,Da.z)),(f instanceof c.Zb||f instanceof c.Lb||f instanceof c.Da||f.sa)&&null!==p.Ep&&n.uniformMatrix4fv(p.Ep,!1,a.Ca.elements);f.sa&&(g.He&&null!==p.He&&n.uniformMatrix4fv(p.He,!1,g.He.elements),g.Vd&&null!==p.Vd&&n.uniformMatrix4fv(p.Vd,!1,g.Vd.elements),ec&&g.Xa&&g.Xa.bd?
(null!==p.nd&&(k=J(),n.uniform1i(p.nd,k),M.Ye(g.Xa.nd,k)),null!==p.qf&&n.uniform1i(p.qf,g.Xa.qf),null!==p.pf&&n.uniform1i(p.pf,g.Xa.pf)):g.Xa&&g.Xa.of&&null!==p.In&&n.uniformMatrix4fv(p.In,!1,g.Xa.of));if(l){e&&f.K&&(r.Nq.value=e.color,e instanceof c.rg?(r.Qq.value=e.Va,r.Pq.value=e.Ra):e instanceof c.ef&&(r.Oq.value=e.vi));if(f instanceof c.Zb||f instanceof c.Lb||f.Tc){if(Bb){var m=!0,s,u=k=0,t=0,v,x,w,y=fc,z=y.zf.ha,D=y.zf.gc,B=y.fe.ha,A=y.fe.gc,G=y.fe.Af,C=y.Hb.ha,E=y.Hb.gc,I=y.Hb.Af,L=y.Hb.Gk,
K=y.Hb.xk,R=y.Hb.Hk,P=y.ae.El,Q=y.ae.Pk,ca=y.ae.gc,S=0,T=0,la=0,W=0,qa=0,ba=0,Ea=0,Aa=0,U=s=0;e=w=U=0;for(l=b.length;e<l;e++)s=b[e],s.wd||(v=s.color,x=s.ga,w=s.Ba,s instanceof c.le?s.visible&&(M.zc?(k+=v.C*v.C,u+=v.B*v.B,t+=v.i*v.i):(k+=v.C,u+=v.B,t+=v.i)):s instanceof c.sb?(qa+=1,s.visible&&(lb(xa,s.l),lb(Da,s.target.l),xa.sub(Da),xa.normalize(),s=3*S,D[s]=xa.x,D[s+1]=xa.y,D[s+2]=xa.z,M.zc?$(z,s,v,x*x):O(z,s,v,x),S+=1)):s instanceof c.fd?(ba+=1,s.visible&&(U=3*T,M.zc?$(B,U,v,x*x):O(B,U,v,x),lb(Da,
s.l),A[U]=Da.x,A[U+1]=Da.y,A[U+2]=Da.z,G[T]=w,T+=1)):s instanceof c.Lc?(Ea+=1,s.visible&&(U=3*la,M.zc?$(C,U,v,x*x):O(C,U,v,x),lb(Da,s.l),E[U]=Da.x,E[U+1]=Da.y,E[U+2]=Da.z,I[la]=w,xa.c(Da),lb(Da,s.target.l),xa.sub(Da),xa.normalize(),L[U]=xa.x,L[U+1]=xa.y,L[U+2]=xa.z,K[la]=Math.cos(s.mf),R[la]=s.Rg,la+=1)):s instanceof c.pe&&(Aa+=1,s.visible&&(lb(xa,s.l),xa.normalize(),w=3*W,ca[w]=xa.x,ca[w+1]=xa.y,ca[w+2]=xa.z,v=s.color,s=s.If,M.zc?(x*=x,$(P,w,v,x),$(Q,w,s,x)):(O(P,w,v,x),O(Q,w,s,x)),W+=1)));e=3*S;
for(l=Math.max(z.length,3*qa);e<l;e++)z[e]=0;e=3*T;for(l=Math.max(B.length,3*ba);e<l;e++)B[e]=0;e=3*la;for(l=Math.max(C.length,3*Ea);e<l;e++)C[e]=0;e=3*W;for(l=Math.max(P.length,3*Aa);e<l;e++)P[e]=0;e=3*W;for(l=Math.max(Q.length,3*Aa);e<l;e++)Q[e]=0;y.zf.length=S;y.fe.length=T;y.Hb.length=la;y.ae.length=W;y.ra[0]=k;y.ra[1]=u;y.ra[2]=t;Bb=!1}m?(m=fc,r.tn.value=m.ra,r.Vn.value=m.zf.ha,r.Wn.value=m.zf.gc,r.So.value=m.fe.ha,r.Uo.value=m.fe.gc,r.To.value=m.fe.Af,r.np.value=m.Hb.ha,r.rp.value=m.Hb.gc,r.pp.value=
m.Hb.Af,r.op.value=m.Hb.Gk,r.mp.value=m.Hb.xk,r.qp.value=m.Hb.Hk,r.ro.value=m.ae.El,r.qo.value=m.ae.Pk,r.po.value=m.ae.gc,F(r,!0)):F(r,!1)}if(f instanceof c.vb||f instanceof c.Lb||f instanceof c.Zb){r.opacity.value=f.opacity;M.zc?$a(r.xi.value,f.color):r.xi.value=f.color;r.map.value=f.map;r.Sa.value=f.Sa;r.La.value=f.La;r.$a.value=f.$a;f.pb&&(r.pb.value=f.pb,r.rf.value=f.rf);f.lb&&(r.lb.value=f.lb,r.hh.value.c(f.hh));var V;f.map?V=f.map:f.La?V=f.La:f.lb?V=f.lb:f.pb?V=f.pb:f.$a&&(V=f.$a);void 0!==
V&&(m=V.offset,V=V.repeat,r.Kr.value.set(m.x,m.y,V.x,V.y));r.ma.value=f.ma;r.Mq.value=f.ma instanceof c.Od?1:-1;r.Ec.value=f.Ec;r.Fc.value=f.Fc;r.uc.value=f.uc;r.ls.value=f.ma&&f.ma.Re instanceof c.bm}f instanceof c.za?(r.xi.value=f.color,r.opacity.value=f.opacity):f instanceof c.se?(r.xi.value=f.color,r.opacity.value=f.opacity,r.Je.value=f.Je,r.js.value=f.Je+f.Tg,r.scale.value=f.scale):f instanceof c.ed?(r.Qr.value=f.color,r.opacity.value=f.opacity,r.size.value=f.size,r.scale.value=ua.height/2,r.map.value=
f.map):f instanceof c.Zb?(r.ad.value=f.ad,M.zc?($a(r.ra.value,f.ra),$a(r.Qa.value,f.Qa),$a(r.ic.value,f.ic)):(r.ra.value=f.ra,r.Qa.value=f.Qa,r.ic.value=f.ic),f.lc&&r.cd.value.c(f.cd)):f instanceof c.Lb?(M.zc?($a(r.ra.value,f.ra),$a(r.Qa.value,f.Qa)):(r.ra.value=f.ra,r.Qa.value=f.Qa),f.lc&&r.cd.value.c(f.cd)):f instanceof c.Gd?(r.dr.value=a.Va,r.cr.value=a.Ra,r.opacity.value=f.opacity):f instanceof c.ue&&(r.opacity.value=f.opacity);if(g.kh&&!f.kd&&r.$e)for(V=a=0,m=b.length;V<m;V++)e=b[V],e.qb&&(e instanceof
c.Lc||e instanceof c.sb&&!e.fg)&&(r.Ze.value[a]=e.Ze,r.uh.value[a]=e.uh,r.$e.value[a]=e.$e,r.hc.value[a]=e.hc,r.Vc.value[a]=e.Vc,a++);b=f.Ml;f=0;for(r=b.length;f<r;f++)if(a=b[f][0],!1!==a.G)switch(e=a.type,m=a.value,V=b[f][1],e){case "1i":n.uniform1i(V,m);break;case "1f":n.uniform1f(V,m);break;case "2f":n.uniform2f(V,m[0],m[1]);break;case "3f":n.uniform3f(V,m[0],m[1],m[2]);break;case "4f":n.uniform4f(V,m[0],m[1],m[2],m[3]);break;case "1iv":n.uniform1iv(V,m);break;case "3iv":n.uniform3iv(V,m);break;
case "1fv":n.uniform1fv(V,m);break;case "2fv":n.uniform2fv(V,m);break;case "3fv":n.uniform3fv(V,m);break;case "4fv":n.uniform4fv(V,m);break;case "Matrix3fv":n.uniformMatrix3fv(V,!1,m);break;case "Matrix4fv":n.uniformMatrix4fv(V,!1,m);break;case "i":n.uniform1i(V,m);break;case "f":n.uniform1f(V,m);break;case "v2":n.uniform2f(V,m.x,m.y);break;case "v3":n.uniform3f(V,m.x,m.y,m.z);break;case "v4":n.uniform4f(V,m.x,m.y,m.z,m.f);break;case "c":n.uniform3f(V,m.C,m.B,m.i);break;case "iv1":n.uniform1iv(V,
m);break;case "iv":n.uniform3iv(V,m);break;case "fv1":n.uniform1fv(V,m);break;case "fv":n.uniform3fv(V,m);break;case "v2v":void 0===a.$&&(a.$=new Float32Array(2*m.length));e=0;for(l=m.length;e<l;e++)k=2*e,a.$[k]=m[e].x,a.$[k+1]=m[e].y;n.uniform2fv(V,a.$);break;case "v3v":void 0===a.$&&(a.$=new Float32Array(3*m.length));e=0;for(l=m.length;e<l;e++)k=3*e,a.$[k]=m[e].x,a.$[k+1]=m[e].y,a.$[k+2]=m[e].z;n.uniform3fv(V,a.$);break;case "v4v":void 0===a.$&&(a.$=new Float32Array(4*m.length));e=0;for(l=m.length;e<
l;e++)k=4*e,a.$[k]=m[e].x,a.$[k+1]=m[e].y,a.$[k+2]=m[e].z,a.$[k+3]=m[e].f;n.uniform4fv(V,a.$);break;case "m3":n.uniformMatrix3fv(V,!1,m.elements);break;case "m3v":void 0===a.$&&(a.$=new Float32Array(9*m.length));e=0;for(l=m.length;e<l;e++)m[e].Sg(a.$,9*e);n.uniformMatrix3fv(V,!1,a.$);break;case "m4":n.uniformMatrix4fv(V,!1,m.elements);break;case "m4v":void 0===a.$&&(a.$=new Float32Array(16*m.length));e=0;for(l=m.length;e<l;e++)m[e].Sg(a.$,16*e);n.uniformMatrix4fv(V,!1,a.$);break;case "t":k=m;m=J();
n.uniform1i(V,m);if(!k)continue;if(k instanceof c.bf||k.Z instanceof Array&&6===k.Z.length){if(a=k,V=m,6===a.Z.length)if(a.G){a.Z.lf||(a.addEventListener("dispose",h),a.Z.lf=n.createTexture(),M.info.memory.jg++);n.activeTexture(n.TEXTURE0+V);n.bindTexture(n.TEXTURE_CUBE_MAP,a.Z.lf);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,a.Ne);V=a instanceof c.oe;m=[];for(e=0;6>e;e++)l=e,M.yn&&!V?(k=a.Z[e],t=Kc,k.width<=t&&k.height<=t||(y=Math.max(k.width,k.height),u=Math.floor(k.width*t/y),t=Math.floor(k.height*t/y),
y=document.createElement("canvas"),y.width=u,y.height=t,y.getContext("2d").drawImage(k,0,0,k.width,k.height,0,0,u,t),k=y)):k=a.Z[e],m[l]=k;e=m[0];l=c.Math.td(e.width)&&c.Math.td(e.height);k=Z(a.format);u=Z(a.type);aa(n.TEXTURE_CUBE_MAP,a,l);for(e=0;6>e;e++)if(V)for(y=m[e].Pf,z=0,D=y.length;z<D;z++)t=y[z],a.format!==c.Jd?n.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,z,k,t.width,t.height,0,t.data):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,z,k,t.width,t.height,0,k,u,t.data);else n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+
e,0,k,k,u,m[e]);a.Qb&&l&&n.generateMipmap(n.TEXTURE_CUBE_MAP);a.G=!1;a.ih&&a.ih()}else n.activeTexture(n.TEXTURE0+V),n.bindTexture(n.TEXTURE_CUBE_MAP,a.Z.lf)}else k instanceof c.Od?(a=k,n.activeTexture(n.TEXTURE0+m),n.bindTexture(n.TEXTURE_CUBE_MAP,a.yb)):M.Ye(k,m);break;case "tv":void 0===a.$&&(a.$=[]);e=0;for(l=a.value.length;e<l;e++)a.$[e]=J();n.uniform1iv(V,a.$);e=0;for(l=a.value.length;e<l;e++)k=a.value[e],m=a.$[e],k&&M.Ye(k,m);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+
e)}}n.uniformMatrix4fv(p.Ir,!1,g.rc.elements);p.de&&n.uniformMatrix3fv(p.de,!1,g.sk.elements);null!==p.Ko&&n.uniformMatrix4fv(p.Ko,!1,g.l.elements);return q}function F(a,b){a.tn.G=b;a.Vn.G=b;a.Wn.G=b;a.So.G=b;a.Uo.G=b;a.To.G=b;a.np.G=b;a.rp.G=b;a.pp.G=b;a.op.G=b;a.mp.G=b;a.qp.G=b;a.ro.G=b;a.qo.G=b;a.po.G=b}function J(){var a=ra;a>=xc&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+xc);ra+=1;return a}function I(a,b){Wb(a.rc,b.Ca,a.l);Sb(a.sk,a.rc)}function $(a,
b,d,e){a[b]=d.C*d.C*e;a[b+1]=d.B*d.B*e;a[b+2]=d.i*d.i*e}function O(a,b,d,e){a[b]=d.C*e;a[b+1]=d.B*e;a[b+2]=d.i*e}function T(a){a!==Zb&&(n.lineWidth(a),Zb=a)}function S(a,b,d){lc!==a&&(a?n.enable(n.POLYGON_OFFSET_FILL):n.disable(n.POLYGON_OFFSET_FILL),lc=a);!a||Xb===b&&Yb===d||(n.polygonOffset(b,d),Xb=b,Yb=d)}function aa(a,b,d){d?(n.texParameteri(a,n.TEXTURE_WRAP_S,Z(b.mc)),n.texParameteri(a,n.TEXTURE_WRAP_T,Z(b.nc)),n.texParameteri(a,n.TEXTURE_MAG_FILTER,Z(b.Sb)),n.texParameteri(a,n.TEXTURE_MIN_FILTER,
Z(b.rb))):(n.texParameteri(a,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(a,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(a,n.TEXTURE_MAG_FILTER,ba(b.Sb)),n.texParameteri(a,n.TEXTURE_MIN_FILTER,ba(b.rb)));vb&&b.type!==c.Jh&&(1<b.cc||b.en)&&(n.texParameterf(a,vb.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.cc,Lc)),b.en=b.cc)}function P(a,b){n.bindRenderbuffer(n.RENDERBUFFER,a);b.wc&&!b.Hc?(n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,b.width,b.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,
n.DEPTH_ATTACHMENT,n.RENDERBUFFER,a)):b.wc&&b.Hc?(n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,b.width,b.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)):n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,b.width,b.height)}function W(a){a instanceof c.Od?(n.bindTexture(n.TEXTURE_CUBE_MAP,a.yb),n.generateMipmap(n.TEXTURE_CUBE_MAP),n.bindTexture(n.TEXTURE_CUBE_MAP,null)):(n.bindTexture(n.TEXTURE_2D,a.yb),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,
null))}function ba(a){return a===c.ve||a===c.Dj||a===c.Cj?n.NEAREST:n.LINEAR}function Z(a){if(a===c.xe)return n.REPEAT;if(a===c.af)return n.CLAMP_TO_EDGE;if(a===c.Aj)return n.MIRRORED_REPEAT;if(a===c.ve)return n.NEAREST;if(a===c.Dj)return n.NEAREST_MIPMAP_NEAREST;if(a===c.Cj)return n.NEAREST_MIPMAP_LINEAR;if(a===c.Fd)return n.LINEAR;if(a===c.rm)return n.LINEAR_MIPMAP_NEAREST;if(a===c.Ph)return n.LINEAR_MIPMAP_LINEAR;if(a===c.bi)return n.UNSIGNED_BYTE;if(a===c.Xm)return n.UNSIGNED_SHORT_4_4_4_4;if(a===
c.Ym)return n.UNSIGNED_SHORT_5_5_5_1;if(a===c.Zm)return n.UNSIGNED_SHORT_5_6_5;if(a===c.Yl)return n.BYTE;if(a===c.Mm)return n.SHORT;if(a===c.$m)return n.UNSIGNED_SHORT;if(a===c.nm)return n.INT;if(a===c.Wm)return n.UNSIGNED_INT;if(a===c.Jh)return n.FLOAT;if(a===c.Tl)return n.ALPHA;if(a===c.Wh)return n.RGB;if(a===c.Jd)return n.RGBA;if(a===c.um)return n.LUMINANCE;if(a===c.tm)return n.LUMINANCE_ALPHA;if(a===c.ij)return n.FUNC_ADD;if(a===c.Sm)return n.FUNC_SUBTRACT;if(a===c.Km)return n.FUNC_REVERSE_SUBTRACT;
if(a===c.bn)return n.ZERO;if(a===c.Am)return n.ONE;if(a===c.Rm)return n.SRC_COLOR;if(a===c.Dm)return n.ONE_MINUS_SRC_COLOR;if(a===c.Wj)return n.SRC_ALPHA;if(a===c.Hj)return n.ONE_MINUS_SRC_ALPHA;if(a===c.hm)return n.DST_ALPHA;if(a===c.Bm)return n.ONE_MINUS_DST_ALPHA;if(a===c.im)return n.DST_COLOR;if(a===c.Cm)return n.ONE_MINUS_DST_COLOR;if(a===c.Qm)return n.SRC_ALPHA_SATURATE;if(void 0!==cb){if(a===c.Im)return cb.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===c.Fm)return cb.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===
c.Gm)return cb.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===c.Hm)return cb.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",c.Nj);a=a||{};var ua=void 0!==a.canvas?a.canvas:document.createElement("canvas"),Aa=void 0!==a.od?a.od:null,la=void 0!==a.precision?a.precision:"highp",Sa=void 0!==a.alpha?a.alpha:!1,Ea=void 0!==a.depth?a.depth:!0,sa=void 0!==a.stencil?a.stencil:!0,qa=void 0!==a.antialias?a.antialias:!1,Ta=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,db=void 0!==a.preserveDrawingBuffer?
a.preserveDrawingBuffer:!1,Ra=void 0!==a.Mf?a.Mf:!1,ab=new c.p(0),ya=[],ma=[];this.od=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.wh=this.xn=this.wn=this.vn=this.ji=!0;this.je=this.Kk=this.zc=!1;this.gp=!0;this.gg=c.Ij;this.Bl=c.Hh;this.sh=this.th=!1;this.Nf=8;this.fh=4;this.yn=!0;this.ul=[];this.tl=[];this.info={memory:{pl:0,Pe:0,jg:0},t:{dc:0,e:0,h:0,ja:0}};var M=this,Ja=[],Ca=null,na=null,Ha=-1,oa=null,ja=
null,ra=0,Pa=-1,Na=-1,Fa=-1,Xa=-1,Oa=-1,ea=-1,Ba=-1,Gb=-1,lc=null,Xb=null,Yb=null,Zb=null,Ib=0,Db=0,xb=ua.width,U=ua.height,$b=0,ac=0,Tb=new Uint8Array(16),Ga=new Uint8Array(16),Jb=new c.Ed,yb=new c.R,mc=new c.R,Da=new c.b,xa=new c.b,Bb=!0,fc={ra:[0,0,0],zf:{length:0,ha:[],gc:[]},fe:{length:0,ha:[],gc:[],Af:[]},Hb:{length:0,ha:[],gc:[],Af:[],Gk:[],xk:[],Hk:[]},ae:{length:0,El:[],Pk:[],gc:[]}},n,gc,yc,vb,cb,Kb;(function(){try{var a={alpha:Sa,depth:Ea,stencil:sa,antialias:qa,premultipliedAlpha:Ta,preserveDrawingBuffer:db};
n=Aa||ua.getContext("webgl",a)||ua.getContext("experimental-webgl",a);if(null===n)throw"Error creating WebGL context.";}catch(b){console.error(b)}gc=n.getExtension("OES_texture_float");n.getExtension("OES_texture_float_linear");yc=n.getExtension("OES_standard_derivatives");vb=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");cb=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||
n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Kb=n.getExtension("OES_element_index_uint");null===gc&&console.log("THREE.WebGLRenderer: Float textures not supported.");null===yc&&console.log("THREE.WebGLRenderer: Standard derivatives not supported.");null===vb&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");null===cb&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");null===Kb&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported.");
void 0===n.getShaderPrecisionFormat&&(n.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});Ra&&n.getExtension("EXT_frag_depth")})();n.clearColor(0,0,0,1);n.clearDepth(1);n.clearStencil(0);n.enable(n.DEPTH_TEST);n.depthFunc(n.LEQUAL);n.frontFace(n.CCW);n.cullFace(n.BACK);n.enable(n.CULL_FACE);n.enable(n.BLEND);n.blendEquation(n.FUNC_ADD);n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);n.viewport(Ib,Db,xb,U);n.clearColor(ab.C,ab.B,ab.i,0);this.od=n;var xc=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),
Mc=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);n.getParameter(n.MAX_TEXTURE_SIZE);var Kc=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),Lc=vb?n.getParameter(vb.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,hc=0<Mc,ec=hc&&gc;cb&&n.getParameter(n.COMPRESSED_TEXTURE_FORMATS);var Nc=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT),md=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT),nd=0<n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&&0<Nc.precision,zc=0<n.getShaderPrecisionFormat(n.VERTEX_SHADER,
n.MEDIUM_FLOAT).precision&&0<md.precision;"highp"!==la||nd||(zc?(la="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(la="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")));"mediump"!==la||zc||(la="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));this.getContext=function(){return n};this.ej=function(){return hc};this.Ei=function(){return la};this.Al=function(a,b,d){ua.width=a*this.devicePixelRatio;
ua.height=b*this.devicePixelRatio;!1!==d&&(ua.style.width=a+"px",ua.style.height=b+"px");this.Zi(0,0,a,b)};this.Zi=function(a,b,d,e){Ib=a*this.devicePixelRatio;Db=b*this.devicePixelRatio;xb=d*this.devicePixelRatio;U=e*this.devicePixelRatio;n.viewport(Ib,Db,xb,U)};this.Di=function(){return ab};this.clear=function(a,b,d){var e=0;if(void 0===a||a)e|=n.COLOR_BUFFER_BIT;if(void 0===b||b)e|=n.DEPTH_BUFFER_BIT;if(void 0===d||d)e|=n.STENCIL_BUFFER_BIT;n.clear(e)};this.clearColor=function(){n.clear(n.COLOR_BUFFER_BIT)};
this.clearDepth=function(){n.clear(n.DEPTH_BUFFER_BIT)};this.clearStencil=function(){n.clear(n.STENCIL_BUFFER_BIT)};this.vk=function(a){a.qd(this);this.tl.push(a)};this.sn=function(a){a.qd(this);this.ul.push(a)};this.ap=function(a,b,d){t();a.mo&&!a.gb&&(a.gb=n.createBuffer());a.lo&&!a.Pd&&(a.Pd=n.createBuffer());a.oo&&!a.qk&&(a.qk=n.createBuffer());a.ko&&!a.bc&&(a.bc=n.createBuffer());a.mo&&(n.bindBuffer(n.ARRAY_BUFFER,a.gb),n.bufferData(n.ARRAY_BUFFER,a.Pr,n.DYNAMIC_DRAW),w(b.attributes.position),
n.vertexAttribPointer(b.attributes.position,3,n.FLOAT,!1,0,0));if(a.lo){n.bindBuffer(n.ARRAY_BUFFER,a.Pd);if(d.Ka===c.Ih){var e,f,g,h,k,l,m,r,q,p,s,u=3*a.count;for(s=0;s<u;s+=9)p=a.No,e=p[s],f=p[s+1],g=p[s+2],h=p[s+3],l=p[s+4],r=p[s+5],k=p[s+6],m=p[s+7],q=p[s+8],e=(e+h+k)/3,f=(f+l+m)/3,g=(g+r+q)/3,p[s]=e,p[s+1]=f,p[s+2]=g,p[s+3]=e,p[s+4]=f,p[s+5]=g,p[s+6]=e,p[s+7]=f,p[s+8]=g}n.bufferData(n.ARRAY_BUFFER,a.No,n.DYNAMIC_DRAW);w(b.attributes.D);n.vertexAttribPointer(b.attributes.D,3,n.FLOAT,!1,0,0)}a.oo&&
d.map&&(n.bindBuffer(n.ARRAY_BUFFER,a.qk),n.bufferData(n.ARRAY_BUFFER,a.ns,n.DYNAMIC_DRAW),w(b.attributes.mb),n.vertexAttribPointer(b.attributes.mb,2,n.FLOAT,!1,0,0));a.ko&&d.q!==c.Hd&&(n.bindBuffer(n.ARRAY_BUFFER,a.bc),n.bufferData(n.ARRAY_BUFFER,a.Dq,n.DYNAMIC_DRAW),w(b.attributes.color),n.vertexAttribPointer(b.attributes.color,3,n.FLOAT,!1,0,0));x();n.drawArrays(n.TRIANGLES,0,a.count);a.count=0};this.Ui=function(a,b,d,e,f,g){if(!1!==e.visible){var h=A(a,b,d,e,g);a=h.attributes;b=f.attributes;d=
!1;h=16777215*f.id+2*h.id+(e.U?1:0);h!==oa&&(oa=h,d=!0);d&&t();if(g instanceof c.V)if(h=b.index){var k,l;h.d instanceof Uint32Array?(k=n.UNSIGNED_INT,l=4):(k=n.UNSIGNED_SHORT,l=2);f=f.Tb;if(0===f.length)d&&(u(e,a,b,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h.buffer)),n.drawElements(n.TRIANGLES,h.d.length,k,0),M.info.t.dc++,M.info.t.e+=h.d.length,M.info.t.h+=h.d.length/3;else{d=!0;for(var m=0,r=f.length;m<r;m++){var p=f[m].index;d&&(u(e,a,b,p),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h.buffer));n.drawElements(n.TRIANGLES,
f[m].count,k,f[m].start*l);M.info.t.dc++;M.info.t.e+=f[m].count;M.info.t.h+=f[m].count/3}}}else d&&u(e,a,b,0),e=f.attributes.position,n.drawArrays(n.TRIANGLES,0,e.d.length/3),M.info.t.dc++,M.info.t.e+=e.d.length/3,M.info.t.h+=e.d.length/9;else if(g instanceof c.$b)d&&u(e,a,b,0),e=b.position,n.drawArrays(n.POINTS,0,e.d.length/3),M.info.t.dc++,M.info.t.ja+=e.d.length/3;else if(g instanceof c.T)if(g=g.type===c.Oh?n.LINE_STRIP:n.LINES,T(e.jb),h=b.index)if(h.d instanceof Uint32Array?(k=n.UNSIGNED_INT,
l=4):(k=n.UNSIGNED_SHORT,l=2),f=f.Tb,0===f.length)d&&(u(e,a,b,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h.buffer)),n.drawElements(g,h.d.length,k,0),M.info.t.dc++,M.info.t.e+=h.d.length;else for(1<f.length&&(d=!0),m=0,r=f.length;m<r;m++)p=f[m].index,d&&(u(e,a,b,p),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h.buffer)),n.drawElements(g,f[m].count,k,f[m].start*l),M.info.t.dc++,M.info.t.e+=f[m].count;else d&&u(e,a,b,0),e=b.position,n.drawArrays(g,0,e.d.length/3),M.info.t.dc++,M.info.t.ja+=e.d.length/3}};this.Ti=
function(a,b,d,e,f,g){if(!1!==e.visible){var h,k;d=A(a,b,d,e,g);b=d.attributes;a=!1;d=16777215*f.id+2*d.id+(e.U?1:0);d!==oa&&(oa=d,a=!0);a&&t();if(!e.w&&0<=b.position)a&&(n.bindBuffer(n.ARRAY_BUFFER,f.gb),w(b.position),n.vertexAttribPointer(b.position,3,n.FLOAT,!1,0,0));else if(g.Ki){d=e.Wa.attributes;-1!==g.Ki&&0<=d.position?(n.bindBuffer(n.ARRAY_BUFFER,f.Ee[g.Ki]),w(d.position),n.vertexAttribPointer(d.position,3,n.FLOAT,!1,0,0)):0<=d.position&&(n.bindBuffer(n.ARRAY_BUFFER,f.gb),w(d.position),n.vertexAttribPointer(d.position,
3,n.FLOAT,!1,0,0));if(g.fl.length){var l=0;k=g.fl;for(h=g.Ua;l<e.Vf&&l<k.length;)0<=d["morphTarget"+l]&&(n.bindBuffer(n.ARRAY_BUFFER,f.Ee[k[l]]),w(d["morphTarget"+l]),n.vertexAttribPointer(d["morphTarget"+l],3,n.FLOAT,!1,0,0)),0<=d["morphNormal"+l]&&e.Ia&&(n.bindBuffer(n.ARRAY_BUFFER,f.jf[k[l]]),w(d["morphNormal"+l]),n.vertexAttribPointer(d["morphNormal"+l],3,n.FLOAT,!1,0,0)),g.kf[l]=h[k[l]],l++}else{k=[];h=g.Ua;var m,r=h.length;for(m=0;m<r;m++)l=h[m],0<l&&k.push([l,m]);k.length>e.Vf?(k.sort(z),k.length=
e.Vf):k.length>e.hl?k.sort(z):0===k.length&&k.push([0,0]);for(l=0;l<e.Vf;)k[l]?(m=k[l][1],0<=d["morphTarget"+l]&&(n.bindBuffer(n.ARRAY_BUFFER,f.Ee[m]),w(d["morphTarget"+l]),n.vertexAttribPointer(d["morphTarget"+l],3,n.FLOAT,!1,0,0)),0<=d["morphNormal"+l]&&e.Ia&&(n.bindBuffer(n.ARRAY_BUFFER,f.jf[m]),w(d["morphNormal"+l]),n.vertexAttribPointer(d["morphNormal"+l],3,n.FLOAT,!1,0,0)),g.kf[l]=h[m]):g.kf[l]=0,l++}null!==e.Wa.M.Ua&&n.uniform1fv(e.Wa.M.Ua,g.kf)}if(a){if(f.ob)for(h=0,k=f.ob.length;h<k;h++)d=
f.ob[h],0<=b[d.buffer.Lg]&&(n.bindBuffer(n.ARRAY_BUFFER,d.buffer),w(b[d.buffer.Lg]),n.vertexAttribPointer(b[d.buffer.Lg],d.size,n.FLOAT,!1,0,0));0<=b.color&&(0<g.j.ha.length||0<g.j.h.length?(n.bindBuffer(n.ARRAY_BUFFER,f.bc),w(b.color),n.vertexAttribPointer(b.color,3,n.FLOAT,!1,0,0)):e.ec&&n.vertexAttrib3fv(b.color,e.ec.color));0<=b.D&&(n.bindBuffer(n.ARRAY_BUFFER,f.Pd),w(b.D),n.vertexAttribPointer(b.D,3,n.FLOAT,!1,0,0));0<=b.Fl&&(n.bindBuffer(n.ARRAY_BUFFER,f.Gg),w(b.Fl),n.vertexAttribPointer(b.Fl,
4,n.FLOAT,!1,0,0));0<=b.mb&&(g.j.A[0]?(n.bindBuffer(n.ARRAY_BUFFER,f.Ig),w(b.mb),n.vertexAttribPointer(b.mb,2,n.FLOAT,!1,0,0)):e.ec&&n.vertexAttrib2fv(b.mb,e.ec.mb));0<=b.Ah&&(g.j.A[1]?(n.bindBuffer(n.ARRAY_BUFFER,f.Hg),w(b.Ah),n.vertexAttribPointer(b.Ah,2,n.FLOAT,!1,0,0)):e.ec&&n.vertexAttrib2fv(b.Ah,e.ec.Ah));e.sa&&0<=b.Cl&&0<=b.Dl&&(n.bindBuffer(n.ARRAY_BUFFER,f.Eg),w(b.Cl),n.vertexAttribPointer(b.Cl,4,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,f.Fg),w(b.Dl),n.vertexAttribPointer(b.Dl,4,n.FLOAT,
!1,0,0));0<=b.Xk&&(n.bindBuffer(n.ARRAY_BUFFER,f.Dg),w(b.Xk),n.vertexAttribPointer(b.Xk,1,n.FLOAT,!1,0,0))}x();g instanceof c.V?(g=f.jn===Uint32Array?n.UNSIGNED_INT:n.UNSIGNED_SHORT,e.U?(T(e.ya),a&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,f.Cg),n.drawElements(n.LINES,f.ei,g,0)):(a&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,f.Bg),n.drawElements(n.TRIANGLES,f.ci,g,0)),M.info.t.dc++,M.info.t.e+=f.ci,M.info.t.h+=f.ci/3):g instanceof c.T?(g=g.type===c.Oh?n.LINE_STRIP:n.LINES,T(e.jb),n.drawArrays(g,0,f.ei),M.info.t.dc++):
g instanceof c.$b&&(n.drawArrays(n.POINTS,0,f.pk),M.info.t.dc++,M.info.t.ja+=f.pk)}};this.t=function(a,d,e,f){function g(a){a instanceof c.oc&&a.Xa.update();for(var b=0,d=a.children.length;b<d;b++)g(a.children[b])}if(!1===d instanceof c.fb)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var h,k,l,n,m=a.xb,r=a.K;Ha=-1;ja=null;Bb=!0;!0===a.Ge&&a.pa();void 0===d.parent&&d.pa();g(a);d.Ca.Cb(d.l);Wb(yb,d.xa,d.Ca);Cc(Jb,yb);b(a);ya.length=0;ma.length=0;B(a,a,
d);!0===M.wh&&(ya.sort(v),ma.sort(D));G(this.ul,a,d);M.info.t.dc=0;M.info.t.e=0;M.info.t.h=0;M.info.t.ja=0;this.Yi(e);(this.ji||f)&&this.clear(this.vn,this.wn,this.xn);n=a.hd;f=0;for(h=n.length;f<h;f++)k=n[f],l=k.object,l.visible&&(I(l,d),C(k));a.Wf?(f=a.Wf,this.Xe(f.Na,f.blendEquation,f.Xd,f.Wd),this.he(f.xc),this.$f(f.yc),S(f.polygonOffset,f.Xf,f.Yf),K(ya,d,m,r,!0,f),K(ma,d,m,r,!0,f),y(a.hd,"",d,m,r,!1,f)):(f=null,this.Xe(c.Ej),K(ya,d,m,r,!1,f),y(a.hd,"opaque",d,m,r,!1,f),K(ma,d,m,r,!0,f),y(a.hd,
"transparent",d,m,r,!0,f));G(this.tl,a,d);e&&e.Qb&&e.rb!==c.ve&&e.rb!==c.Fd&&W(e);this.he(!0);this.$f(!0)}};this.Vi=function(a,b,d,e,f){var g=A(a,b,d,e,f);oa=-1;M.oh(e);f.Hi?f.Hi(g,n,Jb):f.t(function(a){M.ap(a,g,e)})};this.wo=function(a,b,d,e){var g,h,k,l;a.addEventListener("dispose",f);var m,r,p,q;a instanceof c.Gd?q="depth":a instanceof c.ue?q="normal":a instanceof c.vb?q="basic":a instanceof c.Lb?q="lambert":a instanceof c.Zb?q="phong":a instanceof c.za?q="basic":a instanceof c.se?q="dashed":a instanceof
c.ed&&(q="particle_basic");q?(g=c.yg[q],a.Qd={M:c.ac.clone(g.M),I:g.I,H:g.H}):a.Qd={M:a.M,I:a.I,H:a.H};p=l=k=h=g=0;for(var s=b.length;p<s;p++){var t=b[p];t.wd||!1===t.visible||(t instanceof c.sb&&g++,t instanceof c.fd&&h++,t instanceof c.Lc&&k++,t instanceof c.pe&&l++)}s=p=0;for(t=b.length;s<t;s++){var u=b[s];u.qb&&(u instanceof c.Lc&&p++,u instanceof c.sb&&!u.fg&&p++)}b=p;ec&&e&&e.Xa&&e.Xa.bd?p=1024:(p=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),p=Math.floor((p-20)/4),void 0!==e&&e instanceof c.oc&&
(p=Math.min(e.Xa.Y.length,p),p<e.Xa.Y.length&&console.warn("WebGLRenderer: too many bones - "+e.Xa.Y.length+", this GPU supports just "+p+" (try OpenGL instead of ANGLE)")));d={precision:la,ej:hc,map:!!a.map,ma:!!a.ma,Sa:!!a.Sa,pb:!!a.pb,lb:!!a.lb,La:!!a.La,$a:!!a.$a,q:a.q,K:d,Pl:a.K,co:d instanceof c.ef,ig:a.ig,Mf:Ra,sa:a.sa,Ho:p,bd:ec&&e&&e.Xa&&e.Xa.bd,w:a.w,Ia:a.Ia,Nf:this.Nf,fh:this.fh,al:g,cl:h,el:k,bl:l,dl:b,je:this.je&&e.kh&&0<b,gg:this.gg,th:this.th,sh:this.sh,Sd:a.Sd,Of:a.Of,lc:a.lc,zi:a.Fb===
c.Dd,Bi:a.Fb===c.me};e=[];q?e.push(q):(e.push(a.H),e.push(a.I));for(var v in a.yf)e.push(v),e.push(a.yf[v]);for(r in d)e.push(r),e.push(d[r]);q=e.join();var x;r=0;for(v=Ja.length;r<v;r++)if(e=Ja[r],e.code===q){x=e;x.hj++;break}void 0===x&&(x=new c.WebGLProgram(this,q,a,d),Ja.push(x),M.info.memory.pl=Ja.length);a.Wa=x;x=a.Wa.attributes;if(a.w)for(a.Vf=0,v="morphTarget",r=0;r<this.Nf;r++)q=v+r,0<=x[q]&&a.Vf++;if(a.Ia)for(a.hl=0,v="morphNormal",r=0;r<this.fh;r++)q=v+r,0<=x[q]&&a.hl++;a.Ml=[];for(m in a.Qd.M)(r=
a.Wa.M[m])&&a.Ml.push([a.Qd.M[m],r])};this.oh=function(a){var b=a.Fb===c.Dd;a=a.Fb===c.me;Pa!==b&&(b?n.disable(n.CULL_FACE):n.enable(n.CULL_FACE),Pa=b);Na!==a&&(a?n.frontFace(n.CW):n.frontFace(n.CCW),Na=a)};this.he=function(a){Ba!==a&&(a?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),Ba=a)};this.$f=function(a){Gb!==a&&(n.depthMask(a),Gb=a)};this.Xe=function(a,b,d,e){a!==Fa&&(a===c.Ej?n.disable(n.BLEND):a===c.jj?(n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE)):a===c.Xj?
(n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ZERO,n.ONE_MINUS_SRC_COLOR)):a===c.xm?(n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ZERO,n.SRC_COLOR)):a===c.pj?n.enable(n.BLEND):(n.enable(n.BLEND),n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)),Fa=a);if(a===c.pj){if(b!==Xa&&(n.blendEquation(Z(b)),Xa=b),d!==Oa||e!==ea)n.blendFunc(Z(d),Z(e)),Oa=d,ea=e}else ea=Oa=Xa=null};this.Ye=function(a,
b){if(a.G){a.gd||(a.gd=!0,a.addEventListener("dispose",h),a.yb=n.createTexture(),M.info.memory.jg++);n.activeTexture(n.TEXTURE0+b);n.bindTexture(n.TEXTURE_2D,a.yb);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,a.Ne);n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.Pi);n.pixelStorei(n.UNPACK_ALIGNMENT,a.gj);var d=a.Z,e=c.Math.td(d.width)&&c.Math.td(d.height),f=Z(a.format),g=Z(a.type);aa(n.TEXTURE_2D,a,e);var k=a.Pf;if(a instanceof c.Bd)if(0<k.length&&e){for(var l=0,m=k.length;l<m;l++)d=k[l],n.texImage2D(n.TEXTURE_2D,
l,f,d.width,d.height,0,f,g,d.data);a.Qb=!1}else n.texImage2D(n.TEXTURE_2D,0,f,d.width,d.height,0,f,g,d.data);else if(a instanceof c.oe)for(l=0,m=k.length;l<m;l++)d=k[l],a.format!==c.Jd?n.compressedTexImage2D(n.TEXTURE_2D,l,f,d.width,d.height,0,d.data):n.texImage2D(n.TEXTURE_2D,l,f,d.width,d.height,0,f,g,d.data);else if(0<k.length&&e){l=0;for(m=k.length;l<m;l++)d=k[l],n.texImage2D(n.TEXTURE_2D,l,f,f,g,d);a.Qb=!1}else n.texImage2D(n.TEXTURE_2D,0,f,f,g,a.Z);a.Qb&&e&&n.generateMipmap(n.TEXTURE_2D);a.G=
!1;a.ih&&a.ih()}else n.activeTexture(n.TEXTURE0+b),n.bindTexture(n.TEXTURE_2D,a.yb)};this.Yi=function(a){var b=a instanceof c.Od;if(a&&!a.Nc){void 0===a.wc&&(a.wc=!0);void 0===a.Hc&&(a.Hc=!0);a.addEventListener("dispose",g);a.yb=n.createTexture();M.info.memory.jg++;var d=c.Math.td(a.width)&&c.Math.td(a.height),e=Z(a.format),f=Z(a.type);if(b){a.Nc=[];a.Oc=[];n.bindTexture(n.TEXTURE_CUBE_MAP,a.yb);aa(n.TEXTURE_CUBE_MAP,a,d);for(var h=0;6>h;h++){a.Nc[h]=n.createFramebuffer();a.Oc[h]=n.createRenderbuffer();
n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,e,a.width,a.height,0,e,f,null);var k=a,l=n.TEXTURE_CUBE_MAP_POSITIVE_X+h;n.bindFramebuffer(n.FRAMEBUFFER,a.Nc[h]);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,l,k.yb,0);P(a.Oc[h],a)}d&&n.generateMipmap(n.TEXTURE_CUBE_MAP)}else a.Nc=n.createFramebuffer(),a.Oc=a.hg?a.hg.Oc:n.createRenderbuffer(),n.bindTexture(n.TEXTURE_2D,a.yb),aa(n.TEXTURE_2D,a,d),n.texImage2D(n.TEXTURE_2D,0,e,a.width,a.height,0,e,f,null),e=n.TEXTURE_2D,n.bindFramebuffer(n.FRAMEBUFFER,
a.Nc),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,e,a.yb,0),a.hg?a.wc&&!a.Hc?n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,a.Oc):a.wc&&a.Hc&&n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a.Oc):P(a.Oc,a),d&&n.generateMipmap(n.TEXTURE_2D);b?n.bindTexture(n.TEXTURE_CUBE_MAP,null):n.bindTexture(n.TEXTURE_2D,null);n.bindRenderbuffer(n.RENDERBUFFER,null);n.bindFramebuffer(n.FRAMEBUFFER,null)}a?(b=b?a.Nc[a.rn]:a.Nc,d=a.width,a=
a.height,f=e=0):(b=null,d=xb,a=U,e=Ib,f=Db);b!==na&&(n.bindFramebuffer(n.FRAMEBUFFER,b),n.viewport(e,f,d,a),na=b);$b=d;ac=a};this.hp=new c.Xh;this.sn(this.hp);this.vk(new c.Pm);this.vk(new c.qm)};
c.Nd=function(a,b,d){this.width=a;this.height=b;d=d||{};this.mc=void 0!==d.mc?d.mc:c.af;this.nc=void 0!==d.nc?d.nc:c.af;this.Sb=void 0!==d.Sb?d.Sb:c.Fd;this.rb=void 0!==d.rb?d.rb:c.Ph;this.cc=void 0!==d.cc?d.cc:1;this.offset=new c.g(0,0);this.repeat=new c.g(1,1);this.format=void 0!==d.format?d.format:c.Jd;this.type=void 0!==d.type?d.type:c.bi;this.wc=void 0!==d.wc?d.wc:!0;this.Hc=void 0!==d.Hc?d.Hc:!0;this.Qb=!0;this.hg=null};
c.Nd.prototype={constructor:c.Nd,Al:function(a,b){this.width=a;this.height=b},clone:function(){var a=new c.Nd(this.width,this.height);a.mc=this.mc;a.nc=this.nc;a.Sb=this.Sb;a.rb=this.rb;a.cc=this.cc;a.offset.c(this.offset);a.repeat.c(this.repeat);a.format=this.format;a.type=this.type;a.wc=this.wc;a.Hc=this.Hc;a.Qb=this.Qb;a.hg=this.hg;return a}};c.Jb.prototype.apply(c.Nd.prototype);c.Od=function(a,b,d){c.Nd.call(this,a,b,d);this.rn=0};c.Od.prototype=Object.create(c.Nd.prototype);
c.WebGLProgram=function(){var a=0;return function(b,d,e,f){var g=b.od,h=e.yf,l=e.Qd.M,k=e.attributes,m=e.Qd.I,q=e.Qd.H,p=e.uo;void 0===p&&!0===f.w&&(p="position");var r="SHADOWMAP_TYPE_BASIC";f.gg===c.Ij?r="SHADOWMAP_TYPE_PCF":f.gg===c.Jj&&(r="SHADOWMAP_TYPE_PCF_SOFT");var s,u;s=[];for(var t in h)u=h[t],!1!==u&&(u="#define "+t+" "+u,s.push(u));s=s.join("\n");h=g.createProgram();e instanceof c.wg?b=e="":(e=["precision "+f.precision+" float;","precision "+f.precision+" int;",s,f.ej?"#define VERTEX_TEXTURES":
"",b.zc?"#define GAMMA_INPUT":"",b.Kk?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+f.al,"#define MAX_POINT_LIGHTS "+f.cl,"#define MAX_SPOT_LIGHTS "+f.el,"#define MAX_HEMI_LIGHTS "+f.bl,"#define MAX_SHADOWS "+f.dl,"#define MAX_BONES "+f.Ho,f.map?"#define USE_MAP":"",f.ma?"#define USE_ENVMAP":"",f.Sa?"#define USE_LIGHTMAP":"",f.pb?"#define USE_BUMPMAP":"",f.lb?"#define USE_NORMALMAP":"",f.La?"#define USE_SPECULARMAP":"",f.$a?"#define USE_ALPHAMAP":"",f.q?"#define USE_COLOR":"",f.sa?"#define USE_SKINNING":
"",f.bd?"#define BONE_TEXTURE":"",f.w?"#define USE_MORPHTARGETS":"",f.Ia?"#define USE_MORPHNORMALS":"",f.lc?"#define WRAP_AROUND":"",f.zi?"#define DOUBLE_SIDED":"",f.Bi?"#define FLIP_SIDED":"",f.je?"#define USE_SHADOWMAP":"",f.je?"#define "+r:"",f.th?"#define SHADOWMAP_DEBUG":"",f.sh?"#define SHADOWMAP_CASCADE":"",f.ig?"#define USE_SIZEATTENUATION":"",f.Mf?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),
b=["precision "+f.precision+" float;","precision "+f.precision+" int;",f.pb||f.lb?"#extension GL_OES_standard_derivatives : enable":"",s,"#define MAX_DIR_LIGHTS "+f.al,"#define MAX_POINT_LIGHTS "+f.cl,"#define MAX_SPOT_LIGHTS "+f.el,"#define MAX_HEMI_LIGHTS "+f.bl,"#define MAX_SHADOWS "+f.dl,f.Sd?"#define ALPHATEST "+f.Sd:"",b.zc?"#define GAMMA_INPUT":"",b.Kk?"#define GAMMA_OUTPUT":"",f.Pl&&f.K?"#define USE_FOG":"",f.Pl&&f.co?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.ma?"#define USE_ENVMAP":
"",f.Sa?"#define USE_LIGHTMAP":"",f.pb?"#define USE_BUMPMAP":"",f.lb?"#define USE_NORMALMAP":"",f.La?"#define USE_SPECULARMAP":"",f.$a?"#define USE_ALPHAMAP":"",f.q?"#define USE_COLOR":"",f.Of?"#define METAL":"",f.lc?"#define WRAP_AROUND":"",f.zi?"#define DOUBLE_SIDED":"",f.Bi?"#define FLIP_SIDED":"",f.je?"#define USE_SHADOWMAP":"",f.je?"#define "+r:"",f.th?"#define SHADOWMAP_DEBUG":"",f.sh?"#define SHADOWMAP_CASCADE":"",f.Mf?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"));
m=new c.WebGLShader(g,g.VERTEX_SHADER,e+m);q=new c.WebGLShader(g,g.FRAGMENT_SHADER,b+q);g.attachShader(h,m);g.attachShader(h,q);void 0!==p&&g.bindAttribLocation(h,0,p);g.linkProgram(h);!1===g.getProgramParameter(h,g.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",g.getProgramParameter(h,g.VALIDATE_STATUS)),console.error("gl.getError()",g.getError()));""!==g.getProgramInfoLog(h)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
g.getProgramInfoLog(h));g.deleteShader(m);g.deleteShader(q);p="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" ");f.bd?(p.push("boneTexture"),p.push("boneTextureWidth"),p.push("boneTextureHeight")):p.push("boneGlobalMatrices");f.Mf&&p.push("logDepthBufFC");for(var w in l)p.push(w);l=p;w={};p=0;for(b=l.length;p<b;p++)r=l[p],w[r]=g.getUniformLocation(h,r);this.M=w;p="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");
for(l=0;l<f.Nf;l++)p.push("morphTarget"+l);for(l=0;l<f.fh;l++)p.push("morphNormal"+l);for(var x in k)p.push(x);f=p;k={};x=0;for(l=f.length;x<l;x++)w=f[x],k[w]=g.getAttribLocation(h,w);this.attributes=k;this.id=a++;this.code=d;this.hj=1;this.Wa=h;this.I=m;this.H=q;return this}}();
c.WebGLShader=function(){function a(a){a=a.split("\n");for(var d=0;d<a.length;d++)a[d]=d+1+": "+a[d];return a.join("\n")}return function(b,d,e){d=b.createShader(d);b.shaderSource(d,e);b.compileShader(d);!1===b.getShaderParameter(d,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(d)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b.getShaderInfoLog(d)),console.warn(a(e)));return d}}();
c.Kd=function(){this.position=new c.b;this.Ve=new c.b;this.k=new c.Pb;this.visible=!0};c.Kd.prototype.c=function(a){this.Ve.c(a.Ve);this.k.c(a.k)};c.Pj=function(){this.id=0;this.X=new c.Kd;this.aa=new c.Kd;this.Xb=new c.Kd;this.Qf=new c.b;this.zd=[new c.b,new c.b,new c.b];this.Rl=0;this.color=new c.p;this.r=null;this.yd=[new c.g,new c.g,new c.g];this.z=0};c.Jm=function(){this.id=0;this.object=null;this.z=0};
c.Rj=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new c.g;this.r=null};c.Qj=function(){this.id=0;this.X=new c.Kd;this.aa=new c.Kd;this.q=[new c.p,new c.p];this.r=null;this.z=0};
c.Xp={Dc:function(a,b,d){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var e;b instanceof c.V&&(b.la&&b.xd(),e=b.Ha,b=b.j);a.Dc(b,e,d)},fa:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.fa()}};
c.Yp={crossOrigin:void 0,$q:function(a,b,d,e){var f=new c.qe;f.crossOrigin=this.crossOrigin;var g=new c.ua(void 0,b);f.load(a,function(a){g.Z=a;g.G=!0;d&&d(g)},void 0,function(a){e&&e(a)});g.kp=a;return g},ar:function(a,b,d){function e(b){f.load(a[b],function(a){g.images[b]=a;h+=1;6===h&&(g.G=!0,d&&d(g))})}var f=new c.qe;f.crossOrigin=this.crossOrigin;var g=new c.bf([],b);g.Ne=!1;var h=0;b=0;for(var l=a.length;b<l;++b)e(b);return g},Yq:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},
Zq:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},Uq:function(a,b){b|=1;var d=a.width,e=a.height,f=document.createElement("canvas");f.width=d;f.height=e;var g=f.getContext("2d");g.drawImage(a,0,0);for(var h=g.getImageData(0,0,d,e).data,l=g.createImageData(d,e),k=l.data,m=0;m<d;m++)for(var q=0;q<e;q++){var p=0>q-1?0:q-1,r=q+1>e-1?e-1:q+1,s=0>m-1?0:m-1,u=m+1>d-1?d-1:m+1,t=[],w=[0,0,h[4*(q*d+m)]/255*b];t.push([-1,0,h[4*(q*d+s)]/
255*b]);t.push([-1,-1,h[4*(p*d+s)]/255*b]);t.push([0,-1,h[4*(p*d+m)]/255*b]);t.push([1,-1,h[4*(p*d+u)]/255*b]);t.push([1,0,h[4*(q*d+u)]/255*b]);t.push([1,1,h[4*(r*d+u)]/255*b]);t.push([0,1,h[4*(r*d+m)]/255*b]);t.push([-1,1,h[4*(r*d+s)]/255*b]);p=[];s=t.length;for(r=0;r<s;r++){var u=t[r],x=t[(r+1)%s],u=[u[0]-w[0],u[1]-w[1],u[2]-w[2]],x=[x[0]-w[0],x[1]-w[1],x[2]-w[2]],u=[u[1]*x[2]-u[2]*x[1],u[2]*x[0]-u[0]*x[2],u[0]*x[1]-u[1]*x[0]],x=Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);p.push([u[0]/x,u[1]/x,u[2]/
x])}t=[0,0,0];for(r=0;r<p.length;r++)t[0]+=p[r][0],t[1]+=p[r][1],t[2]+=p[r][2];t[0]/=p.length;t[1]/=p.length;t[2]/=p.length;w=4*(q*d+m);k[w]=(t[0]+1)/2*255|0;k[w+1]=(t[1]+1)/2*255|0;k[w+2]=255*t[2]|0;k[w+3]=255}g.putImageData(l,0,0);return f},Tq:function(a,b,d){var e=a*b,f=new Uint8Array(3*e),g=Math.floor(255*d.C),h=Math.floor(255*d.B);d=Math.floor(255*d.i);for(var l=0;l<e;l++)f[3*l]=g,f[3*l+1]=h,f[3*l+2]=d;a=new c.Bd(f,a,b,c.Wh);a.G=!0;return a}};
c.lq={Fq:function(a,b){for(var d=new c.u,e=0,f=b.length;e<f;e++)d.add(new c.V(a,b[e]));return d},detach:function(a,b,d){a.Pc(b.l);b.remove(a);d.add(a)},zq:function(a,b,d){var e=new c.R;e.Cb(d.l);a.Pc(e);b.remove(a);d.add(a)}};
c.tb={h:{},face:"helvetiker",weight:"normal",style:"normal",size:150,yi:10,ho:function(){try{return this.h[this.face][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},Yk:function(a){var b=a.Lq.toLowerCase();this.h[b]=this.h[b]||{};this.h[b][a.ui]=this.h[b][a.ui]||{};this.h[b][a.ui][a.Un]=a;return this.h[b][a.ui][a.Un]=a},Xn:function(a){var b=this.ho(),d=this.size/b.Zr,e=0,f=String(a).split(""),g=f.length,h=[];for(a=
0;a<g;a++){var l=new c.Id,l=this.ao(f[a],b,d,e,l),e=e+l.offset;h.push(l.path)}return{Ro:h,offset:e/2}},ao:function(a,b,d,e,f){var g=[],h,l,k,m,q,p,r,s=b.io[a]||b.io["?"];if(s){if(s.Oo)for(b=s.kn||(s.kn=s.Oo.split(" ")),k=b.length,a=0;a<k;)switch(h=b[a++],h){case "m":h=b[a++]*d+e;l=b[a++]*d;f.moveTo(h,l);break;case "l":h=b[a++]*d+e;l=b[a++]*d;f.lineTo(h,l);break;case "q":h=b[a++]*d+e;l=b[a++]*d;m=b[a++]*d+e;q=b[a++]*d;f.quadraticCurveTo(m,q,h,l);if(h=g[g.length-1])for(h=1,l=this.yi;h<=l;h++);break;
case "b":if(h=b[a++]*d+e,l=b[a++]*d,m=b[a++]*d+e,q=b[a++]*d,p=b[a++]*d+e,r=b[a++]*d,f.bezierCurveTo(m,q,p,r,h,l),h=g[g.length-1])for(h=1,l=this.yi;h<=l;h++);}return{offset:s.Vq*d,path:f}}}};
c.tb.eo=function(a,b){b=b||{};var d=void 0!==b.xf?b.xf:4,e=void 0!==b.font?b.font:"helvetiker",f=void 0!==b.weight?b.weight:"normal",g=void 0!==b.style?b.style:"normal";c.tb.size=void 0!==b.size?b.size:100;c.tb.yi=d;c.tb.face=e;c.tb.weight=f;c.tb.style=g;d=c.tb.Xn(a).Ro;e=[];f=0;for(g=d.length;f<g;f++)Array.prototype.push.apply(e,ed(d[f]));return e};
(function(a){function b(a){for(var b=a.length,f=0,g=b-1,h=0;h<b;g=h++)f+=a[g].x*a[h].y-a[h].x*a[g].y;return.5*f}a.$h=function(a,e){var f=a.length;if(3>f)return null;var g=[],h=[],l=[],k,m,q;if(0<b(a))for(m=0;m<f;m++)h[m]=m;else for(m=0;m<f;m++)h[m]=f-1-m;var p=2*f;for(m=f-1;2<f;){if(0>=p--){console.log("Warning, unable to triangulate polygon!");break}k=m;f<=k&&(k=0);m=k+1;f<=m&&(m=0);q=m+1;f<=q&&(q=0);var r;a:{var s=r=void 0,u=void 0,t=void 0,w=void 0,x=void 0,v=void 0,D=void 0,z=void 0,s=a[h[k]].x,
u=a[h[k]].y,t=a[h[m]].x,w=a[h[m]].y,x=a[h[q]].x,v=a[h[q]].y;if(1E-10>(t-s)*(v-u)-(w-u)*(x-s))r=!1;else{var B=void 0,G=void 0,K=void 0,y=void 0,C=void 0,L=void 0,R=void 0,ca=void 0,Q=void 0,E=void 0,Q=ca=R=z=D=void 0,B=x-t,G=v-w,K=s-x,y=u-v,C=t-s,L=w-u;for(r=0;r<f;r++)if(D=a[h[r]].x,z=a[h[r]].y,!(D===s&&z===u||D===t&&z===w||D===x&&z===v)&&(R=D-s,ca=z-u,Q=D-t,E=z-w,D-=x,z-=v,Q=B*E-G*Q,R=C*ca-L*R,ca=K*z-y*D,-1E-10<=Q&&-1E-10<=ca&&-1E-10<=R)){r=!1;break a}r=!0}}if(r){g.push([a[h[k]],a[h[m]],a[h[q]]]);
l.push([h[k],h[m],h[q]]);k=m;for(q=m+1;q<f;k++,q++)h[k]=h[q];f--;p=2*f}}return e?l:g};a.$h.zk=b;return a})(c.tb);self.ln={h:c.tb.h,Yk:c.tb.Yk};c.ks=self.ln;c.ca=function(){};da=c.ca.prototype;da.wa=function(){console.log("Warning, getPoint() not implemented!");return null};da.Ff=function(a){a=fd(this,a);return this.wa(a)};da.Gf=function(a){a||(a=5);var b,d=[];for(b=0;b<=a;b++)d.push(this.wa(b/a));return d};da.Ug=function(a){a||(a=5);var b,d=[];for(b=0;b<=a;b++)d.push(this.Ff(b/a));return d};
da.Ef=function(){var a=gd(this);return a[a.length-1]};function gd(a){var b;b||(b=a.cn?a.cn:200);if(a.ri&&a.ri.length==b+1&&!a.G)return a.ri;a.G=!1;var d=[],e,f=a.wa(0),g,h=0;d.push(0);for(g=1;g<=b;g++)e=a.wa(g/b),h+=e.Qc(f),d.push(h),f=e;return a.ri=d}function fd(a,b,d){a=gd(a);var e=0,f=a.length;b=d?d:b*a[f-1];d=0;for(var g=f-1,h;d<=g;)if(e=Math.floor(d+(g-d)/2),h=a[e]-b,0>h)d=e+1;else if(0<h)g=e-1;else{g=e;break}e=g;if(a[e]==b)return e/(f-1);d=a[e];return a=(e+(b-d)/(a[e+1]-d))/(f-1)}
da.Hf=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.wa(b);return this.wa(a).clone().sub(b).normalize()};c.ca.S={Hl:function(a,b,d,e){return 2*(1-a)*(d-b)+2*a*(e-d)},Gl:function(a,b,d,e,f){return-3*b*(1-a)*(1-a)+3*d*(1-a)*(1-a)-6*a*d*(1-a)+6*a*e*(1-a)-3*a*a*e+3*a*a*f},es:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},rd:function(a,b,d,e,f){a=.5*(d-a);e=.5*(e-b);var g=f*f;return(2*b-2*d+a+e)*f*g+(-3*b+3*d-2*a-e)*g+a*f+b}};
c.ca.create=function(a,b){a.prototype=Object.create(c.ca.prototype);a.prototype.wa=b;return a};c.pg=function(){this.Ga=[];this.Mg=[]};c.pg.prototype=Object.create(c.ca.prototype);da=c.pg.prototype;da.add=function(a){this.Ga.push(a)};da.closePath=function(){var a=this.Ga[0].wa(0),b=this.Ga[this.Ga.length-1].wa(1);a.ia(b)||this.Ga.push(new c.re(b,a))};da.wa=function(a){var b=a*this.Ef(),d=hd(this);for(a=0;a<d.length;){if(d[a]>=b)return b=d[a]-b,a=this.Ga[a],b=1-b/a.Ef(),a.Ff(b);a++}return null};
da.Ef=function(){var a=hd(this);return a[a.length-1]};function hd(a){if(a.si&&a.si.length==a.Ga.length)return a.si;var b=[],d=0,e,f=a.Ga.length;for(e=0;e<f;e++)d+=a.Ga[e].Ef(),b.push(d);return a.si=b}
da.Nk=function(){var a=this.Gf(),b,d,e,f,g,h;b=d=Number.NEGATIVE_INFINITY;f=g=Number.POSITIVE_INFINITY;var l,k,m,q,p=a[0]instanceof c.b;q=p?new c.b:new c.g;k=0;for(m=a.length;k<m;k++)l=a[k],l.x>b?b=l.x:l.x<f&&(f=l.x),l.y>d?d=l.y:l.y<g&&(g=l.y),p&&(l.z>e?e=l.z:l.z<h&&(h=l.z)),q.add(l);a={Fr:f,Gr:g,Io:b,Dr:d};p&&(a.Er=e,a.Hr=h);return a};function id(a,b,d){b=a.Gf(b);var e,f;d||(d=a.Mg);e=0;for(f=d.length;e<f;e++)b=jd(a,b,d[e]);return b}
function kd(a,b,d){b=a.Ug(b);var e,f;d||(d=a.Mg);e=0;for(f=d.length;e<f;e++)b=jd(a,b,d[e]);return b}function jd(a,b,d){a=a.Nk();var e,f,g,h,l,k;e=0;for(f=b.length;e<f;e++)g=b[e],h=g.x,l=g.y,k=h/a.Io,k=fd(d,k,h),h=d.wa(k),k=d.Hf(k),k.set(-k.y,k.x).F(l),g.x=h.x+k.x,g.y=h.y+k.y;return b}c.Kh=function(){c.u.call(this)};c.Kh.prototype=Object.create(c.u.prototype);da=c.Kh.prototype;
da.pa=function(a){this.la&&this.xd();if(this.fc||a)this.parent?(Wb(this.l,this.parent.l,this.Ha),this.l.Pg(this.Jl,this.Zo,this.xl),this.Ha.Pg(this.xp,this.rl,this.bp),jc(this.l,this.Jl,this.rl,this.xl)):this.l.c(this.Ha),this.fc=!1,a=!0;for(var b=0,d=this.children.length;b<d;b++)this.children[b].pa(a)};da.Jl=new c.b;da.xp=new c.b;da.Zo=new c.Nb;da.rl=new c.Nb;da.xl=new c.b;da.bp=new c.b;
c.Id=function(a){c.pg.call(this);this.ea=[];if(a){this.moveTo(a[0].x,a[0].y);for(var b=1,d=a.length;b<d;b++)this.lineTo(a[b].x,a[b].y)}};c.Id.prototype=Object.create(c.pg.prototype);c.wb={Qh:"moveTo",zj:"lineTo",Mj:"quadraticCurveTo",kj:"bezierCurveTo",Zl:"splineThru",Sl:"arc",sj:"ellipse"};da=c.Id.prototype;da.moveTo=function(a,b){this.ea.push({action:c.wb.Qh,zb:Array.prototype.slice.call(arguments)})};
da.lineTo=function(a,b){var d=Array.prototype.slice.call(arguments),e=this.ea[this.ea.length-1].zb;this.Ga.push(new c.re(new c.g(e[e.length-2],e[e.length-1]),new c.g(a,b)));this.ea.push({action:c.wb.zj,zb:d})};da.quadraticCurveTo=function(a,b,d,e){var f=Array.prototype.slice.call(arguments),g=this.ea[this.ea.length-1].zb;this.Ga.push(new c.vg(new c.g(g[g.length-2],g[g.length-1]),new c.g(a,b),new c.g(d,e)));this.ea.push({action:c.wb.Mj,zb:f})};
da.bezierCurveTo=function(a,b,d,e,f,g){var h=Array.prototype.slice.call(arguments),l=this.ea[this.ea.length-1].zb;this.Ga.push(new c.og(new c.g(l[l.length-2],l[l.length-1]),new c.g(a,b),new c.g(d,e),new c.g(f,g)));this.ea.push({action:c.wb.kj,zb:h})};da.arc=function(a,b,d,e,f,g){var h=this.ea[this.ea.length-1].zb;this.pn(a+h[h.length-2],b+h[h.length-1],d,d,e,f,g)};
da.pn=function(a,b,d,e,f,g,h){var l=Array.prototype.slice.call(arguments),k=new c.cf(a,b,d,e,f,g,h);this.Ga.push(k);k=k.wa(1);l.push(k.x);l.push(k.y);this.ea.push({action:c.wb.sj,zb:l})};da.Ug=function(a){a||(a=40);for(var b=[],d=0;d<a;d++)b.push(this.wa(d/a));return b};
da.Gf=function(a,b){if(this.Bp)return console.log("tata"),this.Ug(a,b);a=a||12;var d=[],e,f,g,h,l,k,m,q,p,r,s,u,t;e=0;for(f=this.ea.length;e<f;e++)switch(g=this.ea[e],h=g.action,g=g.zb,h){case c.wb.Qh:d.push(new c.g(g[0],g[1]));break;case c.wb.zj:d.push(new c.g(g[0],g[1]));break;case c.wb.Mj:l=g[2];k=g[3];p=g[0];r=g[1];0<d.length?(h=d[d.length-1],s=h.x,u=h.y):(h=this.ea[e-1].zb,s=h[h.length-2],u=h[h.length-1]);for(g=1;g<=a;g++)t=g/a,h=c.da.S.Td(t,s,p,l),t=c.da.S.Td(t,u,r,k),d.push(new c.g(h,t));break;
case c.wb.kj:l=g[4];k=g[5];p=g[0];r=g[1];m=g[2];q=g[3];0<d.length?(h=d[d.length-1],s=h.x,u=h.y):(h=this.ea[e-1].zb,s=h[h.length-2],u=h[h.length-1]);for(g=1;g<=a;g++)t=g/a,h=c.da.S.Ud(t,s,p,m,l),t=c.da.S.Ud(t,u,r,q,k),d.push(new c.g(h,t));break;case c.wb.Zl:h=this.ea[e-1].zb;t=[new c.g(h[h.length-2],h[h.length-1])];h=a*g[0].length;t=t.concat(g[0]);t=new c.Zh(t);for(g=1;g<=h;g++)d.push(t.Ff(g/h));break;case c.wb.Sl:l=g[0];k=g[1];r=g[2];m=g[3];h=g[4];p=!!g[5];s=h-m;u=2*a;for(g=1;g<=u;g++)t=g/u,p||(t=
1-t),t=m+t*s,h=l+r*Math.cos(t),t=k+r*Math.sin(t),d.push(new c.g(h,t));break;case c.wb.sj:for(l=g[0],k=g[1],r=g[2],q=g[3],m=g[4],h=g[5],p=!!g[6],s=h-m,u=2*a,g=1;g<=u;g++)t=g/u,p||(t=1-t),t=m+t*s,h=l+r*Math.cos(t),t=k+q*Math.sin(t),d.push(new c.g(h,t))}e=d[d.length-1];1E-10>Math.abs(e.x-d[0].x)&&1E-10>Math.abs(e.y-d[0].y)&&d.splice(d.length-1,1);b&&d.push(d[0]);return d};
function ed(a){function b(a){for(var b=[],d=0,e=a.length;d<e;d++){var f=a[d],g=new c.da;g.ea=f.ea;g.Ga=f.Ga;b.push(g)}return b}function d(a,b){for(var d=b.length,e=!1,f=d-1,g=0;g<d;f=g++){var h=b[f],k=b[g],l=k.x-h.x,m=k.y-h.y;if(1E-10<Math.abs(m)){if(0>m&&(h=b[g],l=-l,k=b[f],m=-m),!(a.y<h.y||a.y>k.y))if(a.y==h.y){if(a.x==h.x)return!0}else{f=m*(a.x-h.x)-l*(a.y-h.y);if(0==f)return!0;0>f||(e=!e)}}else if(a.y==h.y&&(k.x<=a.x&&a.x<=h.x||h.x<=a.x&&a.x<=k.x))return!0}return e}var e=function(a){var b,d,e,
f,g=[],h=new c.Id;b=0;for(d=a.length;b<d;b++)e=a[b],f=e.zb,e=e.action,e==c.wb.Qh&&0!=h.ea.length&&(g.push(h),h=new c.Id),h[e].apply(h,f);0!=h.ea.length&&g.push(h);return g}(a.ea);if(0==e.length)return[];var f,g,h;a=[];if(1==e.length)return g=e[0],h=new c.da,h.ea=g.ea,h.Ga=g.Ga,a.push(h),a;var l=!c.da.S.Qe(e[0].Gf());h=[];var k=[],m=[],q=0,p;k[q]=void 0;m[q]=[];var r,s;r=0;for(s=e.length;r<s;r++)g=e[r],p=g.Gf(),(f=c.da.S.Qe(p))?(!l&&k[q]&&q++,k[q]={Xi:new c.da,jh:p},k[q].Xi.ea=g.ea,k[q].Xi.Ga=g.Ga,
l&&q++,m[q]=[]):m[q].push({jo:g,jh:p[0]});if(!k[0])return b(e);if(1<k.length){r=!1;s=[];g=0;for(e=k.length;g<e;g++)h[g]=[];g=0;for(e=k.length;g<e;g++)for(f=m[g],l=0;l<f.length;l++){q=f[l];p=!0;for(var u=0;u<k.length;u++)d(q.jh,k[u].jh)&&(g!=u&&s.push({Sq:g,hs:u,Xq:l}),p?(p=!1,h[u].push(q)):r=!0);p&&h[g].push(q)}0<s.length&&(r||(m=h))}r=0;for(s=k.length;r<s;r++)for(h=k[r].Xi,a.push(h),g=m[r],e=0,f=g.length;e<f;e++)h.Rc.push(g[e].jo);return a}c.da=function(){c.Id.apply(this,arguments);this.Rc=[]};
c.da.prototype=Object.create(c.Id.prototype);function ld(a,b){var d;if(a.Bp){d=kd(a,b);var e,f=a.Rc.length,g=[];for(e=0;e<f;e++)g[e]=kd(a.Rc[e],b,a.Mg)}else for(d=id(a,b),f=a.Rc.length,g=[],e=0;e<f;e++)g[e]=id(a.Rc[e],b,a.Mg);return d={shape:d,Rc:g}}
c.da.S={Ll:function(a,b){function d(a,b,d){return a.x!=b.x?a.x<b.x?a.x<=d.x&&d.x<=b.x:b.x<=d.x&&d.x<=a.x:a.y<b.y?a.y<=d.y&&d.y<=b.y:b.y<=d.y&&d.y<=a.y}function e(a,b,e,f){var g=b.x-a.x,h=b.y-a.y,k=f.x-e.x,l=f.y-e.y,m=a.x-e.x,p=a.y-e.y,q=h*k-g*l,K=h*m-g*p;if(1E-10<Math.abs(q)){if(0<q){if(0>K||K>q)return[];k=l*m-k*p;if(0>k||k>q)return[]}else{if(0<K||K<q)return[];k=l*m-k*p;if(0<k||k<q)return[]}if(0==k)return 0!=K&&K!=q?[a]:[];if(k==q)return 0!=K&&K!=q?[b]:[];if(0==K)return[e];if(K==q)return[f];e=k/q;
return[{x:a.x+e*g,y:a.y+e*h}]}if(0!=K||l*m!=k*p)return[];h=0==g&&0==h;k=0==k&&0==l;if(h&&k)return a.x!=e.x||a.y!=e.y?[]:[a];if(h)return d(e,f,a)?[a]:[];if(k)return d(a,b,e)?[e]:[];0!=g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),e.x<f.x?(b=e,q=e.x,l=f,e=f.x):(b=f,q=f.x,l=e,e=e.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),e.y<f.y?(b=e,q=e.y,l=f,e=f.y):(b=f,q=f.y,l=e,e=e.y));return k<=q?a<q?[]:a==q?[]:a<=e?[b,h]:[b,l]:k>e?[]:k==e?[]:a<=e?[g,h]:[g,l]}function f(a,b,d,e){var f=b.x-
a.x,g=b.y-a.y;b=d.x-a.x;d=d.y-a.y;var h=e.x-a.x;e=e.y-a.y;a=f*d-g*b;f=f*e-g*h;return 1E-10<Math.abs(a)?(b=h*d-e*b,0<a?0<=f&&0<=b:0<=f||0<=b):0<f}var g,h,l,k,m,q={};l=a.concat();g=0;for(h=b.length;g<h;g++)Array.prototype.push.apply(l,b[g]);g=0;for(h=l.length;g<h;g++)m=l[g].x+":"+l[g].y,void 0!==q[m]&&console.log("Duplicate point",m),q[m]=g;g=function(a,b){function d(a,b){var e=k.length-1,g=a-1;0>g&&(g=e);var h=a+1;h>e&&(h=0);e=f(k[a],k[g],k[h],l[b]);if(!e)return!1;e=l.length-1;g=b-1;0>g&&(g=e);h=b+
1;h>e&&(h=0);return(e=f(l[b],l[g],l[h],k[a]))?!0:!1}function g(a,b){var d,f;for(d=0;d<k.length;d++)if(f=d+1,f%=k.length,f=e(a,b,k[d],k[f]),0<f.length)return!0;return!1}function h(a,d){var f,g,k,l;for(f=0;f<m.length;f++)for(g=b[m[f]],k=0;k<g.length;k++)if(l=k+1,l%=g.length,l=e(a,d,g[k],g[l]),0<l.length)return!0;return!1}var k=a.concat(),l,m=[],q,p,G,K,y,C=[],L,R,ca,Q=0;for(q=b.length;Q<q;Q++)m.push(Q);L=0;for(var E=2*m.length;0<m.length;){E--;if(0>E){console.log("Infinite Loop! Holes left:"+m.length+
", Probably Hole outside Shape!");break}for(p=L;p<k.length;p++){G=k[p];q=-1;for(Q=0;Q<m.length;Q++)if(K=m[Q],y=G.x+":"+G.y+":"+K,void 0===C[y]){l=b[K];for(R=0;R<l.length;R++)if(K=l[R],d(p,R)&&!g(G,K)&&!h(G,K)){q=R;m.splice(Q,1);L=k.slice(0,p+1);K=k.slice(p);R=l.slice(q);ca=l.slice(0,q+1);k=L.concat(R).concat(ca).concat(K);L=p;break}if(0<=q)break;C[y]=!0}if(0<=q)break}}return k}(a,b);var p=c.tb.$h(g,!1);g=0;for(h=p.length;g<h;g++)for(k=p[g],l=0;3>l;l++)m=k[l].x+":"+k[l].y,m=q[m],void 0!==m&&(k[l]=
m);return p.concat()},Qe:function(a){return 0>c.tb.$h.zk(a)},An:function(a,b){var d=1-a;return d*d*b},Bn:function(a,b){return 2*(1-a)*a*b},Cn:function(a,b){return a*a*b},Td:function(a,b,d,e){return this.An(a,b)+this.Bn(a,d)+this.Cn(a,e)},Dn:function(a,b){var d=1-a;return d*d*d*b},En:function(a,b){var d=1-a;return 3*d*d*a*b},Fn:function(a,b){return 3*(1-a)*a*a*b},Gn:function(a,b){return a*a*a*b},Ud:function(a,b,d,e,f){return this.Dn(a,b)+this.En(a,d)+this.Fn(a,e)+this.Gn(a,f)}};
c.re=function(a,b){this.X=a;this.aa=b};c.re.prototype=Object.create(c.ca.prototype);c.re.prototype.wa=function(a){var b=this.aa.clone().sub(this.X);b.F(a).add(this.X);return b};c.re.prototype.Ff=function(a){return this.wa(a)};c.re.prototype.Hf=function(){return this.aa.clone().sub(this.X).normalize()};c.vg=function(a,b,d){this.cb=a;this.X=b;this.aa=d};c.vg.prototype=Object.create(c.ca.prototype);
c.vg.prototype.wa=function(a){return new c.g(c.da.S.Td(a,this.cb.x,this.X.x,this.aa.x),c.da.S.Td(a,this.cb.y,this.X.y,this.aa.y))};c.vg.prototype.Hf=function(a){a=new c.g(c.ca.S.Hl(a,this.cb.x,this.X.x,this.aa.x),c.ca.S.Hl(a,this.cb.y,this.X.y,this.aa.y));a.normalize();return a};c.og=function(a,b,d,e){this.cb=a;this.X=b;this.aa=d;this.Xb=e};c.og.prototype=Object.create(c.ca.prototype);
c.og.prototype.wa=function(a){return new c.g(c.da.S.Ud(a,this.cb.x,this.X.x,this.aa.x,this.Xb.x),c.da.S.Ud(a,this.cb.y,this.X.y,this.aa.y,this.Xb.y))};c.og.prototype.Hf=function(a){a=new c.g(c.ca.S.Gl(a,this.cb.x,this.X.x,this.aa.x,this.Xb.x),c.ca.S.Gl(a,this.cb.y,this.X.y,this.aa.y,this.Xb.y));a.normalize();return a};c.Zh=function(a){this.ja=void 0==a?[]:a};c.Zh.prototype=Object.create(c.ca.prototype);
c.Zh.prototype.wa=function(a){var b=new c.g,d=[],e=this.ja,f;f=(e.length-1)*a;a=Math.floor(f);f-=a;d[0]=0==a?a:a-1;d[1]=a;d[2]=a>e.length-2?e.length-1:a+1;d[3]=a>e.length-3?e.length-1:a+2;b.x=c.ca.S.rd(e[d[0]].x,e[d[1]].x,e[d[2]].x,e[d[3]].x,f);b.y=c.ca.S.rd(e[d[0]].y,e[d[1]].y,e[d[2]].y,e[d[3]].y,f);return b};c.cf=function(a,b,d,e,f,g,h){this.nn=a;this.on=b;this.Gp=d;this.Hp=e;this.uk=f;this.tk=g;this.mn=h};c.cf.prototype=Object.create(c.ca.prototype);
c.cf.prototype.wa=function(a){var b=this.tk-this.uk;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);a=!0===this.mn?this.tk+(1-a)*(2*Math.PI-b):this.uk+a*b;return new c.g(this.nn+this.Gp*Math.cos(a),this.on+this.Hp*Math.sin(a))};c.Vl=function(a,b,d,e,f,g){c.cf.call(this,a,b,d,d,e,f,g)};c.Vl.prototype=Object.create(c.cf.prototype);c.bq=c.ca.create(function(a,b){this.X=a;this.aa=b},function(a){var b=new c.b;b.ba(this.aa,this.X);b.F(a);b.add(this.X);return b});
c.jq=c.ca.create(function(a,b,d){this.cb=a;this.X=b;this.aa=d},function(a){return new c.b(c.da.S.Td(a,this.cb.x,this.X.x,this.aa.x),c.da.S.Td(a,this.cb.y,this.X.y,this.aa.y),c.da.S.Td(a,this.cb.z,this.X.z,this.aa.z))});c.Op=c.ca.create(function(a,b,d,e){this.cb=a;this.X=b;this.aa=d;this.Xb=e},function(a){return new c.b(c.da.S.Ud(a,this.cb.x,this.X.x,this.aa.x,this.Xb.x),c.da.S.Ud(a,this.cb.y,this.X.y,this.aa.y,this.Xb.y),c.da.S.Ud(a,this.cb.z,this.X.z,this.aa.z,this.Xb.z))});
c.nq=c.ca.create(function(a){this.ja=void 0==a?[]:a},function(a){var b=new c.b,d=[],e=this.ja,f;a*=e.length-1;f=Math.floor(a);a-=f;d[0]=0==f?f:f-1;d[1]=f;d[2]=f>e.length-2?e.length-1:f+1;d[3]=f>e.length-3?e.length-1:f+2;f=e[d[0]];var g=e[d[1]],h=e[d[2]],d=e[d[3]];b.x=c.ca.S.rd(f.x,g.x,h.x,d.x,a);b.y=c.ca.S.rd(f.y,g.y,h.y,d.y,a);b.z=c.ca.S.rd(f.z,g.z,h.z,d.z,a);return b});
c.Lp=c.ca.create(function(a){this.ja=void 0==a?[]:a},function(a){var b=new c.b,d=[],e=this.ja,f;f=(e.length-0)*a;a=Math.floor(f);f-=a;a+=0<a?0:(Math.floor(Math.abs(a)/e.length)+1)*e.length;d[0]=(a-1)%e.length;d[1]=a%e.length;d[2]=(a+1)%e.length;d[3]=(a+2)%e.length;b.x=c.ca.S.rd(e[d[0]].x,e[d[1]].x,e[d[2]].x,e[d[3]].x,f);b.y=c.ca.S.rd(e[d[0]].y,e[d[1]].y,e[d[2]].y,e[d[3]].y,f);b.z=c.ca.S.rd(e[d[0]].z,e[d[1]].z,e[d[2]].z,e[d[3]].z,f);return b});
c.Za={LINEAR:0,Fh:1,mg:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},md:[],qd:function(a){if(!0!==a.xo){for(var b=0;b<a.v.length;b++){for(var d=0;d<a.v[b].keys.length;d++)0>a.v[b].keys[d].time&&(a.v[b].keys[d].time=0),void 0===a.v[b].keys[d].Zf||a.v[b].keys[d].Zf instanceof c.Nb||(a.v[b].keys[d].Zf=
(new c.Nb).Bb(a.v[b].keys[d].Zf));if(a.v[b].keys.length&&void 0!==a.v[b].keys[0].w){for(var e={},d=0;d<a.v[b].keys.length;d++)for(var f=0;f<a.v[b].keys[d].w.length;f++){var g=a.v[b].keys[d].w[f];e[g]=-1}a.v[b].ms=e;for(d=0;d<a.v[b].keys.length;d++){var h={};for(g in e){for(f=0;f<a.v[b].keys[d].w.length;f++)if(a.v[b].keys[d].w[f]===g){h[g]=a.v[b].keys[d].Mo[f];break}f===a.v[b].keys[d].w.length&&(h[g]=0)}a.v[b].keys[d].Mo=h}}for(d=1;d<a.v[b].keys.length;d++)a.v[b].keys[d].time===a.v[b].keys[d-1].time&&
(a.v[b].keys.splice(d,1),d--);for(d=0;d<a.v[b].keys.length;d++)a.v[b].keys[d].index=d}a.xo=!0;return a}},parse:function(a){function b(a,d){d.push(a);for(var e=0;e<a.children.length;e++)b(a.children[e],d)}var d=[];if(a instanceof c.oc)for(var e=0;e<a.Xa.Y.length;e++)d.push(a.Xa.Y[e]);else b(a,d);return d},play:function(a){-1===this.md.indexOf(a)&&this.md.push(a)},stop:function(a){a=this.md.indexOf(a);-1!==a&&this.md.splice(a,1)},update:function(a){for(var b=0;b<this.md.length;b++)this.md[b].update(a)}};
c.Ul=function(a,b){this.root=a;this.data=c.Za.qd(b);this.v=c.Za.parse(a);this.currentTime=0;this.fj=1;this.Rb=!1;this.loop=!0;this.weight=0;this.sd=c.Za.LINEAR};da=c.Ul.prototype;da.Uk=["pos","rot","scl"];da.play=function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.Rb=!0;this.reset();c.Za.play(this)};da.stop=function(){this.Rb=!1;c.Za.stop(this)};
da.reset=function(){for(var a=0,b=this.v.length;a<b;a++){var d=this.v[a];d.la=!0;void 0===d.Ea&&(d.Ea={});void 0===d.Ea[this.data.name]&&(d.Ea[this.data.name]={},d.Ea[this.data.name].ge={ol:0,Zf:0,yl:0},d.Ea[this.data.name].ce={ol:0,Zf:0,yl:0},d.Ea[this.data.name].ll=d.Ha);for(var d=d.Ea[this.data.name],e=0;3>e;e++){for(var f=this.Uk[e],g=this.data.v[a].keys[0],h=this.$d(f,a,1);h.time<this.currentTime&&h.index>g.index;)g=h,h=this.$d(f,a,h.index+1);d.ge[f]=g;d.ce[f]=h}}};
da.update=function(){function a(a,b,d,e,f,g,r){a=.5*(d-a);e=.5*(e-b);return(2*(b-d)+a+e)*r+(-3*(b-d)-2*a-e)*g+a*f+b}function b(b,d){var e=[],f=[],g,p,r,s,u,t;g=(b.length-1)*d;p=Math.floor(g);g-=p;e[0]=0===p?p:p-1;e[1]=p;e[2]=p>b.length-2?p:p+1;e[3]=p>b.length-3?p:p+2;p=b[e[0]];s=b[e[1]];u=b[e[2]];t=b[e[3]];e=g*g;r=g*e;f[0]=a(p[0],s[0],u[0],t[0],g,e,r);f[1]=a(p[1],s[1],u[1],t[1],g,e,r);f[2]=a(p[2],s[2],u[2],t[2],g,e,r);return f}var d=[],e=new c.b,f=new c.b,g=new c.Nb;return function(a){if(!1!==this.Rb&&
(this.currentTime+=a*this.fj,0!==this.weight)){a=this.data.length;if(!0===this.loop&&this.currentTime>a)this.currentTime%=a,this.reset();else if(!1===this.loop&&this.currentTime>a){this.stop();return}a=0;for(var l=this.v.length;a<l;a++)for(var k=this.v[a],m=k.Ea[this.data.name],q=0;3>q;q++){var p=this.Uk[q],r=m.ge[p],s=m.ce[p];if(s.time<=this.currentTime){r=this.data.v[a].keys[0];for(s=this.$d(p,a,1);s.time<this.currentTime&&s.index>r.index;)r=s,s=this.$d(p,a,s.index+1);m.ge[p]=r;m.ce[p]=s}k.la=!0;
k.fc=!0;var u=(this.currentTime-r.time)/(s.time-r.time),t=r[p],w=s[p];0>u&&(u=0);1<u&&(u=1);if("pos"===p)if(this.sd===c.Za.LINEAR)f.x=t[0]+(w[0]-t[0])*u,f.y=t[1]+(w[1]-t[1])*u,f.z=t[2]+(w[2]-t[2])*u,k instanceof c.Yb?(r=this.weight/(this.weight+k.Rd),k.position.Cc(f,r),k.Rd+=this.weight):k.position.c(f);else{if(this.sd===c.Za.Fh||this.sd===c.Za.mg)d[0]=this.Ok("pos",a,r.index-1).pos,d[1]=t,d[2]=w,d[3]=this.$d("pos",a,s.index+1).pos,u=.33*u+.33,s=b(d,u),r=1,k instanceof c.Yb&&(r=this.weight/(this.weight+
k.Rd),k.Rd+=this.weight),p=k.position,p.x+=(s[0]-p.x)*r,p.y+=(s[1]-p.y)*r,p.z+=(s[2]-p.z)*r,this.sd===c.Za.mg&&(u=b(d,1.01*u),e.set(u[0],u[1],u[2]),e.sub(p),e.y=0,e.normalize(),k.rotation.set(0,Math.atan2(e.x,e.z),0))}else"rot"===p?(c.Nb.vh(t,w,g,u),k instanceof c.Yb?0===k.Fe?(k.ab.c(g),k.Fe=this.weight):(r=this.weight/(this.weight+k.Fe),c.Nb.vh(k.ab,g,k.ab,r),k.Fe+=this.weight):k.ab.c(g)):"scl"===p&&(f.x=t[0]+(w[0]-t[0])*u,f.y=t[1]+(w[1]-t[1])*u,f.z=t[2]+(w[2]-t[2])*u,k instanceof c.Yb?(r=this.weight/
(this.weight+k.Jg),k.scale.Cc(f,r),k.Jg+=this.weight):k.scale.c(f))}return!0}}}();da.$d=function(a,b,d){var e=this.data.v[b].keys;for(d=this.sd===c.Za.Fh||this.sd===c.Za.mg?d<e.length-1?d:e.length-1:d%e.length;d<e.length;d++)if(void 0!==e[d][a])return e[d];return this.data.v[b].keys[0]};da.Ok=function(a,b,d){var e=this.data.v[b].keys;for(d=this.sd===c.Za.Fh||this.sd===c.Za.mg?0<d?d:0:0<=d?d:d+e.length;0<=d;d--)if(void 0!==e[d][a])return e[d];return this.data.v[b].keys[e.length-1]};
c.om=function(a){this.root=a.gl;this.data=c.Za.qd(a);this.v=c.Za.parse(this.root);this.currentTime=0;this.fj=.001;this.Rb=!1;this.loop=!0;a=0;for(var b=this.v.length;a<b;a++){var d=this.data.v[a].cs,e=this.v[a];if(this.data.v[a].keys.length&&d){for(var f=0;f<d.length;f++){var g=d[f],h=this.$d(g,a,0);h&&h.apply(g)}e.la=!1;this.data.v[a].gl.xd();e.fc=!0}}};da=c.om.prototype;
da.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.Rb){this.Rb=!0;var b=this.v.length,d,e;for(a=0;a<b;a++)d=this.v[a],e=this.data.v[a],void 0===e.Ea&&(e.Ea={},e.Ea.ge=null,e.Ea.ce=null,e.Ea.ll=d.Ha),d=this.data.v[a].keys,d.length&&(e.Ea.ge=d[0],e.Ea.ce=d[1],this.startTime=Math.min(d[0].time,this.startTime),this.endTime=Math.max(d[d.length-1].time,this.endTime));this.update(0)}c.Za.play(this)};
da.stop=function(){this.Rb=!1;c.Za.stop(this);for(var a=0;a<this.data.v.length;a++){var b=this.v[a],d=this.data.v[a];if(void 0!==d.Ea){var e=d.Ea.ll;e.c(b.Ha);b.Ha=e;delete d.Ea}}};
da.update=function(a){if(!1!==this.Rb){this.currentTime+=a*this.fj;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.v.length;a<b;a++){var d=this.v[a],e=this.data.v[a],f=e.keys,e=e.Ea;if(f.length){var g=e.ge,h=e.ce;if(h.time<=this.currentTime){for(;h.time<this.currentTime&&h.index>g.index;)g=h,h=f[g.index+1];e.ge=g;e.ce=h}this.data.v[a].gl.xd();d.fc=!0}}}};
da.$d=function(a,b,d){b=this.data.v[b].keys;for(d%=b.length;d<b.length;d++)if(b[d].no(a))return b[d];return b[0]};da.Ok=function(a,b,d){b=this.data.v[b].keys;for(d=0<=d?d:d+b.length;0<=d;d--)if(b[d].no(a))return b[d];return b[b.length-1]};c.wm=function(a){this.Se=a;this.frames=a.Ua.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.Rb=!1};
c.wm.prototype={play:function(){this.Rb=!0},pause:function(){this.Rb=!1},update:function(){var a=0,b=0;return function(d){if(!1!==this.Rb){this.currentTime+=d;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);d=this.duration/this.frames;var e=Math.floor(this.currentTime/d);e!=b&&(this.Se.Ua[a]=0,this.Se.Ua[b]=1,this.Se.Ua[e]=0,a=b,b=e);this.Se.Ua[e]=this.currentTime%d/d;this.Se.Ua[a]=1-this.Se.Ua[e]}}}()};
c.lg=function(a,b,d,e,f,g){function h(a,b,d,e,f,g,h,t){var w,x=l.Ch,v=l.Jf,D=f/2,z=g/2,B=l.e.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)w="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)w="y",v=l.wi;else if("z"===a&&"y"===b||"y"===a&&"z"===b)w="x",x=l.wi;var G=x+1,K=v+1,y=f/x,C=g/v,L=new c.b;L[w]=0<h?1:-1;for(f=0;f<K;f++)for(g=0;g<G;g++){var R=new c.b;R[a]=(g*y-D)*d;R[b]=(f*C-z)*e;R[w]=h;l.e.push(R)}for(f=0;f<v;f++)for(g=0;g<x;g++)a=g+G*(f+1),b=g+1+G*(f+1),d=g+1+G*f,e=new c.g(g/x,1-f/v),h=new c.g(g/
x,1-(f+1)/v),w=new c.g((g+1)/x,1-(f+1)/v),D=new c.g((g+1)/x,1-f/v),z=new c.L(g+G*f+B,a+B,d+B),z.D.c(L),z.ka.push(L.clone(),L.clone(),L.clone()),z.Eb=t,l.h.push(z),l.A[0].push([e,h,D]),z=new c.L(a+B,b+B,d+B),z.D.c(L),z.ka.push(L.clone(),L.clone(),L.clone()),z.Eb=t,l.h.push(z),l.A[0].push([h.clone(),w,D.clone()])}c.s.call(this);this.Ch=e||1;this.Jf=f||1;this.wi=g||1;var l=this;e=a/2;f=b/2;g=d/2;h("z","y",-1,-1,d,b,e,0);h("z","y",1,-1,d,b,-e,1);h("x","z",1,1,a,d,f,2);h("x","z",1,-1,a,d,-f,3);h("x","y",
1,-1,a,b,g,4);h("x","y",-1,-1,a,b,-g,5);Tc(this)};c.lg.prototype=Object.create(c.s.prototype);
c.nj=function(a,b,d,e){c.s.call(this);a=a||50;b=void 0!==b?Math.max(3,b):8;d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;var f,g=[],h=new c.g(.5,.5);this.e.push(new c.b);g.push(h);for(f=0;f<=b;f++){var l=new c.b,k=d+f/b*e;l.x=a*Math.cos(k);l.y=a*Math.sin(k);this.e.push(l);g.push(new c.g((l.x/a+1)/2,(l.y/a+1)/2))}d=new c.b(0,0,1);for(f=1;f<=b;f++)this.h.push(new c.L(f,f+1,0,[d.clone(),d.clone(),d.clone()])),this.A[0].push([g[f].clone(),g[f+1].clone(),h.clone()]);this.eb();this.Pa=new c.Ob(new c.b,a)};
c.nj.prototype=Object.create(c.s.prototype);c.Mp=function(a,b,d,e,f,g){console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new c.lg(a,b,d,e,f,g)};
c.qg=function(a,b,d,e,f,g){c.s.call(this);a=void 0!==a?a:20;b=void 0!==b?b:20;d=void 0!==d?d:100;e=e||8;f=f||1;g=void 0!==g?g:!1;var h=d/2,l,k,m=[],q=[];for(k=0;k<=f;k++){var p=[],r=[],s=k/f,u=s*(b-a)+a;for(l=0;l<=e;l++){var t=l/e,w=new c.b;w.x=u*Math.sin(t*Math.PI*2);w.y=-s*d+h;w.z=u*Math.cos(t*Math.PI*2);this.e.push(w);p.push(this.e.length-1);r.push(new c.g(t,1-s))}m.push(p);q.push(r)}d=(b-a)/d;for(l=0;l<e;l++)for(0!==a?(p=this.e[m[0][l]].clone(),r=this.e[m[0][l+1]].clone()):(p=this.e[m[1][l]].clone(),
r=this.e[m[1][l+1]].clone()),p.ag(Math.sqrt(p.x*p.x+p.z*p.z)*d).normalize(),r.ag(Math.sqrt(r.x*r.x+r.z*r.z)*d).normalize(),k=0;k<f;k++){var s=m[k][l],u=m[k+1][l],t=m[k+1][l+1],w=m[k][l+1],x=p.clone(),v=p.clone(),D=r.clone(),z=r.clone(),B=q[k][l].clone(),G=q[k+1][l].clone(),K=q[k+1][l+1].clone(),y=q[k][l+1].clone();this.h.push(new c.L(s,u,w,[x,v,z]));this.A[0].push([B,G,y]);this.h.push(new c.L(u,t,w,[v.clone(),D,z.clone()]));this.A[0].push([G.clone(),K,y.clone()])}if(!1===g&&0<a)for(this.e.push(new c.b(0,
h,0)),l=0;l<e;l++)s=m[0][l],u=m[0][l+1],t=this.e.length-1,x=new c.b(0,1,0),v=new c.b(0,1,0),D=new c.b(0,1,0),B=q[0][l].clone(),G=q[0][l+1].clone(),K=new c.g(G.x,0),this.h.push(new c.L(s,u,t,[x,v,D])),this.A[0].push([B,G,K]);if(!1===g&&0<b)for(this.e.push(new c.b(0,-h,0)),l=0;l<e;l++)s=m[k][l+1],u=m[k][l],t=this.e.length-1,x=new c.b(0,-1,0),v=new c.b(0,-1,0),D=new c.b(0,-1,0),B=q[k][l+1].clone(),G=q[k][l].clone(),K=new c.g(G.x,1),this.h.push(new c.L(s,u,t,[x,v,D])),this.A[0].push([B,G,K]);this.eb()};
c.qg.prototype=Object.create(c.s.prototype);c.nb=function(a,b){"undefined"!==typeof a&&(c.s.call(this),a=a instanceof Array?a:[a],this.gi(a,b),this.eb())};c.nb.prototype=Object.create(c.s.prototype);c.nb.prototype.gi=function(a,b){for(var d=a.length,e=0;e<d;e++)this.fi(a[e],b)};
c.nb.prototype.fi=function(a,b){function d(a,b,d){b||console.log("die");return b.clone().F(d).add(a)}function e(a,b,d){var e=c.Math.sign,f=1,f=a.x-b.x,g=a.y-b.y,h=d.x-a.x,k=d.y-a.y,l=f*f+g*g;if(1E-10<Math.abs(f*k-g*h)){var m=Math.sqrt(l),e=Math.sqrt(h*h+k*k),l=b.x-g/m;b=b.y+f/m;h=((d.x-k/e-l)*k-(d.y+h/e-b)*h)/(f*k-g*h);d=l+f*h-a.x;a=b+g*h-a.y;f=d*d+a*a;if(2>=f)return new c.g(d,a);f=Math.sqrt(f/2)}else a=!1,1E-10<f?1E-10<h&&(a=!0):-1E-10>f?-1E-10>h&&(a=!0):e(g)==e(k)&&(a=!0),a?(d=-g,a=f,f=Math.sqrt(l)):
(d=f,a=g,f=Math.sqrt(l/2));return new c.g(d/f,a/f)}function f(d,e){var f,g;for(P=d.length;0<=--P;){f=P;g=P-1;0>g&&(g=d.length-1);for(var h=0,k=s+2*q,h=0;h<k;h++){var l=T*h,m=T*(h+1),p=e+f+l,l=e+g+l,r=e+g+m,m=e+f+m,t=d,u=h,x=k,w=f,y=g,p=p+ca,l=l+ca,r=r+ca,m=m+ca;R.h.push(new c.L(p,l,m,null,null,v));R.h.push(new c.L(l,r,m,null,null,v));p=D.fo(R,a,t,b,p,l,r,m,u,x,w,y);R.A[0].push([p[0],p[1],p[3]]);R.A[0].push([p[1],p[2],p[3]])}}}function g(a,b,d){R.e.push(new c.b(a,b,d))}function h(d,e,f,g){d+=ca;e+=
ca;f+=ca;R.h.push(new c.L(d,e,f,null,null,x));R.A[0].push(g?D.Lk(R,a,b,d,e,f):D.Mk(R,a,b,d,e,f))}var l=void 0!==b.wk?b.wk:100,k=void 0!==b.ni?b.ni:6,m=void 0!==b.mi?b.mi:k-2,q=void 0!==b.Hn?b.Hn:3,p=void 0!==b.li?b.li:!0,r=void 0!==b.xf?b.xf:12,s=void 0!==b.up?b.up:1,u=b.Jq,t,w=!1,x=b.r,v=b.Iq,D=void 0!==b.ai?b.ai:c.nb.dk,z,B,G,K;u&&(t=u.Ug(s),w=!0,p=!1,z=void 0!==b.frames?b.frames:new c.Ag.uj(u,s,!1),B=new c.b,G=new c.b,K=new c.b);p||(m=k=q=0);var y,C,L,R=this,ca=this.e.length,u=ld(a,r),r=u.shape,
Q=u.Rc;if(u=!c.da.S.Qe(r)){r=r.reverse();C=0;for(L=Q.length;C<L;C++)y=Q[C],c.da.S.Qe(y)&&(Q[C]=y.reverse());u=!1}var E=c.da.S.Ll(r,Q),A=r;C=0;for(L=Q.length;C<L;C++)y=Q[C],r=r.concat(y);var F,J,I,$,O,T=r.length,S,aa=E.length,u=[],P=0;I=A.length;F=I-1;for(J=P+1;P<I;P++,F++,J++)F===I&&(F=0),J===I&&(J=0),u[P]=e(A[P],A[F],A[J]);var W=[],ba,Z=u.concat();C=0;for(L=Q.length;C<L;C++){y=Q[C];ba=[];P=0;I=y.length;F=I-1;for(J=P+1;P<I;P++,F++,J++)F===I&&(F=0),J===I&&(J=0),ba[P]=e(y[P],y[F],y[J]);W.push(ba);Z=
Z.concat(ba)}for(F=0;F<q;F++){I=F/q;$=k*(1-I);J=m*Math.sin(I*Math.PI/2);P=0;for(I=A.length;P<I;P++)O=d(A[P],u[P],J),g(O.x,O.y,-$);C=0;for(L=Q.length;C<L;C++)for(y=Q[C],ba=W[C],P=0,I=y.length;P<I;P++)O=d(y[P],ba[P],J),g(O.x,O.y,-$)}J=m;for(P=0;P<T;P++)O=p?d(r[P],Z[P],J):r[P],w?(G.c(z.Rf[0]).F(O.x),B.c(z.Ng[0]).F(O.y),K.c(t[0]).add(G).add(B),g(K.x,K.y,K.z)):g(O.x,O.y,0);for(I=1;I<=s;I++)for(P=0;P<T;P++)O=p?d(r[P],Z[P],J):r[P],w?(G.c(z.Rf[I]).F(O.x),B.c(z.Ng[I]).F(O.y),K.c(t[I]).add(G).add(B),g(K.x,
K.y,K.z)):g(O.x,O.y,l/s*I);for(F=q-1;0<=F;F--){I=F/q;$=k*(1-I);J=m*Math.sin(I*Math.PI/2);P=0;for(I=A.length;P<I;P++)O=d(A[P],u[P],J),g(O.x,O.y,l+$);C=0;for(L=Q.length;C<L;C++)for(y=Q[C],ba=W[C],P=0,I=y.length;P<I;P++)O=d(y[P],ba[P],J),w?g(O.x,O.y+t[s-1].y,t[s-1].x+$):g(O.x,O.y,l+$)}(function(){if(p){var a;a=0*T;for(P=0;P<aa;P++)S=E[P],h(S[2]+a,S[1]+a,S[0]+a,!0);a=s+2*q;a*=T;for(P=0;P<aa;P++)S=E[P],h(S[0]+a,S[1]+a,S[2]+a,!1)}else{for(P=0;P<aa;P++)S=E[P],h(S[2],S[1],S[0],!0);for(P=0;P<aa;P++)S=E[P],
h(S[0]+T*s,S[1]+T*s,S[2]+T*s,!1)}})();(function(){var a=0;f(A,a);a+=A.length;C=0;for(L=Q.length;C<L;C++)y=Q[C],f(y,a),a+=y.length})()};
c.nb.dk={Mk:function(a,b,d,e,f,g){return[new c.g(a.e[e].x,a.e[e].y),new c.g(a.e[f].x,a.e[f].y),new c.g(a.e[g].x,a.e[g].y)]},Lk:function(a,b,d,e,f,g){return this.Mk(a,b,d,e,f,g)},fo:function(a,b,d,e,f,g,h,l){b=a.e[f].x;d=a.e[f].y;f=a.e[f].z;e=a.e[g].x;var k=a.e[g].y;g=a.e[g].z;var m=a.e[h].x,q=a.e[h].y;h=a.e[h].z;var p=a.e[l].x,r=a.e[l].y;a=a.e[l].z;return.01>Math.abs(d-k)?[new c.g(b,1-f),new c.g(e,1-g),new c.g(m,1-h),new c.g(p,1-a)]:[new c.g(d,1-f),new c.g(k,1-g),new c.g(q,1-h),new c.g(r,1-a)]}};
c.nb.tq=new c.g;c.nb.uq=new c.g;c.nb.vq=new c.g;c.nb.wq=new c.g;c.nb.xq=new c.g;c.nb.yq=new c.g;c.Yh=function(a,b){c.s.call(this);!1===a instanceof Array&&(a=[a]);this.gi(a,b);this.eb()};c.Yh.prototype=Object.create(c.s.prototype);c.Yh.prototype.gi=function(a,b){for(var d=0,e=a.length;d<e;d++)this.fi(a[d],b);return this};
c.Yh.prototype.fi=function(a,b){void 0===b&&(b={});var d=b.r,e=void 0===b.ai?c.nb.dk:b.ai,f,g,h,l=this.e.length;f=ld(a,void 0!==b.xf?b.xf:12);var k=f.shape,m=f.Rc;if(!c.da.S.Qe(k))for(k=k.reverse(),f=0,g=m.length;f<g;f++)h=m[f],c.da.S.Qe(h)&&(m[f]=h.reverse());var q=c.da.S.Ll(k,m);f=0;for(g=m.length;f<g;f++)h=m[f],k=k.concat(h);m=k.length;g=q.length;for(f=0;f<m;f++)h=k[f],this.e.push(new c.b(h.x,h.y,0));for(f=0;f<g;f++)m=q[f],k=m[0]+l,h=m[1]+l,m=m[2]+l,this.h.push(new c.L(k,h,m,null,null,d)),this.A[0].push(e.Lk(this,
a,b,k,h,m))};
c.pm=function(a,b,d,e){c.s.call(this);b=b||12;d=d||0;e=e||2*Math.PI;for(var f=1/(a.length-1),g=1/b,h=0,l=b;h<=l;h++)for(var k=d+h*g*e,m=Math.cos(k),q=Math.sin(k),k=0,p=a.length;k<p;k++){var r=a[k],s=new c.b;s.x=m*r.x-q*r.y;s.y=q*r.x+m*r.y;s.z=r.z;this.e.push(s)}d=a.length;h=0;for(l=b;h<l;h++)for(k=0,p=a.length-1;k<p;k++){b=q=k+d*h;e=q+d;var m=q+1+d,q=q+1,r=h*g,s=k*f,u=r+g,t=s+f;this.h.push(new c.L(b,e,q));this.A[0].push([new c.g(r,s),new c.g(u,s),new c.g(r,t)]);this.h.push(new c.L(e,m,q));this.A[0].push([new c.g(u,
s),new c.g(u,t),new c.g(r,t)])}Tc(this);this.eb();this.vf()};c.pm.prototype=Object.create(c.s.prototype);
c.Kj=function(a,b,d,e){c.s.call(this);var f=a/2,g=b/2;d=d||1;e=e||1;var h=d+1,l=e+1,k=a/d,m=b/e,q=new c.b(0,0,1);for(a=0;a<l;a++){var p=a*m-g;for(b=0;b<h;b++)this.e.push(new c.b(b*k-f,-p,0))}for(a=0;a<e;a++)for(b=0;b<d;b++){var f=b+h*(a+1),g=b+1+h*(a+1),l=b+1+h*a,k=new c.g(b/d,1-a/e),m=new c.g(b/d,1-(a+1)/e),p=new c.g((b+1)/d,1-(a+1)/e),r=new c.g((b+1)/d,1-a/e),s=new c.L(b+h*a,f,l);s.D.c(q);s.ka.push(q.clone(),q.clone(),q.clone());this.h.push(s);this.A[0].push([k,m,r]);s=new c.L(f,g,l);s.D.c(q);s.ka.push(q.clone(),
q.clone(),q.clone());this.h.push(s);this.A[0].push([m.clone(),p,r.clone()])}};c.Kj.prototype=Object.create(c.s.prototype);
c.Lm=function(a,b,d,e,f,g){c.s.call(this);a=a||0;b=b||50;f=void 0!==f?f:0;g=void 0!==g?g:2*Math.PI;d=void 0!==d?Math.max(3,d):8;e=void 0!==e?Math.max(1,e):8;var h,l=[],k=a,m=(b-a)/e;for(a=0;a<e+1;a++){for(h=0;h<d+1;h++){var q=new c.b,p=f+h/d*g;q.x=k*Math.cos(p);q.y=k*Math.sin(p);this.e.push(q);l.push(new c.g((q.x/b+1)/2,(q.y/b+1)/2))}k+=m}b=new c.b(0,0,1);for(a=0;a<e;a++)for(f=a*(d+1),h=0;h<d;h++)g=p=h+f,m=p+d+1,q=p+d+2,this.h.push(new c.L(g,m,q,[b.clone(),b.clone(),b.clone()])),this.A[0].push([l[g].clone(),
l[m].clone(),l[q].clone()]),g=p,m=p+d+2,q=p+1,this.h.push(new c.L(g,m,q,[b.clone(),b.clone(),b.clone()])),this.A[0].push([l[g].clone(),l[m].clone(),l[q].clone()]);this.eb();this.Pa=new c.Ob(new c.b,k)};c.Lm.prototype=Object.create(c.s.prototype);
c.zg=function(a,b,d,e,f,g,h){c.s.call(this);a=a||50;b=Math.max(3,Math.floor(b)||8);d=Math.max(2,Math.floor(d)||6);e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;var l,k,m=[],q=[];for(k=0;k<=d;k++){var p=[],r=[];for(l=0;l<=b;l++){var s=l/b,u=k/d,t=new c.b;t.x=-a*Math.cos(e+s*f)*Math.sin(g+u*h);t.y=a*Math.cos(g+u*h);t.z=a*Math.sin(e+s*f)*Math.sin(g+u*h);this.e.push(t);p.push(this.e.length-1);r.push(new c.g(s,1-u))}m.push(p);q.push(r)}for(k=0;k<d;k++)for(l=0;l<b;l++){e=
m[k][l+1];f=m[k][l];g=m[k+1][l];h=m[k+1][l+1];var p=this.e[e].clone().normalize(),r=this.e[f].clone().normalize(),s=this.e[g].clone().normalize(),u=this.e[h].clone().normalize(),t=q[k][l+1].clone(),w=q[k][l].clone(),x=q[k+1][l].clone(),v=q[k+1][l+1].clone();Math.abs(this.e[e].y)===a?(t.x=(t.x+w.x)/2,this.h.push(new c.L(e,g,h,[p,s,u])),this.A[0].push([t,x,v])):Math.abs(this.e[g].y)===a?(x.x=(x.x+v.x)/2,this.h.push(new c.L(e,f,g,[p,r,s])),this.A[0].push([t,w,x])):(this.h.push(new c.L(e,f,h,[p,r,u])),
this.A[0].push([t,w,v]),this.h.push(new c.L(f,g,h,[r.clone(),s,u.clone()])),this.A[0].push([w.clone(),x,v.clone()]))}this.eb();this.Pa=new c.Ob(new c.b,a)};c.zg.prototype=Object.create(c.s.prototype);c.Um=function(a,b){b=b||{};var d=c.tb.eo(a,b);b.wk=void 0!==b.height?b.height:50;void 0===b.ni&&(b.ni=10);void 0===b.mi&&(b.mi=8);void 0===b.li&&(b.li=!1);c.nb.call(this,d,b)};c.Um.prototype=Object.create(c.nb.prototype);
c.Zj=function(a,b,d,e,f){c.s.call(this);a=a||100;b=b||40;d=d||8;e=e||6;f=f||2*Math.PI;for(var g=new c.b,h=[],l=[],k=0;k<=d;k++)for(var m=0;m<=e;m++){var q=m/e*f,p=k/d*Math.PI*2;g.x=a*Math.cos(q);g.y=a*Math.sin(q);var r=new c.b;r.x=(a+b*Math.cos(p))*Math.cos(q);r.y=(a+b*Math.cos(p))*Math.sin(q);r.z=b*Math.sin(p);this.e.push(r);h.push(new c.g(m/e,k/d));l.push(r.clone().sub(g).normalize())}for(k=1;k<=d;k++)for(m=1;m<=e;m++)a=(e+1)*k+m-1,b=(e+1)*(k-1)+m-1,f=(e+1)*(k-1)+m,g=(e+1)*k+m,q=new c.L(a,b,g,[l[a].clone(),
l[b].clone(),l[g].clone()]),this.h.push(q),this.A[0].push([h[a].clone(),h[b].clone(),h[g].clone()]),q=new c.L(b,f,g,[l[b].clone(),l[f].clone(),l[g].clone()]),this.h.push(q),this.A[0].push([h[b].clone(),h[f].clone(),h[g].clone()]);this.eb()};c.Zj.prototype=Object.create(c.s.prototype);
c.$j=function(a,b,d,e,f,g,h){function l(a,b,d,e,f){b=b/d*a;d=Math.cos(b);return new c.b(e*(2+d)*.5*Math.cos(a),e*(2+d)*Math.sin(a)*.5,f*e*Math.sin(b)*.5)}c.s.call(this);a=a||100;b=b||40;d=d||64;e=e||8;f=f||2;g=g||3;h=h||1;for(var k=Array(d),m=new c.b,q=new c.b,p=new c.b,r=0;r<d;++r){k[r]=Array(e);var s=r/d*2*f*Math.PI,u=l(s,g,f,a,h),s=l(s+.01,g,f,a,h);m.ba(s,u);q.sc(s,u);wb(p,m,q);wb(q,p,m);p.normalize();q.normalize();for(s=0;s<e;++s){var t=s/e*2*Math.PI,w=-b*Math.cos(t),t=b*Math.sin(t),x=new c.b;
x.x=u.x+w*q.x+t*p.x;x.y=u.y+w*q.y+t*p.y;x.z=u.z+w*q.z+t*p.z;k[r][s]=this.e.push(x)-1}}for(r=0;r<d;++r)for(s=0;s<e;++s)b=(r+1)%d,f=(s+1)%e,a=k[b][s],b=k[b][f],f=k[r][f],g=new c.g(r/d,s/e),h=new c.g((r+1)/d,s/e),m=new c.g((r+1)/d,(s+1)/e),q=new c.g(r/d,(s+1)/e),this.h.push(new c.L(k[r][s],a,f)),this.A[0].push([g,h,q]),this.h.push(new c.L(a,b,f)),this.A[0].push([h.clone(),m,q.clone()]);this.eb();this.vf()};c.$j.prototype=Object.create(c.s.prototype);
c.Ag=function(a,b,d,e,f){c.s.call(this);b=b||64;d=d||1;e=e||8;f=f||!1;var g=[],h,l,k=b+1,m,q,p,r,s=new c.b,u,t,w;u=new c.Ag.uj(a,b,f);t=u.Rf;w=u.Ng;this.Il=u.Il;this.Rf=t;this.Ng=w;for(u=0;u<k;u++)for(g[u]=[],m=u/(k-1),r=a.Ff(m),h=t[u],l=w[u],m=0;m<e;m++)q=m/e*2*Math.PI,p=-d*Math.cos(q),q=d*Math.sin(q),s.c(r),s.x+=p*h.x+q*l.x,s.y+=p*h.y+q*l.y,s.z+=p*h.z+q*l.z,g[u][m]=this.e.push(new c.b(s.x,s.y,s.z))-1;for(u=0;u<b;u++)for(m=0;m<e;m++)k=f?(u+1)%b:u+1,s=(m+1)%e,a=g[u][m],d=g[k][m],k=g[k][s],s=g[u][s],
t=new c.g(u/b,m/e),w=new c.g((u+1)/b,m/e),h=new c.g((u+1)/b,(m+1)/e),l=new c.g(u/b,(m+1)/e),this.h.push(new c.L(a,d,s)),this.A[0].push([t,w,l]),this.h.push(new c.L(d,k,s)),this.A[0].push([w.clone(),h,l.clone()]);this.eb();this.vf()};c.Ag.prototype=Object.create(c.s.prototype);
c.Ag.uj=function(a,b,d){var e=new c.b,f=[],g=[],h=[],l=new c.b,k=new c.R;b+=1;var m,q,p,r;this.Il=f;this.Rf=g;this.Ng=h;for(m=0;m<b;m++)r=m/(b-1),q=m,p=a,r=fd(p,r),p=p.Hf(r),f[q]=p,f[m].normalize();g[0]=new c.b;h[0]=new c.b;a=Number.MAX_VALUE;m=Math.abs(f[0].x);q=Math.abs(f[0].y);p=Math.abs(f[0].z);m<=a&&(a=m,e.set(1,0,0));q<=a&&(a=q,e.set(0,1,0));p<=a&&e.set(0,0,1);wb(l,f[0],e).normalize();wb(g[0],f[0],l);wb(h[0],f[0],g[0]);for(m=1;m<b;m++)g[m]=g[m-1].clone(),h[m]=h[m-1].clone(),wb(l,f[m-1],f[m]),
1E-4<l.length()&&(l.normalize(),e=Math.acos(c.Math.tc(f[m-1].va(f[m]),-1,1)),g[m].Q(kc(k,l,e))),wb(h[m],f[m],g[m]);if(d)for(e=Math.acos(c.Math.tc(g[0].va(g[b-1]),-1,1)),e/=b-1,0<f[0].va(wb(l,g[0],g[b-1]))&&(e=-e),m=1;m<b;m++)g[m].Q(kc(k,f[m],e*m)),wb(h[m],f[m],g[m])};
c.ug=function(a,b,d,e){function f(a){var b=a.normalize().clone();b.index=k.e.push(b)-1;b.mb=new c.g(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));return b}function g(a,b,d){var e=new c.L(a.index,b.index,d.index,[a.clone(),b.clone(),d.clone()]);k.h.push(e);w.c(a).add(b).add(d).pd(3);e=Math.atan2(w.z,-w.x);k.A[0].push([l(a.mb,a,e),l(b.mb,b,e),l(d.mb,d,e)])}function h(a,b){for(var d=Math.pow(2,b),e=f(k.e[a.N]),h=f(k.e[a.i]),l=f(k.e[a.O]),m=[],p=0;p<=d;p++){m[p]=
[];for(var q=f(e.clone().Cc(l,p/d)),r=f(h.clone().Cc(l,p/d)),s=d-p,t=0;t<=s;t++)m[p][t]=0==t&&p==d?q:f(q.clone().Cc(r,t/s))}for(p=0;p<d;p++)for(t=0;t<2*(d-p)-1;t++)e=Math.floor(t/2),0==t%2?g(m[p][e+1],m[p+1][e],m[p][e]):g(m[p][e+1],m[p+1][e+1],m[p+1][e])}function l(a,b,d){0>d&&1===a.x&&(a=new c.g(a.x-1,a.y));0===b.x&&0===b.z&&(a=new c.g(d/2/Math.PI+.5,a.y));return a.clone()}c.s.call(this);d=d||1;e=e||0;for(var k=this,m=0,q=a.length;m<q;m+=3)f(new c.b(a[m],a[m+1],a[m+2]));a=this.e;for(var p=[],r=m=
0,q=b.length;m<q;m+=3,r++){var s=a[b[m]],u=a[b[m+1]],t=a[b[m+2]];p[r]=new c.L(s.index,u.index,t.index,[s.clone(),u.clone(),t.clone()])}for(var w=new c.b,m=0,q=p.length;m<q;m++)h(p[m],e);m=0;for(q=this.A[0].length;m<q;m++)b=this.A[0][m],e=b[0].x,a=b[1].x,p=b[2].x,r=Math.max(e,Math.max(a,p)),s=Math.min(e,Math.min(a,p)),.9<r&&.1>s&&(.2>e&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>p&&(b[2].x+=1));m=0;for(q=this.e.length;m<q;m++)this.e[m].F(d);Tc(this);this.eb();this.Pa=new c.Ob(new c.b,d)};c.ug.prototype=Object.create(c.s.prototype);
c.yj=function(a,b){var d=(1+Math.sqrt(5))/2;c.ug.call(this,[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b)};c.yj.prototype=Object.create(c.s.prototype);c.zm=function(a,b){c.ug.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b)};c.zm.prototype=Object.create(c.s.prototype);
c.Tm=function(a,b){c.ug.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b)};c.Tm.prototype=Object.create(c.s.prototype);
c.Em=function(a,b,d){c.s.call(this);var e=this.e,f=this.h,g=this.A[0],h,l,k,m,q=b+1;for(h=0;h<=d;h++)for(m=h/d,l=0;l<=b;l++)k=l/b,k=a(k,m),e.push(k);var p,r,s,u;for(h=0;h<d;h++)for(l=0;l<b;l++)a=h*q+l,e=h*q+l+1,m=(h+1)*q+l+1,k=(h+1)*q+l,p=new c.g(l/b,h/d),r=new c.g((l+1)/b,h/d),s=new c.g((l+1)/b,(h+1)/d),u=new c.g(l/b,(h+1)/d),f.push(new c.L(a,e,k)),g.push([p,r,u]),f.push(new c.L(e,m,k)),g.push([r.clone(),s,u.clone()]);this.eb();this.vf()};c.Em.prototype=Object.create(c.s.prototype);
c.Xl=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),d=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new c.ta;Sc(a,"position",new c.Ma(b,3));Sc(a,"color",new c.Ma(d,3));b=new c.za({q:c.Md});c.T.call(this,a,b,c.Kb)};c.Xl.prototype=Object.create(c.T.prototype);
c.Dh=function(){var a=new c.s;a.e.push(new c.b(0,0,0),new c.b(0,1,0));var b=new c.qg(0,.5,1,5,1);b.Pc(Bc(new c.R,0,-.5,0));return function(d,e,f,g,h,l){c.u.call(this);void 0===g&&(g=16776960);void 0===f&&(f=1);void 0===h&&(h=.2*f);void 0===l&&(l=.2*h);this.position.c(e);this.ah=new c.T(a,new c.za({color:g}));this.ah.la=!1;this.add(this.ah);this.vc=new c.V(b,new c.vb({color:g}));this.vc.la=!1;this.add(this.vc);this.dp(d);this.nh(f,h,l)}}();c.Dh.prototype=Object.create(c.u.prototype);
c.Dh.prototype.dp=function(){var a=new c.b,b;return function(d){if(.99999<d.y)this.ab.set(0,0,0,1);else if(-.99999>d.y)this.ab.set(1,0,0,0);else{a.set(d.z,0,-d.x).normalize();b=Math.acos(d.y);d=this.ab;var e=b/2,f=Math.sin(e);d.m=a.x*f;d.n=a.y*f;d.o=a.z*f;d.J=Math.cos(e);d.na()}}}();c.Dh.prototype.nh=function(a,b,d){void 0===b&&(b=.2*a);void 0===d&&(d=.2*b);this.ah.scale.set(1,a,1);this.ah.xd();this.vc.scale.set(d,b,d);this.vc.position.y=a;this.vc.xd()};
c.mj=function(a){var b=new c.ta;Sc(b,"position",new c.Ma(new Float32Array(72),3));c.T.call(this,b,new c.za({color:16776960}),c.Kb);void 0!==a&&this.update(a)};c.mj.prototype=Object.create(c.T.prototype);
c.mj.prototype.update=function(a){var b=a.j;null===b.Oa&&b.uf();var d=b.Oa.min,b=b.Oa.max,e=this.j.attributes.position.d;e[0]=b.x;e[1]=b.y;e[2]=b.z;e[3]=d.x;e[4]=b.y;e[5]=b.z;e[6]=d.x;e[7]=b.y;e[8]=b.z;e[9]=d.x;e[10]=d.y;e[11]=b.z;e[12]=d.x;e[13]=d.y;e[14]=b.z;e[15]=b.x;e[16]=d.y;e[17]=b.z;e[18]=b.x;e[19]=d.y;e[20]=b.z;e[21]=b.x;e[22]=b.y;e[23]=b.z;e[24]=b.x;e[25]=b.y;e[26]=d.z;e[27]=d.x;e[28]=b.y;e[29]=d.z;e[30]=d.x;e[31]=b.y;e[32]=d.z;e[33]=d.x;e[34]=d.y;e[35]=d.z;e[36]=d.x;e[37]=d.y;e[38]=d.z;
e[39]=b.x;e[40]=d.y;e[41]=d.z;e[42]=b.x;e[43]=d.y;e[44]=d.z;e[45]=b.x;e[46]=b.y;e[47]=d.z;e[48]=b.x;e[49]=b.y;e[50]=b.z;e[51]=b.x;e[52]=b.y;e[53]=d.z;e[54]=d.x;e[55]=b.y;e[56]=b.z;e[57]=d.x;e[58]=b.y;e[59]=d.z;e[60]=d.x;e[61]=d.y;e[62]=b.z;e[63]=d.x;e[64]=d.y;e[65]=d.z;e[66]=b.x;e[67]=d.y;e[68]=b.z;e[69]=b.x;e[70]=d.y;e[71]=d.z;this.j.attributes.position.G=!0;this.j.Yd();this.la=!1;this.l=a.l};
c.lj=function(a,b){var d=void 0!==b?b:8947848;this.object=a;this.pi=new c.Ib;c.V.call(this,new c.lg(1,1,1),new c.vb({color:d,U:!0}))};c.lj.prototype=Object.create(c.V.prototype);c.lj.prototype.update=function(){this.pi.ep(this.object);this.pi.size(this.scale);this.pi.fa(this.position)};
c.Gh=function(a){function b(a,b,e){d(a,e);d(b,e)}function d(a,b){e.e.push(new c.b);e.ha.push(new c.p(b));void 0===g[a]&&(g[a]=[]);g[a].push(e.e.length-1)}var e=new c.s,f=new c.za({color:16777215,q:c.df}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",
16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);c.T.call(this,e,f,c.Kb);this.Jn=a;this.l=a.l;this.la=!1;this.Vo=g;this.update()};c.Gh.prototype=Object.create(c.T.prototype);
c.Gh.prototype.update=function(){var a=new c.b,b=new c.fb,d=new c.Vh;return function(){function e(e,h,l,k){a.set(h,l,k);d.Ol(a,b);e=f.Vo[e];if(void 0!==e)for(h=0,l=e.length;h<l;h++)f.j.e[e[h]].c(a)}var f=this;b.xa.c(this.Jn.xa);e("c",0,0,-1);e("t",0,0,1);e("n1",-1,-1,-1);e("n2",1,-1,-1);e("n3",-1,1,-1);e("n4",1,1,-1);e("f1",-1,-1,1);e("f2",1,-1,1);e("f3",-1,1,1);e("f4",1,1,1);e("u1",.7,1.1,-1);e("u2",-.7,1.1,-1);e("u3",0,2,-1);e("cf1",-1,0,1);e("cf2",1,0,1);e("cf3",0,-1,1);e("cf4",0,1,1);e("cn1",
-1,0,-1);e("cn2",1,0,-1);e("cn3",0,-1,-1);e("cn4",0,1,-1);this.j.Ya=!0}}();c.rj=function(a,b){c.u.call(this);this.W=a;this.W.pa();this.l=a.l;this.la=!1;b=b||1;var d=new c.s;d.e.push(new c.b(-b,b,0),new c.b(b,b,0),new c.b(b,-b,0),new c.b(-b,-b,0),new c.b(-b,b,0));var e=new c.za({K:!1});e.color.c(this.W.color).F(this.W.ga);this.$g=new c.T(d,e);this.add(this.$g);d=new c.s;d.e.push(new c.b,new c.b);e=new c.za({K:!1});e.color.c(this.W.color).F(this.W.ga);this.yh=new c.T(d,e);this.add(this.yh);this.update()};
c.rj.prototype=Object.create(c.u.prototype);c.rj.prototype.update=function(){var a=new c.b,b=new c.b,d=new c.b;return function(){lb(a,this.W.l);lb(b,this.W.target.l);d.ba(b,a);this.$g.kb(d);this.$g.r.color.c(this.W.color).F(this.W.ga);this.yh.j.e[1].c(d);this.yh.j.Ya=!0;this.yh.r.color.c(this.$g.r.color)}}();
c.jm=function(a,b){function d(a,b){return a-b}var e=void 0!==b?b:16777215,f=[0,0],g={},h=["a","b","c"],l=new c.ta,k=a.j.clone();Tc(k);k.eb();for(var m=k.e,k=k.h,q=0,p=0,r=k.length;p<r;p++)for(var s=k[p],u=0;3>u;u++){f[0]=s[h[u]];f[1]=s[h[(u+1)%3]];f.sort(d);var t=f.toString();void 0===g[t]?(g[t]={Cp:f[0],Dp:f[1],bo:p,Ai:void 0},q++):g[t].Ai=p}Sc(l,"position",new c.km(6*q));f=l.attributes.position.d;h=0;for(t in g)if(q=g[t],void 0===q.Ai||.9999>k[q.bo].D.va(k[q.Ai].D))p=m[q.Cp],f[h++]=p.x,f[h++]=p.y,
f[h++]=p.z,p=m[q.Dp],f[h++]=p.x,f[h++]=p.y,f[h++]=p.z;c.T.call(this,l,new c.za({color:e}),c.Kb);this.la=!1;this.l=a.l};c.jm.prototype=Object.create(c.T.prototype);c.tj=function(a,b,d,e){this.object=a;this.size=void 0!==b?b:1;a=void 0!==d?d:16776960;e=void 0!==e?e:1;b=new c.s;d=0;for(var f=this.object.j.h.length;d<f;d++)b.e.push(new c.b,new c.b);c.T.call(this,b,new c.za({color:a,jb:e}),c.Kb);this.la=!1;this.de=new c.ub;this.update()};c.tj.prototype=Object.create(c.T.prototype);
c.tj.prototype.update=function(){var a=this.j.e,b=this.object,d=b.j.e,e=b.j.h,f=b.l;b.pa(!0);Sb(this.de,f);for(var g=b=0,h=e.length;b<h;b++,g+=2){var l=e[b];a[g].c(d[l.N]).add(d[l.i]).add(d[l.O]).pd(3).Q(f);Qb(a[g+1].c(l.D),this.de).normalize().F(this.size).add(a[g])}this.j.Ya=!0;return this};
c.lm=function(a,b){var d=new c.s,e=new c.za({q:c.Md});this.Nn=new c.p(4473924);this.On=new c.p(8947848);for(var f=-a;f<=a;f+=b){d.e.push(new c.b(-a,0,f),new c.b(a,0,f),new c.b(f,0,-a),new c.b(f,0,a));var g=0===f?this.Nn:this.On;d.ha.push(g,g,g,g)}c.T.call(this,d,e,c.Kb)};c.lm.prototype=Object.create(c.T.prototype);
c.xj=function(a,b){c.u.call(this);this.W=a;this.W.pa();this.l=a.l;this.la=!1;this.ha=[new c.p,new c.p];var d=new c.zg(b,4,2);d.Pc(Ac());for(var e=0;8>e;e++)d.h[e].color=this.ha[4>e?0:1];e=new c.vb({q:c.df,U:!0});this.Ji=new c.V(d,e);this.add(this.Ji);this.update()};c.xj.prototype=Object.create(c.u.prototype);c.xj.prototype.update=function(){var a=new c.b;return function(){this.ha[0].c(this.W.color).F(this.W.ga);this.ha[1].c(this.W.If).F(this.W.ga);this.Ji.kb(lb(a,this.W.l).be());this.Ji.j.Ab=!0}}();
c.Lj=function(a,b){this.W=a;this.W.pa();var d=new c.zg(b,4,2),e=new c.vb({U:!0,K:!1});e.color.c(this.W.color).F(this.W.ga);c.V.call(this,d,e);this.l=this.W.l;this.la=!1};c.Lj.prototype=Object.create(c.V.prototype);c.Lj.prototype.update=function(){this.r.color.c(this.W.color).F(this.W.ga)};
c.Uj=function(a){this.Y=od(this,a);for(var b=new c.s,d=0;d<this.Y.length;d++)this.Y[d].parent instanceof c.Yb&&(b.e.push(new c.b),b.e.push(new c.b),b.ha.push(new c.p(0,0,1)),b.ha.push(new c.p(0,1,0)));d=new c.za({q:c.Md,xc:!1,yc:!1,bb:!0});c.T.call(this,b,d,c.Kb);this.root=a;this.l=a.l;this.la=!1;this.update()};c.Uj.prototype=Object.create(c.T.prototype);function od(a,b){var d=[];b instanceof c.Yb&&d.push(b);for(var e=0;e<b.children.length;e++)d.push.apply(d,od(a,b.children[e]));return d}
c.Uj.prototype.update=function(){for(var a=this.j,b=(new c.R).Cb(this.root.l),d=new c.R,e=0,f=0;f<this.Y.length;f++){var g=this.Y[f];g.parent instanceof c.Yb&&(Wb(d,b,g.l),lb(a.e[e],d),Wb(d,b,g.parent.l),lb(a.e[e+1],d),e+=2)}a.Ya=!0;a.Yd()};c.Vj=function(a){c.u.call(this);this.W=a;this.W.pa();this.l=a.l;this.la=!1;a=new c.qg(0,1,1,8,1,!0);a.Pc(Bc(new c.R,0,-.5,0));a.Pc(Ac());var b=new c.vb({U:!0,K:!1});this.vc=new c.V(a,b);this.add(this.vc);this.update()};c.Vj.prototype=Object.create(c.u.prototype);
c.Vj.prototype.update=function(){var a=new c.b,b=new c.b;return function(){var d=this.W.Ba?this.W.Ba:1E4,e=d*Math.tan(this.W.mf);this.vc.scale.set(e,e,d);lb(a,this.W.l);lb(b,this.W.target.l);this.vc.kb(b.sub(a));this.vc.r.color.c(this.W.color).F(this.W.ga)}}();
c.bk=function(a,b,d,e){this.object=a;this.size=void 0!==b?b:1;b=void 0!==d?d:16711680;e=void 0!==e?e:1;d=new c.s;a=a.j.h;for(var f=0,g=a.length;f<g;f++)for(var h=0,l=a[f].ka.length;h<l;h++)d.e.push(new c.b,new c.b);c.T.call(this,d,new c.za({color:b,jb:e}),c.Kb);this.la=!1;this.de=new c.ub;this.update()};c.bk.prototype=Object.create(c.T.prototype);
c.bk.prototype.update=function(){var a=new c.b;return function(){var b=["a","b","c","d"];this.object.pa(!0);Sb(this.de,this.object.l);for(var d=this.j.e,e=this.object.j.e,f=this.object.j.h,g=this.object.l,h=0,l=0,k=f.length;l<k;l++)for(var m=f[l],q=0,p=m.ka.length;q<p;q++){var r=m.ka[q];d[h].c(e[m[b[q]]]).Q(g);Qb(a.c(r),this.de).normalize().F(this.size);a.add(d[h]);h+=1;d[h].c(a);h+=1}this.j.Ya=!0;return this}}();
c.ck=function(a,b,d,e){this.object=a;this.size=void 0!==b?b:1;b=void 0!==d?d:255;e=void 0!==e?e:1;d=new c.s;a=a.j.h;for(var f=0,g=a.length;f<g;f++)for(var h=0,l=a[f].Ad.length;h<l;h++)d.e.push(new c.b),d.e.push(new c.b);c.T.call(this,d,new c.za({color:b,jb:e}),c.Kb);this.la=!1;this.update()};c.ck.prototype=Object.create(c.T.prototype);
c.ck.prototype.update=function(){var a=new c.b;return function(){var b=["a","b","c","d"];this.object.pa(!0);for(var d=this.j.e,e=this.object.j.e,f=this.object.j.h,g=this.object.l,h=0,l=0,k=f.length;l<k;l++)for(var m=f[l],q=0,p=m.Ad.length;q<p;q++){var r=m.Ad[q];d[h].c(e[m[b[q]]]).Q(g);var r=a.c(r),s=r.x,u=r.y,t=r.z,w=g.elements;r.x=w[0]*s+w[4]*u+w[8]*t;r.y=w[1]*s+w[5]*u+w[9]*t;r.z=w[2]*s+w[6]*u+w[10]*t;r.normalize();r.F(this.size);a.add(d[h]);h+=1;d[h].c(a);h+=1}this.j.Ya=!0;return this}}();
c.an=function(a,b){function d(a,b){return a-b}var e=void 0!==b?b:16777215,f=[0,0],g={},h=["a","b","c"],l=new c.ta;if(a.j instanceof c.s){for(var k=a.j.e,m=a.j.h,q=0,p=new Uint32Array(6*m.length),r=0,s=m.length;r<s;r++)for(var u=m[r],t=0;3>t;t++){f[0]=u[h[t]];f[1]=u[h[(t+1)%3]];f.sort(d);var w=f.toString();void 0===g[w]&&(p[2*q]=f[0],p[2*q+1]=f[1],g[w]=!0,q++)}f=new Float32Array(6*q);r=0;for(s=q;r<s;r++)for(t=0;2>t;t++)q=k[p[2*r+t]],h=6*r+3*t,f[h+0]=q.x,f[h+1]=q.y,f[h+2]=q.z;Sc(l,"position",new c.Ma(f,
3))}else if(a.j instanceof c.ta){if(void 0!==a.j.attributes.index){for(var k=a.j.attributes.position.d,s=a.j.attributes.index.d,m=a.j.Tb,q=0,p=new Uint32Array(2*s.length),u=0,x=m.length;u<x;++u)for(var t=m[u].start,w=m[u].count,h=m[u].index,r=t,v=t+w;r<v;r+=3)for(t=0;3>t;t++)f[0]=h+s[r+t],f[1]=h+s[r+(t+1)%3],f.sort(d),w=f.toString(),void 0===g[w]&&(p[2*q]=f[0],p[2*q+1]=f[1],g[w]=!0,q++);f=new Float32Array(6*q);r=0;for(s=q;r<s;r++)for(t=0;2>t;t++)h=6*r+3*t,q=3*p[2*r+t],f[h+0]=k[q],f[h+1]=k[q+1],f[h+
2]=k[q+2]}else for(k=a.j.attributes.position.d,q=k.length/3,p=q/3,f=new Float32Array(6*q),r=0,s=p;r<s;r++)for(t=0;3>t;t++)h=18*r+6*t,p=9*r+3*t,f[h+0]=k[p],f[h+1]=k[p+1],f[h+2]=k[p+2],q=9*r+(t+1)%3*3,f[h+3]=k[q],f[h+4]=k[q+1],f[h+5]=k[q+2];Sc(l,"position",new c.Ma(f,3))}c.T.call(this,l,new c.za({color:e}),c.Kb);this.la=!1;this.l=a.l};c.an.prototype=Object.create(c.T.prototype);c.Lh=function(){c.u.call(this);this.t=function(){}};c.Lh.prototype=Object.create(c.u.prototype);
c.Mh=function(a,b,d,e,f){c.u.call(this);this.Lf=[];this.k=new c.b;this.Dk=void 0;void 0!==a&&this.add(a,b,d,e,f)};c.Mh.prototype=Object.create(c.u.prototype);c.Mh.prototype.add=function(a,b,d,e,f,g){void 0===b&&(b=-1);void 0===d&&(d=0);void 0===g&&(g=1);void 0===f&&(f=new c.p(16777215));void 0===e&&(e=c.Uh);d=Math.min(d,Math.max(0,d));this.Lf.push({vp:a,size:b,Ba:d,x:0,y:0,z:0,scale:1,rotation:1,opacity:g,color:f,Na:e})};
function pd(a){var b,d=a.Lf.length,e,f=2*-a.k.x,g=2*-a.k.y;for(b=0;b<d;b++)e=a.Lf[b],e.x=a.k.x+f*e.Ba,e.y=a.k.y+g*e.Ba,e.Fp=e.x*Math.PI*.25,e.rotation+=.25*(e.Fp-e.rotation)}c.Bj=function(a,b){c.V.call(this,a,b);this.yk={};this.hi=[];var d=this.j.w.length,e=d-1,d=d/1,e={sp:0,Gq:e,length:e-0+1,Rq:d,duration:(e-0)/d,Ii:0,wf:0,qn:!1,time:0,direction:1,weight:1,Ke:!1,gh:!1};this.yk.__default=e;this.hi.push(e);if(e=this.yk.__default)e.weight=1};c.Bj.prototype=Object.create(c.V.prototype);
c.Bj.prototype.update=function(a){for(var b=0,d=this.hi.length;b<d;b++){var e=this.hi[b];if(e.qn){var f=e.duration/e.length;e.time+=e.direction*a;if(e.gh){if(e.time>e.duration||0>e.time)e.direction*=-1,e.time>e.duration&&(e.time=e.duration,e.Ke=!0),0>e.time&&(e.time=0,e.Ke=!1)}else e.time%=e.duration,0>e.time&&(e.time+=e.duration);var g=e.sp+c.Math.tc(Math.floor(e.time/f),0,e.length-1),h=e.weight;g!==e.wf&&(this.Ua[e.Ii]=0,this.Ua[e.wf]=1*h,this.Ua[g]=0,e.Ii=e.wf,e.wf=g);f=e.time%f/f;e.Ke&&(f=1-f);
this.Ua[e.wf]=f*h;this.Ua[e.Ii]=(1-f)*h}}};
c.qm=function(){function a(a,b){var e=d.createProgram(),f=d.createShader(d.FRAGMENT_SHADER),g=d.createShader(d.VERTEX_SHADER),h="precision "+b+" float;\n";d.shaderSource(f,h+a.H);d.shaderSource(g,h+a.I);d.compileShader(f);d.compileShader(g);d.attachShader(e,f);d.attachShader(e,g);d.linkProgram(e);return e}var b=[],d,e,f,g,h,l,k,m,q,p,r,s,u;this.qd=function(b){d=b.od;e=b;f=b.Ei();g=new Float32Array(16);h=new Uint16Array(6);b=0;g[b++]=-1;g[b++]=-1;g[b++]=0;g[b++]=0;g[b++]=1;g[b++]=-1;g[b++]=1;g[b++]=
0;g[b++]=1;g[b++]=1;g[b++]=1;g[b++]=1;g[b++]=-1;g[b++]=1;g[b++]=0;g[b++]=1;b=0;h[b++]=0;h[b++]=1;h[b++]=2;h[b++]=0;h[b++]=2;h[b++]=3;l=d.createBuffer();k=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,l);d.bufferData(d.ARRAY_BUFFER,g,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,k);d.bufferData(d.ELEMENT_ARRAY_BUFFER,h,d.STATIC_DRAW);m=d.createTexture();q=d.createTexture();d.bindTexture(d.TEXTURE_2D,m);d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null);d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.bindTexture(d.TEXTURE_2D,q);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);
d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);0>=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(p=!1,r=a(c.Sj.lensFlare,f)):(p=!0,r=a(c.Sj.lensFlareVertexTexture,f));s={};u={};s.Ql=d.getAttribLocation(r,"position");s.mb=d.getAttribLocation(r,"uv");u.Wi=d.getUniformLocation(r,"renderType");u.map=d.getUniformLocation(r,"map");u.Po=d.getUniformLocation(r,"occlusionMap");u.opacity=d.getUniformLocation(r,"opacity");u.color=d.getUniformLocation(r,"color");u.scale=d.getUniformLocation(r,
"scale");u.rotation=d.getUniformLocation(r,"rotation");u.zl=d.getUniformLocation(r,"screenPosition")};this.t=function(a,f,g,h){b.length=0;Rc(a,function(a){a instanceof c.Mh&&b.push(a)});if(0!==b.length){a=new c.b;var D=h/g,z=.5*g,B=.5*h,G=16/h,K=new c.g(G*D,G),y=new c.b(1,1,0),C=new c.g(1,1),L=u,G=s;d.useProgram(r);d.enableVertexAttribArray(s.Ql);d.enableVertexAttribArray(s.mb);d.uniform1i(L.Po,0);d.uniform1i(L.map,1);d.bindBuffer(d.ARRAY_BUFFER,l);d.vertexAttribPointer(G.Ql,2,d.FLOAT,!1,16,0);d.vertexAttribPointer(G.mb,
2,d.FLOAT,!1,16,8);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,k);d.disable(d.CULL_FACE);d.depthMask(!1);for(var R=0,ca=b.length;R<ca;R++){G=16/h;K.set(G*D,G);var Q=b[R];a.set(Q.l.elements[12],Q.l.elements[13],Q.l.elements[14]);a.Q(f.Ca);Hb(a,f.xa);y.c(a);C.x=y.x*z+z;C.y=y.y*B+B;if(p||0<C.x&&C.x<g&&0<C.y&&C.y<h){d.activeTexture(d.TEXTURE1);d.bindTexture(d.TEXTURE_2D,m);d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,C.x-8,C.y-8,16,16,0);d.uniform1i(L.Wi,0);d.uniform2f(L.scale,K.x,K.y);d.uniform3f(L.zl,y.x,y.y,y.z);
d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0);d.activeTexture(d.TEXTURE0);d.bindTexture(d.TEXTURE_2D,q);d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,C.x-8,C.y-8,16,16,0);d.uniform1i(L.Wi,1);d.disable(d.DEPTH_TEST);d.activeTexture(d.TEXTURE1);d.bindTexture(d.TEXTURE_2D,m);d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0);Q.k.c(y);Q.Dk?Q.Dk(Q):pd(Q);d.uniform1i(L.Wi,2);d.enable(d.BLEND);for(var E=0,A=Q.Lf.length;E<A;E++){var F=Q.Lf[E];.001<F.opacity&&.001<F.scale&&
(y.x=F.x,y.y=F.y,y.z=F.z,G=F.size*F.scale/h,K.x=G*D,K.y=G,d.uniform3f(L.zl,y.x,y.y,y.z),d.uniform2f(L.scale,K.x,K.y),d.uniform1f(L.rotation,F.rotation),d.uniform1f(L.opacity,F.opacity),d.uniform3f(L.color,F.color.C,F.color.B,F.color.i),e.Xe(F.Na,F.blendEquation,F.Xd,F.Wd),e.Ye(F.vp,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(!0)}}};
c.Xh=function(){function a(b,d,e){if(d.visible){var f=b.qc[d.id];if(f&&d.qb&&(!1===d.Oe||!0===l.Yg(d)))for(var g=0,h=f.length;g<h;g++){var k=f[g];Wb(d.rc,e.Ca,d.l);r.push(k)}g=0;for(h=d.children.length;g<h;g++)a(b,d.children[g],e)}}var b,d,e,f,g,h,l=new c.Ed,k=new c.R,m=new c.b,q=new c.b,p=new c.b,r=[];this.qd=function(a){b=a.od;d=a;a=c.yg.depthRGBA;var k=c.ac.clone(a.M);e=new c.Da({H:a.H,I:a.I,M:k});f=new c.Da({H:a.H,I:a.I,M:k,w:!0});g=new c.Da({H:a.H,I:a.I,M:k,sa:!0});h=new c.Da({H:a.H,I:a.I,M:k,
w:!0,sa:!0});e.kd=!0;f.kd=!0;g.kd=!0;h.kd=!0};this.t=function(a,b){d.je&&d.gp&&this.update(a,b)};this.update=function(s,u){var t,w,x,v,D,z,B,G,K=[];v=0;b.clearColor(1,1,1,1);b.disable(b.BLEND);b.enable(b.CULL_FACE);b.frontFace(b.CCW);d.Bl===c.Hh?b.cullFace(b.FRONT):b.cullFace(b.BACK);d.he(!0);t=0;for(w=s.xb.length;t<w;t++)if(x=s.xb[t],x.qb)if(x instanceof c.sb&&x.fg)for(D=0;D<x.aj;D++){var y;if(x.ie[D])y=x.ie[D];else{B=x;var C=D;y=new c.sb;y.yo=!0;y.wd=!0;y.qb=!0;y.Yc=B.Yc;y.Xc=B.Xc;y.cg=B.cg;y.dg=
B.dg;y.bg=B.bg;y.eg=B.eg;y.Ub=B.Ub;y.hc=B.hc;y.Vc=B.ph[C];y.$c=B.dj[C];y.Zc=B.bj[C];y.nl=[];y.Oi=[];G=y.nl;z=y.Oi;for(var L=0;8>L;L++)G[L]=new c.b,z[L]=new c.b;G=B.rh[C];B=B.qh[C];z[0].set(-1,-1,G);z[1].set(1,-1,G);z[2].set(-1,1,G);z[3].set(1,1,G);z[4].set(-1,-1,B);z[5].set(1,-1,B);z[6].set(-1,1,B);z[7].set(1,1,B);y.Qo=u;z=new c.Kh;z.position.c(x.cj);z.add(y);z.add(y.target);u.add(z);x.ie[D]=y;console.log("Created virtualLight",y)}C=x;G=D;B=C.ie[G];B.position.c(C.position);B.target.position.c(C.target.position);
B.kb(B.target);B.Ub=C.Ub;B.hc=C.hc;B.Vc=C.ph[G];z=C.rh[G];C=C.qh[G];B=B.Oi;B[0].z=z;B[1].z=z;B[2].z=z;B[3].z=z;B[4].z=C;B[5].z=C;B[6].z=C;B[7].z=C;K[v]=y;v++}else K[v]=x,v++;t=0;for(w=K.length;t<w;t++){x=K[t];x.Ze||(D=c.Fd,d.gg===c.Jj&&(D=c.ve),x.Ze=new c.Nd(x.$c,x.Zc,{rb:D,Sb:D,format:c.Jd}),x.uh=new c.g(x.$c,x.Zc),x.$e=new c.R);if(!x.Wc){if(x instanceof c.Lc)x.Wc=new c.Mb(x.$i,x.$c/x.Zc,x.Yc,x.Xc);else if(x instanceof c.sb)x.Wc=new c.we(x.cg,x.dg,x.eg,x.bg,x.Yc,x.Xc);else{console.error("Unsupported light type for shadow");
continue}s.add(x.Wc);!0===s.Ge&&s.pa()}x.Ub&&!x.tf&&(x.tf=new c.Gh(x.Wc),x.Wc.add(x.tf));if(x.yo&&y.Qo==u){D=u;v=x.Wc;z=x.Oi;B=x.nl;m.set(Infinity,Infinity,Infinity);q.set(-Infinity,-Infinity,-Infinity);for(C=0;8>C;C++)G=B[C],G.c(z[C]),c.Xh.gn.Ol(G,D),G.Q(v.Ca),G.x<m.x&&(m.x=G.x),G.x>q.x&&(q.x=G.x),G.y<m.y&&(m.y=G.y),G.y>q.y&&(q.y=G.y),G.z<m.z&&(m.z=G.z),G.z>q.z&&(q.z=G.z);v.left=m.x;v.right=q.x;v.top=q.y;v.bottom=m.y;v.zh()}v=x.Ze;z=x.$e;D=x.Wc;lb(D.position,x.l);lb(p,x.target.l);D.kb(p);D.pa();
D.Ca.Cb(D.l);x.tf&&(x.tf.visible=x.Ub);x.Ub&&x.tf.update();z.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);z.multiply(D.xa);z.multiply(D.Ca);Wb(k,D.xa,D.Ca);Cc(l,k);d.Yi(v);d.clear();r.length=0;a(s,s,D);x=0;for(v=r.length;x<v;x++)B=r[x],z=B.object,B=B.buffer,C=z.r instanceof c.dd?z.r.Ta[0]:z.r,G=void 0!==z.j.w&&0<z.j.w.length&&C.w,L=z instanceof c.oc&&C.sa,G=z.Og?z.Og:L?G?h:g:G?f:e,d.oh(C),B instanceof c.ta?d.Ui(D,s.xb,null,G,B,z):d.Ti(D,s.xb,null,G,B,z);C=s.hd;x=0;for(v=C.length;x<v;x++)B=C[x],z=B.object,
z.visible&&z.qb&&(Wb(z.rc,D.Ca,z.l),d.Vi(D,s.xb,null,e,z))}t=d.Di();b.clearColor(t.C,t.B,t.i,0);b.enable(b.BLEND);d.Bl===c.Hh&&b.cullFace(b.BACK)}};c.Xh.gn=new c.Vh;
c.Pm=function(){var a,b,d,e,f,g,h,l,k,m,q,p,r,s,u,t,w;function x(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var v,D,z,B=[],G,K,y,C,L;this.qd=function(x){v=x.od;D=x;G=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);K=new Uint16Array([0,1,2,0,2,3]);y=v.createBuffer();C=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,y);v.bufferData(v.ARRAY_BUFFER,G,v.STATIC_DRAW);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,C);v.bufferData(v.ELEMENT_ARRAY_BUFFER,K,v.STATIC_DRAW);x=v.createProgram();var B=v.createShader(v.VERTEX_SHADER),
Q=v.createShader(v.FRAGMENT_SHADER);v.shaderSource(B,["precision "+D.Ei()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
v.shaderSource(Q,["precision "+D.Ei()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
v.compileShader(B);v.compileShader(Q);v.attachShader(x,B);v.attachShader(x,Q);v.linkProgram(x);L=x;t=v.getAttribLocation(L,"position");w=v.getAttribLocation(L,"uv");a=v.getUniformLocation(L,"uvOffset");b=v.getUniformLocation(L,"uvScale");d=v.getUniformLocation(L,"rotation");e=v.getUniformLocation(L,"scale");f=v.getUniformLocation(L,"color");g=v.getUniformLocation(L,"map");h=v.getUniformLocation(L,"opacity");l=v.getUniformLocation(L,"modelViewMatrix");k=v.getUniformLocation(L,"projectionMatrix");m=
v.getUniformLocation(L,"fogType");q=v.getUniformLocation(L,"fogDensity");p=v.getUniformLocation(L,"fogNear");r=v.getUniformLocation(L,"fogFar");s=v.getUniformLocation(L,"fogColor");u=v.getUniformLocation(L,"alphaTest");x=document.createElement("canvas");x.width=8;x.height=8;B=x.getContext("2d");B.fillStyle="white";B.fillRect(0,0,8,8);z=new c.ua(x);z.G=!0};this.t=function(G,K){B.length=0;Rc(G,function(a){a instanceof c.Mc&&B.push(a)});if(0!==B.length){v.useProgram(L);v.enableVertexAttribArray(t);v.enableVertexAttribArray(w);
v.disable(v.CULL_FACE);v.enable(v.BLEND);v.bindBuffer(v.ARRAY_BUFFER,y);v.vertexAttribPointer(t,2,v.FLOAT,!1,16,0);v.vertexAttribPointer(w,2,v.FLOAT,!1,16,8);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,C);v.uniformMatrix4fv(k,!1,K.xa.elements);v.activeTexture(v.TEXTURE0);v.uniform1i(g,0);var Q=0,E=0,A=G.K;A?(v.uniform3f(s,A.color.C,A.color.B,A.color.i),A instanceof c.rg?(v.uniform1f(p,A.Va),v.uniform1f(r,A.Ra),v.uniform1i(m,1),E=Q=1):A instanceof c.ef&&(v.uniform1f(q,A.vi),v.uniform1i(m,2),E=Q=2)):(v.uniform1i(m,
0),E=Q=0);for(var A=0,F=B.length;A<F;A++){var J=B[A],I=J.r;Wb(J.rc,K.Ca,J.l);J.z=-J.rc.elements[14]}B.sort(x);for(var $=[],A=0,F=B.length;A<F;A++)J=B[A],I=J.r,v.uniform1f(u,I.Sd),v.uniformMatrix4fv(l,!1,J.rc.elements),$[0]=J.scale.x,$[1]=J.scale.y,J=0,G.K&&I.K&&(J=E),Q!==J&&(v.uniform1i(m,J),Q=J),null!==I.map?(v.uniform2f(a,I.map.offset.x,I.map.offset.y),v.uniform2f(b,I.map.repeat.x,I.map.repeat.y)):(v.uniform2f(a,0,0),v.uniform2f(b,1,1)),v.uniform1f(h,I.opacity),v.uniform3f(f,I.color.C,I.color.B,
I.color.i),v.uniform1f(d,I.rotation),v.uniform2fv(e,$),D.Xe(I.Na,I.blendEquation,I.Xd,I.Wd),D.he(I.xc),D.$f(I.yc),I.map&&I.map.Z&&I.map.Z.width?D.Ye(I.map,0):D.Ye(z,0),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0);v.enable(v.CULL_FACE)}}};
c.Sp=function(){function a(b,d,e){if(d.visible){var f=b.qc[d.id];if(f&&(!1===d.Oe||!0===l.Yg(d)))for(var g=0,h=f.length;g<h;g++){var k=f[g];Wb(d.rc,e.Ca,d.l);m.push(k)}g=0;for(h=d.children.length;g<h;g++)a(b,d.children[g],e)}}this.enabled=!1;this.vl=null;var b,d,e,f,g,h,l=new c.Ed,k=new c.R,m=[];this.qd=function(a){b=a.od;d=a;a=c.yg.depthRGBA;var k=c.ac.clone(a.M);e=new c.Da({H:a.H,I:a.I,M:k});f=new c.Da({H:a.H,I:a.I,M:k,w:!0});g=new c.Da({H:a.H,I:a.I,M:k,sa:!0});h=new c.Da({H:a.H,I:a.I,M:k,w:!0,
sa:!0});e.kd=!0;f.kd=!0;g.kd=!0;h.kd=!0};this.t=function(a,b){this.enabled&&this.update(a,b)};this.update=function(q,p){var r,s,u,t,w;b.clearColor(1,1,1,1);b.disable(b.BLEND);d.he(!0);!0===q.Ge&&q.pa();p.Ca.Cb(p.l);Wb(k,p.xa,p.Ca);Cc(l,k);d.Yi(this.vl);d.clear();m.length=0;a(q,q,p);var x;r=0;for(s=m.length;r<s;r++)u=m[r],w=u.object,u=u.buffer,w instanceof c.$b&&!w.Og||((x=w.r instanceof c.dd?w.r.Ta[0]:w.r)&&d.oh(w.r),t=void 0!==w.j.w&&0<w.j.w.length&&x.w,x=w instanceof c.oc&&x.sa,t=w.Og?w.Og:x?t?
h:g:t?f:e,u instanceof c.ta?d.Ui(p,q.xb,null,t,u,w):d.Ti(p,q.xb,null,t,u,w));t=q.hd;r=0;for(s=t.length;r<s;r++)u=t[r],w=u.object,w.visible&&(Wb(w.rc,p.Ca,w.l),d.Vi(p,q.xb,null,e,w));r=d.Di();b.clearColor(r.C,r.B,r.i,0);b.enable(b.BLEND)}};
c.Sj={lensFlareVertexTexture:{I:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",H:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
lensFlare:{I:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",H:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};c.Fj=function(a){this.Db=void 0!==a?a:c.Cd};
c.Fj.prototype={constructor:c.Fj,load:function(a,b){var d=this,e=new c.ze(d.Db);e.Gc(this.crossOrigin);e.load(a,function(a){b(d.parse(a))})},parse:function(a){function b(a,b,d,e){return new c.L(a,b,d,e)}function d(a){a=parseInt(a);return 0<=a?a-1:a+r.length}function e(a){a=parseInt(a);return 0<=a?a-1:a+s.length}function f(a){a=parseInt(a);return 0<=a?a-1:a+u.length}function g(a,f,g,h){void 0===h?m.h.push(b(r[d(a)]-1,r[d(f)]-1,r[d(g)]-1)):m.h.push(b(r[d(a)]-1,r[d(f)]-1,r[d(g)]-1,[s[e(h[0])].clone(),
s[e(h[1])].clone(),s[e(h[2])].clone()]))}function h(a,b,d){m.A[0].push([u[f(a)].clone(),u[f(b)].clone(),u[f(d)].clone()])}function l(a,b,d){void 0===a[3]?(g(a[0],a[1],a[2],d),void 0!==b&&0<b.length&&h(b[0],b[1],b[2])):(void 0!==d&&0<d.length?(g(a[0],a[1],a[3],[d[0],d[1],d[3]]),g(a[1],a[2],a[3],[d[1],d[2],d[3]])):(g(a[0],a[1],a[3]),g(a[1],a[2],a[3])),void 0!==b&&0<b.length&&(h(b[0],b[1],b[3]),h(b[1],b[2],b[3])))}var k=new c.u,m,q,p;!1===/^o /gm.test(a)&&(m=new c.s,q=new c.Lb,p=new c.V(m,q),k.add(p));
var r=[],s=[],u=[],t=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,w=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,x=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,v=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,D=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,z=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,B=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;
a=a.replace(/\\\r\n/g,"");var G=a.split("\n");for(a=0;a<G.length;a++){var K=G[a],K=K.trim();0!==K.length&&"#"!==K.charAt(0)&&(null!==(p=t.exec(K))?r.push(m.e.push(new c.b(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])))):null!==(p=w.exec(K))?s.push(new c.b(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]))):null!==(p=x.exec(K))?u.push(new c.g(parseFloat(p[1]),parseFloat(p[2]))):null!==(p=v.exec(K))?l([p[1],p[2],p[3],p[4]]):null!==(p=D.exec(K))?l([p[2],p[5],p[8],p[11]],[p[3],p[6],p[9],p[12]]):
null!==(p=z.exec(K))?l([p[2],p[6],p[10],p[14]],[p[3],p[7],p[11],p[15]],[p[4],p[8],p[12],p[16]]):null!==(p=B.exec(K))?l([p[2],p[5],p[8],p[11]],[],[p[3],p[6],p[9],p[12]]):/^o /.test(K)?(m=new c.s,q=new c.Lb,p=new c.V(m,q),p.name=K.substring(2).trim(),k.add(p)):!/^g /.test(K)&&/^usemtl /.test(K)&&(q.name=K.substring(7).trim()))}q=k.children;a=0;for(t=q.length;a<t;a++)m=q[a].j,m.eb(),m.Yd();return k}};
